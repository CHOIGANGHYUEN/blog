<!DOCTYPE html>
<html>
<head>
<title>readme.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<p>src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/DataBaseConfig.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/DataBaseProperties.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/MybatisConfig.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/RootConfig.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/WebAppInitializer.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/config/WebConfig.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/BoardController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/ControllerBase.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/LoginController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/MainController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/ManagementUserController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/PostController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/controller/RegistController.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/domain/Board.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/domain/Domain.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/domain/Gender.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/domain/Post.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/domain/User.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/init/DatabaseInitializer.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/mapper/BoardMapper.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/mapper/PostMapper.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/mapper/UserMapper.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/repository/BoardRepository.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/repository/PostRepository.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/repository/UserRepository.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/impl/BoardServiceyImpl.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/impl/PostServiceImpl.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/impl/UserServiceImpl.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/BoardService.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/FindPasswordRequest.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/LoginRequest.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/LoginService.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/PostService.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/service/UserService.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/utility/DomainUtil.java
src/main/java/com/nhnacademy/springboard/spirngmvcboard/Base.java
src/main/resources/mapper/maps/BoardMapper.xml
src/main/resources/mapper/maps/PostMapper.xml
src/main/resources/mapper/maps/UserMapper.xml
src/main/resources/db.properties
src/main/webapp
src/main/webapp/resources
src/main/webapp/resources/style.css
src/main/webapp/WEB-INF
src/main/webapp/WEB-INF/views
src/main/webapp/WEB-INF/views/board
src/main/webapp/WEB-INF/views/board/edit.html
src/main/webapp/WEB-INF/views/board/post.html
src/main/webapp/WEB-INF/views/board/posts.html
src/main/webapp/WEB-INF/views/board/write.html
src/main/webapp/WEB-INF/views/category
src/main/webapp/WEB-INF/views/category/category.html
src/main/webapp/WEB-INF/views/login
src/main/webapp/WEB-INF/views/login/loginForm.html
src/main/webapp/WEB-INF/views/user
src/main/webapp/WEB-INF/views/user/find-id.html
src/main/webapp/WEB-INF/views/user/find-id-result.html
src/main/webapp/WEB-INF/views/user/find-password.html
src/main/webapp/WEB-INF/views/user/find-password-result.html
src/main/webapp/WEB-INF/views/loginInfo.html
src/main/webapp/WEB-INF/views/main.html
src/main/webapp/WEB-INF/views/managementUser.html
src/main/webapp/WEB-INF/views/userRegist.html
src/main/webapp/WEB-INF/views/userUpdate.html</p>
<p>package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import javax.sql.DataSource;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.apache.commons.dbcp2.BasicDataSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;
import org.springframework.transaction.PlatformTransactionManager;</p>
<p>@Slf4j
@RequiredArgsConstructor
@Configuration
public class DataBaseConfig {
private final DataBaseProperties databaseProperties;
@Bean
public DataSource dataSource() {
BasicDataSource basicDataSource = new BasicDataSource();
basicDataSource.setDriverClassName(databaseProperties.getDriverClassName());
log.info(&quot;driverClassName={}&quot;, databaseProperties.getDriverClassName());
basicDataSource.setUrl(databaseProperties.getUrl());
log.info(&quot;url={}&quot;, databaseProperties.getUrl());
basicDataSource.setUsername(databaseProperties.getUsername());
log.info(&quot;username={}&quot;, databaseProperties.getUsername());
basicDataSource.setPassword(databaseProperties.getPassword());
log.info(&quot;password={}&quot;, databaseProperties.getPassword());
basicDataSource.setInitialSize(databaseProperties.getInitialSize());
log.info(&quot;initialSize={}&quot;, databaseProperties.getInitialSize());
basicDataSource.setMaxTotal(databaseProperties.getMaxTotal());
log.info(&quot;maxTotal={}&quot;, databaseProperties.getMaxTotal());
basicDataSource.setMinIdle(databaseProperties.getMinIdle());
log.info(&quot;minIdle={}&quot;, databaseProperties.getMinIdle());
basicDataSource.setMaxIdle(databaseProperties.getMaxIdle());
basicDataSource.setTestOnBorrow(databaseProperties.isTestOnBorrow());
if(databaseProperties.isTestOnBorrow()) {
basicDataSource.setValidationQuery(basicDataSource.getValidationQuery());
}
log.info(&quot;testOnBorrow={}&quot;, databaseProperties.isTestOnBorrow());
log.info(&quot;basicDataSource {}&quot;,basicDataSource);
return basicDataSource;
}</p>
<p>@Bean
public PlatformTransactionManager transactionManager(){
return new DataSourceTransactionManager(dataSource());
}</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import lombok.Getter;
import lombok.NonNull;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.PropertySource;
import org.springframework.stereotype.Component;</p>
<p>@Component
@Getter
@PropertySource(value=&quot;classpath:/db.properties&quot;)
public class DataBaseProperties {
@NonNull
@Value(&quot;${db.username}&quot;)
private String username;
@NonNull
@Value(&quot;${db.password}&quot;)
private String password;
@NonNull
@Value(&quot;${db.driverClassName}&quot;)
private String driverClassName;
@NonNull
@Value(&quot;${db.url}&quot;)
private String url;
@NonNull
@Value(&quot;${db.initialSize}&quot;)
private Integer initialSize;
@NonNull
@Value(&quot;${db.maxTotal}&quot;)
private Integer maxTotal;
@NonNull
@Value(&quot;${db.maxIdle}&quot;)
private Integer maxIdle;
@NonNull
@Value(&quot;${db.minIdle}&quot;)
private Integer minIdle;
@NonNull
@Value(&quot;${db.maxWaitMillis}&quot;)
private Integer maxWaitMillis;
@NonNull
@Value(&quot;${db.validationQuery}&quot;)
private String validationQuery;
@NonNull
@Value(&quot;${db.testOnBorrow}&quot;)
private String testOnBorrow;</p>
<p>public boolean isTestOnBorrow() {
return testOnBorrow.equals(&quot;true&quot;);
}
}</p>
<p>package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import javax.sql.DataSource;
import lombok.RequiredArgsConstructor;
import org.apache.ibatis.session.SqlSessionFactory;
import org.mybatis.spring.SqlSessionFactoryBean;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;</p>
<p>@RequiredArgsConstructor
@Configuration
@MapperScan(basePackages = &quot;com.nhnacademy.springboard.spirngmvcboard.mapper.**&quot;)
public class MybatisConfig {
private final DataSource dataSource;
@Bean
public SqlSessionFactory sqlSessionFactory() throws Exception {
PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
SqlSessionFactoryBean sessionFactory = new SqlSessionFactoryBean();
sessionFactory.setDataSource(dataSource);
sessionFactory.setMapperLocations(resolver.getResources(&quot;classpath*:/mapper/maps/*.xml&quot;));
org.apache.ibatis.session.Configuration configuration = new org.apache.ibatis.session.Configuration();
configuration.setMapUnderscoreToCamelCase(true);</p>
<pre><code>//camelcase 설정
//https://mybatis.org/mybatis-3/configuration.html
sessionFactory.setConfiguration(configuration);
return sessionFactory.getObject();
</code></pre>
<p>}</p>
<p>}</p>
<p>package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import com.nhnacademy.springboard.spirngmvcboard.Base;
import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.mapper.BoardMapper;
import org.mybatis.spring.mapper.MapperScannerConfigurer;
import org.springframework.context.MessageSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ResourceBundleMessageSource;
import org.springframework.stereotype.Controller;</p>
<p>@Configuration
@ComponentScan(basePackageClasses = {Base.class}, excludeFilters = {@ComponentScan.Filter(classes={Controller.class})})
public class RootConfig {</p>
<p>@Bean(name = &quot;objectMapper&quot;)
public ObjectMapper objectMapper() {
ObjectMapper objectMapper = new ObjectMapper();
//pretty print json
objectMapper.enable(SerializationFeature.INDENT_OUTPUT);
//value -&gt; null 무시
objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
//LocalDate, LocalDateTime support jsr310
objectMapper.registerModule(new JavaTimeModule());
//timestamp 출력을 disable. -&gt; 문자열형태로 출력
objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
return objectMapper;
}</p>
<p>@Bean
public MessageSource messageSource() {
ResourceBundleMessageSource resourceBundleMessageSource = new ResourceBundleMessageSource();
resourceBundleMessageSource.setBasename(&quot;message&quot;);
resourceBundleMessageSource.setDefaultEncoding(&quot;UTF-8&quot;);
return resourceBundleMessageSource;
}</p>
<p>@Bean
public MapperScannerConfigurer mapperScannerConfigurer() {
MapperScannerConfigurer configurer = new MapperScannerConfigurer();
configurer.setBasePackage(&quot;com.nhnacademy.springboard.spirngmvcboard.mapper&quot;);
return configurer;
}</p>
<p>}package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import javax.servlet.Filter;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.filter.CharacterEncodingFilter;
import org.springframework.web.servlet.DispatcherServlet;
import org.springframework.web.servlet.FrameworkServlet;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;</p>
<p>public class WebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {</p>
<p>@Override
protected Class&lt;?&gt;[] getRootConfigClasses() {
return new Class[]{RootConfig.class};
}</p>
<p>@Override
protected Class&lt;?&gt;[] getServletConfigClasses() {
return new Class[]{WebConfig.class};
}</p>
<p>@Override
protected String[] getServletMappings() {
return new String[]{&quot;/&quot;};
}</p>
<p>@Override
protected Filter[] getServletFilters() {
CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();
encodingFilter.setEncoding(&quot;UTF-8&quot;);
encodingFilter.setForceEncoding(true);
return new Filter[]{encodingFilter};
}</p>
<p>@Override
protected FrameworkServlet createDispatcherServlet(WebApplicationContext servletAppContext) {
DispatcherServlet dispatcherServlet = new DispatcherServlet();
dispatcherServlet.setApplicationContext(servletAppContext);
return dispatcherServlet;
}
}
package com.nhnacademy.springboard.spirngmvcboard.config;</p>
<p>import com.fasterxml.jackson.databind.util.Converter;
import com.nhnacademy.springboard.spirngmvcboard.init.DatabaseInitializer;
import com.nhnacademy.springboard.spirngmvcboard.mapper.BoardMapper;
import com.nhnacademy.springboard.spirngmvcboard.mapper.PostMapper;
import com.nhnacademy.springboard.spirngmvcboard.mapper.UserMapper;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import com.nhnacademy.springboard.spirngmvcboard.thymeleaf.CustomTagDialet;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.MessageSource;
import org.springframework.context.MessageSourceAware;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.format.FormatterRegistry;
import org.springframework.util.StringUtils;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import org.springframework.web.servlet.resource.PathResourceResolver;
import org.thymeleaf.spring5.SpringTemplateEngine;
import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;
import org.thymeleaf.spring5.view.ThymeleafViewResolver;
import org.thymeleaf.templatemode.TemplateMode;</p>
<p>@Configuration
@EnableWebMvc
@ComponentScan(basePackageClasses = {com.nhnacademy.springboard.spirngmvcboard.controller.ControllerBase.class})
public class WebConfig implements WebMvcConfigurer, ApplicationContextAware , MessageSourceAware {
ApplicationContext applicationContext ;
MessageSource messageSource ;
@Override
public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
this.applicationContext = applicationContext;
}</p>
<p>@Override
public void setMessageSource(MessageSource messageSource) {
this.messageSource = messageSource;
}
@Bean
public ThymeleafViewResolver thymeleafViewResolver() {
ThymeleafViewResolver thymeleafViewResolver = new ThymeleafViewResolver();
thymeleafViewResolver.setTemplateEngine(springTemplateEngine());
thymeleafViewResolver.setCharacterEncoding(&quot;UTF-8&quot;);
thymeleafViewResolver.setOrder(1);
thymeleafViewResolver.setViewNames(new String[]{&quot;*&quot;});
return thymeleafViewResolver;
}
public SpringTemplateEngine springTemplateEngine() {
SpringTemplateEngine templateEngine = new SpringTemplateEngine();
templateEngine.setTemplateResolver(springResourceTemplateResolver());
templateEngine.setTemplateEngineMessageSource(messageSource);
templateEngine.addDialect(new CustomTagDialet());
return templateEngine;</p>
<p>}</p>
<p>@Bean
public DatabaseInitializer databaseInitializer(UserService userService, BoardMapper boardMapper, PostMapper postMapper, UserMapper userMapper) {
return new DatabaseInitializer(userService, boardMapper, postMapper, userMapper);
}
@Override
public void addFormatters(FormatterRegistry registry) {
registry.addConverter(String.class, LocalDate.class, source -&gt; {
if (source == null || source.isEmpty()) {
return null;
}
return LocalDate.parse(source, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));
});
}</p>
<p>public SpringResourceTemplateResolver springResourceTemplateResolver() {
SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();
templateResolver.setApplicationContext(applicationContext);
templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);
templateResolver.setPrefix(&quot;/WEB-INF/views/&quot;);
templateResolver.setSuffix(&quot;.html&quot;);
templateResolver.setCacheable(false);
templateResolver.setTemplateMode(TemplateMode.HTML);
return templateResolver;
}</p>
<p>@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
registry.addResourceHandler(&quot;/resources/**&quot;)
.addResourceLocations(&quot;/resources/&quot;)
.setCachePeriod(3600)
.resourceChain(true)
.addResolver(new PathResourceResolver());
}</p>
<p>@Override
public void configureViewResolvers(ViewResolverRegistry registry) {
registry.viewResolver(thymeleafViewResolver());
}
}
package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.domain.Post;
import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.service.BoardService;
import com.nhnacademy.springboard.spirngmvcboard.service.PostService;
import java.nio.file.AccessDeniedException;
import java.util.List;
import javax.servlet.http.HttpSession;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>@Slf4j
@Controller
@RequestMapping(&quot;/board&quot;)
public class BoardController implements ControllerBase {
private final BoardService boardService;
private final PostService postService;</p>
<p>public BoardController(BoardService boardService, PostService postService) {
this.boardService = boardService;
this.postService = postService;
}</p>
<p>@GetMapping
public String doCategory(Model model) {
try {
model.addAttribute(&quot;boards&quot;, boardService.findAll());
} catch (Exception e) {
e.getMessage();
}
return &quot;category/category&quot;;
}</p>
<p>@GetMapping(&quot;/{id}&quot;)
public String doBoard(Model model, @PathVariable(&quot;id&quot;) int id) {
log.info(&quot;id={}&quot;, id);
Board board = boardService.findById((long) id);
List<Post> posts = postService.findByBoardId(board.getId());
model.addAttribute(&quot;posts&quot;, posts);
model.addAttribute(&quot;board&quot;, board); // 이 부분을 추가해줍니다.
log.info(&quot;posts={}&quot;, posts);
return &quot;board/posts&quot;;
}</p>
<p>@PostMapping(&quot;/{boardId}/write&quot;)
public String createPost(@ModelAttribute Post post, HttpSession session, @PathVariable Long boardId) { // 수정
User loginUser = (User) session.getAttribute(&quot;user&quot;);
post.setAuthor(loginUser);
post.setBoard(boardService.findById(boardId)); // 수정
postService.save(post);
return &quot;redirect:/board/&quot; + boardId; // 수정
}</p>
<p>@GetMapping(&quot;/{boardId}/write&quot;)
public String showWriteForm(@PathVariable Long boardId, Model model, HttpSession session) {
User user = (User) session.getAttribute(&quot;user&quot;);
if (user == null) {
try {
throw new AccessDeniedException(&quot;Access is Denied&quot;);
} catch (AccessDeniedException e) {
throw new RuntimeException(e);
}
}
Post post = new Post();
model.addAttribute(&quot;post&quot;, post);
model.addAttribute(&quot;boardId&quot;, boardId); // 삭제
model.addAttribute(&quot;board&quot;, boardService.findById(boardId)); // 추가
return &quot;board/write&quot;;
}
}
package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>public interface ControllerBase {</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.service.FindPasswordRequest;
import com.nhnacademy.springboard.spirngmvcboard.service.LoginRequest;
import com.nhnacademy.springboard.spirngmvcboard.service.LoginService;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import com.nhnacademy.springboard.spirngmvcboard.service.LoginRequest.FindIdRequest;
import java.util.Objects;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>@Slf4j
@RequestMapping(&quot;/&quot;)
@Controller
@RequiredArgsConstructor
public class LoginController implements ControllerBase {
private final LoginService loginService;
private final UserService userService;</p>
<p>@GetMapping(&quot;/login&quot;)
public String isLogin(Model model, HttpServletRequest request) {
HttpSession session = request.getSession(true);
User user = (User) session.getAttribute(&quot;user&quot;);
if (Objects.isNull(user)) {
return &quot;login/loginForm&quot;;
}
model.addAttribute(&quot;user&quot;, user);</p>
<pre><code>return &quot;main&quot;;
</code></pre>
<p>}
@PostMapping(&quot;/login&quot;)
public String doLogin(@ModelAttribute(&quot;LoginRequest&quot;) LoginRequest loginRequest, Model model, HttpServletRequest request) {
try {
if (loginService.isValidate(loginRequest)) {
User user = userService.findByUseremail(loginRequest.getEmail());
if (user == null) {
model.addAttribute(&quot;errorMessage&quot;, &quot;해당 계정이 존재하지 않습니다.&quot;);
return &quot;login/loginForm&quot;;
}
HttpSession session = request.getSession(false);
session.setAttribute(&quot;user&quot;, user);
return &quot;redirect:/login&quot;;
} else {
// 로그인 실패 시 에러 메시지를 추가합니다.
model.addAttribute(&quot;errorMessage&quot;, &quot;이메일 또는 비밀번호가 잘못되었습니다.&quot;);
return &quot;login/loginForm&quot;;
}
} catch (Exception e) {
log.error(&quot;Login failed: {}&quot;, e.getMessage(), e);
model.addAttribute(&quot;errorMessage&quot;, e.getMessage());
return &quot;login/loginForm&quot;;
}
}</p>
<p>@GetMapping(&quot;/logout&quot;)
public String doLogout(HttpServletRequest request, HttpServletResponse response) {
HttpSession session = request.getSession(false);
session.removeAttribute(&quot;user&quot;);
Cookie cookie = new Cookie(&quot;JSESSIONID&quot;, &quot;&quot;);
cookie.setMaxAge(0);
cookie.setValue(null);
response.addCookie(cookie);
return &quot;redirect:/login&quot;;
}
@GetMapping(&quot;/find-password&quot;)
public String findPasswordForm(Model model) {
model.addAttribute(&quot;FindPasswordRequest&quot;, new FindPasswordRequest());
return &quot;user/find-password&quot;;
}</p>
<p>@PostMapping(&quot;/find-password&quot;)
public String findPassword(@ModelAttribute FindPasswordRequest findPasswordRequest, Model model) {
User user = userService.findByUseremail(findPasswordRequest.getEmail());
if (user == null) {
model.addAttribute(&quot;errorMessage&quot;, &quot;해당 이메일로 가입한 사용자가 존재하지 않습니다.&quot;);
return &quot;user/find-password&quot;;
}
model.addAttribute(&quot;message&quot;, &quot;해당 이메일로 가입한 사용자의 비밀번호는 &quot; + user.getPassword() + &quot; 입니다.&quot;);
return &quot;user/find-password-result&quot;;
}</p>
<p>@GetMapping(&quot;/find-id&quot;)
public String findIdForm(Model model) {
model.addAttribute(&quot;FindIdRequest&quot;, new FindIdRequest());
return &quot;user/find-id&quot;;
}</p>
<p>@PostMapping(&quot;/find-id&quot;)
public String findId(@ModelAttribute FindIdRequest findIdRequest, Model model) {
User user = userService.findByUseremail(findIdRequest.getEmail());
if (user == null) {
model.addAttribute(&quot;errorMessage&quot;, &quot;해당 이메일로 가입한 사용자가 존재하지 않습니다.&quot;);
return &quot;user/find-id&quot;;
}
model.addAttribute(&quot;message&quot;, &quot;해당 이메일로 가입한 사용자의 아이디는 &quot; + user.getUsername() + &quot; 입니다.&quot;);
return &quot;user/find-id-result&quot;;
}
}
package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>@Controller
@RequestMapping(&quot;/&quot;)
public class MainController implements ControllerBase {
@GetMapping(&quot;/&quot;)
public String mainPage(Model model, HttpServletRequest request) {
HttpSession session = request.getSession(false);
if (session != null) {
User user = (User) session.getAttribute(&quot;user&quot;);
if (user != null) {
model.addAttribute(&quot;user&quot;, user);
}
}
return &quot;main&quot;;
}
}
package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import java.util.List;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;</p>
<p>@Slf4j
@Controller
@RequestMapping(&quot;/usermanage&quot;)
public class ManagementUserController implements ControllerBase {</p>
<p>private final UserService userService;</p>
<p>public ManagementUserController(UserService userService) {
this.userService = userService;
}</p>
<p>@GetMapping(&quot;/list&quot;)
public String doUserManage(Model model) {
List<User> userList = userService.findAll();
model.addAttribute(&quot;userlist&quot;, userList);
return &quot;managementUser&quot;;
}</p>
<p>@GetMapping(&quot;/delete/{id}&quot;)
public String doDeleteUser(@PathVariable(&quot;id&quot;) Long id, Model model) {
userService.delete(id);
model.addAttribute(&quot;userList&quot;, userService.findAll());
return &quot;redirect:/usermanage/list&quot;;
}</p>
<p>@GetMapping(&quot;/update/{id}&quot;)
public String validateUpdateUser(@PathVariable(&quot;id&quot;) Long id, Model model) {
User user = userService.findById(id);
if (user == null) {
model.addAttribute(&quot;error&quot;, &quot;해당 사용자가 없습니다.&quot;);
return &quot;managementUser&quot;;
}
model.addAttribute(&quot;user&quot;, user);
return &quot;userUpdate&quot;;
}</p>
<p>@PostMapping(&quot;/update/{id}&quot;)
public String doUpdate(@ModelAttribute(&quot;user&quot;) User user, @PathVariable(&quot;id&quot;) Long id, Model model) {
User existingUser = userService.findById(id);
if (existingUser == null) {
model.addAttribute(&quot;error&quot;, &quot;해당 사용자가 없습니다.&quot;);
return &quot;managementUser&quot;;
}
existingUser.setUsername(user.getUsername());
existingUser.setPassword(user.getPassword());
existingUser.setEmail(user.getEmail());
existingUser.setBirthDate(user.getBirthDate());
userService.update(existingUser);
model.addAttribute(&quot;userList&quot;, userService.findAll());
return &quot;userRegist&quot;;
}
}</p>
<pre class="hljs"><code><div><span class="hljs-keyword">package</span> com.nhnacademy.springboard.spirngmvcboard.controller;

<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.domain.Board;
<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.domain.Post;
<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.domain.User;
<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.service.BoardService;
<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.service.PostService;
<span class="hljs-keyword">import</span> com.nhnacademy.springboard.spirngmvcboard.service.UserService;
<span class="hljs-keyword">import</span> java.nio.file.AccessDeniedException;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpSession;
<span class="hljs-keyword">import</span> org.apache.ibatis.javassist.NotFoundException;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;
<span class="hljs-keyword">import</span> org.springframework.ui.Model;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PostMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;

<span class="hljs-meta">@Controller</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/board"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ControllerBase</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PostService postService;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BoardService boardService;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PostController</span><span class="hljs-params">(PostService postService, BoardService boardService, UserService userService)</span> </span>{
    <span class="hljs-keyword">this</span>.postService = postService;
    <span class="hljs-keyword">this</span>.boardService = boardService;
    <span class="hljs-keyword">this</span>.userService = userService;
  }

  <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/{boardId}/post/{postId}"</span>)
  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">viewPost</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"boardId"</span>)</span> Long boardId, @<span class="hljs-title">PathVariable</span><span class="hljs-params">(<span class="hljs-string">"postId"</span>)</span> Long postId, Model model) </span>{
    Post post = postService.findById(postId);
    <span class="hljs-keyword">if</span> (post == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotFoundException(<span class="hljs-string">"Post not found with id "</span> + postId);
      } <span class="hljs-keyword">catch</span> (NotFoundException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
      }
    }

    User author = userService.findById(post.getAuthor().getId());
    post.setAuthor(author);

    Board board = boardService.findById(boardId);
    <span class="hljs-keyword">if</span> (board == <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotFoundException(<span class="hljs-string">"Board not found with id "</span> + boardId);
      } <span class="hljs-keyword">catch</span> (NotFoundException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
      }
    }

    post.setBoard(board);
    model.addAttribute(<span class="hljs-string">"board"</span>, board);
    model.addAttribute(<span class="hljs-string">"post"</span>, post);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"board/post"</span>;
  }

  <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/{boardId}/post/{postId}/edit"</span>)
  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">showEditForm</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"boardId"</span>)</span> Long boardId, @<span class="hljs-title">PathVariable</span><span class="hljs-params">(<span class="hljs-string">"postId"</span>)</span> Long postId, Model model, HttpSession session) </span>{
    User user = (User) session.getAttribute(<span class="hljs-string">"user"</span>);
    Post post = postService.findById(postId);

    <span class="hljs-comment">// 로그인한 유저와 게시물 작성자가 같은 경우에만 수정 가능</span>
    <span class="hljs-keyword">if</span> (user != <span class="hljs-keyword">null</span> &amp;&amp; post.getAuthor().getId().equals(user.getId())) {
      model.addAttribute(<span class="hljs-string">"post"</span>, post);
      <span class="hljs-keyword">return</span> <span class="hljs-string">"board/edit"</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> AccessDeniedException(<span class="hljs-string">"Access is Denied"</span>);
      } <span class="hljs-keyword">catch</span> (AccessDeniedException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
      }
    }
  }

  <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/{boardId}/post/{postId}/edit"</span>)
  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updatePost</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"boardId"</span>)</span> Long boardId, @<span class="hljs-title">PathVariable</span><span class="hljs-params">(<span class="hljs-string">"postId"</span>)</span> Long postId, @ModelAttribute Post updatedPost, HttpSession session) </span>{
    User loginUser = (User) session.getAttribute(<span class="hljs-string">"user"</span>);
    Post post = postService.findById(postId);

    <span class="hljs-comment">// 로그인한 유저와 게시물 작성자가 같은 경우에만 수정 가능</span>
    <span class="hljs-keyword">if</span> (loginUser != <span class="hljs-keyword">null</span> &amp;&amp; post.getAuthor().getId().equals(loginUser.getId())) {
      post.setTitle(updatedPost.getTitle());
      post.setContent(updatedPost.getContent());
      postService.update(post);
      <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/board/"</span> + boardId + <span class="hljs-string">"/post/"</span> + postId;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> AccessDeniedException(<span class="hljs-string">"Access is Denied"</span>);
      } <span class="hljs-keyword">catch</span> (AccessDeniedException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
      }
    }
  }

  <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/{boardId}/post/{postId}/delete"</span>)
  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">deletePost</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"boardId"</span>)</span> Long boardId, @<span class="hljs-title">PathVariable</span><span class="hljs-params">(<span class="hljs-string">"postId"</span>)</span> Long postId, HttpSession session) </span>{
    User loginUser = (User) session.getAttribute(<span class="hljs-string">"user"</span>);
    Post post = postService.findById(postId);

    <span class="hljs-comment">// 로그인한 유저와 게시물 작성자가 같은 경우에만 삭제 가능</span>
    <span class="hljs-keyword">if</span> (loginUser != <span class="hljs-keyword">null</span> &amp;&amp; post.getAuthor().getId().equals(loginUser.getId())) {
      postService.delete(postId);
      <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/board/"</span> + boardId;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> AccessDeniedException(<span class="hljs-string">"Access is Denied"</span>);
      } <span class="hljs-keyword">catch</span> (AccessDeniedException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(e);
      }
    }
  }

}

</div></code></pre>
<p>package com.nhnacademy.springboard.spirngmvcboard.controller;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import lombok.extern.slf4j.Slf4j;
import org.springframework.format.annotation.DateTimeFormat;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
@Slf4j
@Controller
@RequestMapping(&quot;/&quot;)
public class RegistController {
private final UserService userService;</p>
<p>public RegistController(UserService userService) {
this.userService = userService;
}</p>
<p>@PostMapping(&quot;/regist&quot;)
public String doRegist(@ModelAttribute(&quot;user&quot;) @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;) User user, Model model) {
User existingUser = userService.findByUseremail(user.getEmail());</p>
<pre><code>if (existingUser != null) {
  model.addAttribute(&quot;error&quot;, &quot;이미 존재하는 사용자 이메일입니다. 다른 사용자 이메일을 선택해주세요.&quot;);
  log.info(&quot;User already exists: {}&quot;, user.getUsername());
  return &quot;userRegist&quot;;
}

try {
  userService.save(user);
} catch (Exception e) {
  model.addAttribute(&quot;error&quot;, &quot;등록 중 오류가 발생했습니다. 다시 시도해주세요.&quot;);
  return &quot;userRegist&quot;;
}

return &quot;redirect:/&quot;;
</code></pre>
<p>}</p>
<p>@GetMapping(&quot;/regist&quot;)
public String doRegist() {
return &quot;userRegist&quot;;
}
}
package com.nhnacademy.springboard.spirngmvcboard.domain;</p>
<p>import lombok.Getter;
import lombok.Setter;
import lombok.ToString;</p>
<p>@Getter
@Setter
@ToString
public class Board {
private Long id;
private String name;
private String description;</p>
<pre><code>public Board() {
}


public Board(String name, String description) {
  this.name = name;
  this.description = description;
}
</code></pre>
<p>}</p>
<p>package com.nhnacademy.springboard.spirngmvcboard.domain;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.utility.DomainUtil;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.Objects;
import lombok.Getter;
import lombok.Setter;
import lombok.ToString;
// 도메인 클래스
@Getter
@Setter
@ToString
public class Post {
private Long id;
private String title;
private String content;
private LocalDateTime createdAt;
private LocalDateTime updatedAt;
private Long authorId;
private Long boardId;
private User author;
private Board board;
public Post(){}
public Post(String title, String content, User author, Board board) {
this.title = title;
this.content = content;
this.createdAt = LocalDateTime.now();
this.updatedAt = LocalDateTime.now();
this.author = author;
this.board = board;
}
public Post(String title, String content, User author, Board board, LocalDateTime createdAt, LocalDateTime updatedAt) {
this.title = title;
this.content = content;
this.createdAt =createdAt;
this.updatedAt = updatedAt;
this.author = author;
this.board = board;
}
public void setAuthor(User author) {
this.author = author;
this.authorId = author.getId();
}</p>
<p>public void setBoard(Board board) {
this.board = board;
this.boardId = board.getId();
}
public Board getBoard() {
return board;
}</p>
<p>}</p>
<p>//package com.nhnacademy.springboard.spirngmvcboard.domain;
//
//    import com.nhnacademy.springboard.spirngmvcboard.utility.DomainUtil;
//    import java.time.LocalDate;
//    import java.time.LocalDateTime;
//    import java.util.Objects;
//    import lombok.Getter;
//    import lombok.Setter;
//    import lombok.ToString;
//// 도메인 클래스
//@Getter
//@Setter
//@ToString
//public class Post {
//  private Long id;
//  private String title;
//  private String content;
//  private LocalDateTime createdAt;
//  private LocalDateTime updatedAt;
//  private Long authorId;
//  private Long boardId;
//
//  public Post(){}
//  public Post(String title, String content, Long authorId, Long boardId) {
//    this.title = title;
//    this.content = content;
//    this.createdAt = LocalDateTime.now();
//    this.updatedAt = LocalDateTime.now();
//    this.authorId = authorId;
//    this.boardId = boardId;
//  }
//  public Post(String title, String content, Long authorId, Long boardId, LocalDateTime createdAt, LocalDateTime updatedAt) {
//    this.title = title;
//    this.content = content;
//    this.createdAt =createdAt;
//    this.updatedAt = updatedAt;
//    this.authorId = authorId;
//    this.boardId = boardId;
//  }
//
//
//}</p>
<p>package com.nhnacademy.springboard.spirngmvcboard.domain;</p>
<p>import java.time.LocalDate;
import java.time.LocalDateTime;
import lombok.Getter;
import lombok.Setter;
import lombok.ToString;
import org.springframework.format.annotation.DateTimeFormat;</p>
<p>@ToString
@Getter
@Setter
public class User {
private Long id;
private String username;
private String password;
private String email;</p>
<p>@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)
private LocalDate birthDate;
private LocalDateTime createdAt;</p>
<p>public User() {
}</p>
<p>public User(String username, String password, String email, LocalDate birthDate) {
this.username = username;
this.password = password;
this.email = email;
this.birthDate = birthDate;
}</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.init;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.domain.Post;
import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.mapper.BoardMapper;
import com.nhnacademy.springboard.spirngmvcboard.mapper.PostMapper;
import com.nhnacademy.springboard.spirngmvcboard.mapper.UserMapper;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Component;</p>
<p>@Slf4j
@Component
public class DatabaseInitializer {</p>
<p>private final UserService userService;
private final BoardMapper boardMapper;
private final PostMapper postMapper;
private final UserMapper userMapper;</p>
<p>@Autowired
public DatabaseInitializer(UserService userService, BoardMapper boardMapper,
PostMapper postMapper, UserMapper userMapper) {
this.userService = userService;
this.boardMapper = boardMapper;
this.postMapper = postMapper;
this.userMapper = userMapper;
}</p>
<p>@Bean
public void initializeDatabase() {
Board board1 = new Board(&quot;공지사항&quot;, &quot;웹 사이트 관련 공지사항&quot;);
if (boardMapper.findById(1L) == null) {
boardMapper.save(board1);
}
board1.setId(boardMapper.findByName(&quot;공지사항&quot;).getId());</p>
<pre><code>log.info(&quot;board1 id: {}&quot;, board1.getId());

Board board2 = new Board(&quot;자유게시판&quot;, &quot;자유롭게 글을 올리는 게시판입니다.&quot;);
if (boardMapper.findById(2L) == null) {
  boardMapper.save(board2);
}
board2.setId(boardMapper.findByName(&quot;자유게시판&quot;).getId());

log.info(&quot;board2 id: {}&quot;, board2.getId());

User user = new User(&quot;admin&quot;, &quot;1234&quot;, &quot;admin@nhnacademy.com&quot;, LocalDate.now());
if (userMapper.findByUseremail(user.getEmail()) == null) {
  userMapper.save(user);
} else {
  user.setId(userMapper.findByUseremail(user.getEmail()).getId());
}

Post post1 = new Post(&quot;서비스 이용 안내&quot;, &quot;안녕하세요. NHN Academy 웹 사이트를 이용해주시는 여러분께 감사드립니다.&quot;, user, board1);
post1.setId(1L);
post1.setCreatedAt(LocalDateTime.now().minusDays(7));
post1.setUpdatedAt(LocalDateTime.now().minusDays(7));

Post post2 = new Post(&quot;나만의 공부법&quot;, &quot;여러분은 자신만의 공부법이 있으신가요? 제가 추천하는 공부법을 소개합니다.&quot;, user, board2);
post2.setId(2L);
post2.setCreatedAt(LocalDateTime.now().minusDays(5));
post2.setUpdatedAt(LocalDateTime.now().minusDays(5));

Post post3 = new Post(&quot;자유롭게 글을 올려보세요&quot;, &quot;이 게시판은 자유롭게 글을 올리는 공간입니다.&quot;, user, board2);
post3.setId(3L);
post3.setCreatedAt(LocalDateTime.now().minusDays(3));
post3.setUpdatedAt(LocalDateTime.now().minusDays(3));

Post post4 = new Post(&quot;NHN IT 교육 서비스 이용 후기&quot;, &quot;NHN에서 제공하는 IT 교육 서비스를 이용하셨나요? 후기를 남겨보세요!&quot;, user, board2);
post4.setId(4L);
post4.setCreatedAt(LocalDateTime.now().minusDays(1));
post4.setUpdatedAt(LocalDateTime.now().minusDays(1));

savePostIfNotExists(post1);
savePostIfNotExists(post2);
savePostIfNotExists(post3);
savePostIfNotExists(post4);
</code></pre>
<p>}</p>
<p>private void savePostIfNotExists(Post post) {
// 게시물의 ID를 이용해 이미 존재하는지 확인
Post existingPost = postMapper.findById(post.getId());
if (existingPost == null) {
// 게시물이 존재하지 않으면 저장
postMapper.save(post);
}
}
}package com.nhnacademy.springboard.spirngmvcboard.mapper;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import org.apache.ibatis.annotations.Mapper;
import java.util.List;</p>
<p>@Mapper
public interface BoardMapper {
void save(Board board);</p>
<p>Board findById(Long id);</p>
<p>Board findByName(String title);</p>
<p>void update(Board board);</p>
<p>void delete(Long id);</p>
<p>List<Board> findAll();
}
package com.nhnacademy.springboard.spirngmvcboard.mapper;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.domain.Post;
import org.apache.ibatis.annotations.Delete;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.annotations.Update;
import java.util.List;</p>
<p>@Mapper
public interface PostMapper {
void save(Post post);</p>
<p>Post findById(Long id);</p>
<p>void update(Post post);</p>
<p>void delete(Long id);</p>
<p>List<Post> findAll();
List<Post> findByBoard(Board board);
List<Post> findByBoardId(Long boardId);
List<Post> findByAuthorId(Long userId);</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.mapper;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import org.apache.ibatis.annotations.Delete;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.annotations.Update;
import java.util.List;
import org.springframework.stereotype.Repository;</p>
<p>@Mapper
public interface UserMapper {
void save(User user);
User findById(Long id);</p>
<p>User findByUsername(String username);
User findByUseremail(String email);</p>
<p>void update(User user);</p>
<p>void delete(Long id);</p>
<p>List<User> findAll();
}
package com.nhnacademy.springboard.spirngmvcboard.service.impl;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.mapper.BoardMapper;
import com.nhnacademy.springboard.spirngmvcboard.service.BoardService;
import java.util.List;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;</p>
<p>@Service
@RequiredArgsConstructor
public class BoardServiceyImpl implements BoardService {
private final BoardMapper boardMapper;
@Override
public void save(Board board) {
boardMapper.save(board);
}
@Override
public Board findById(Long id) {
return boardMapper.findById(id);
}</p>
<p>@Override
public void update(Board board) {
boardMapper.update(board);
}</p>
<p>@Override
public Board findByName(String title) {
return boardMapper.findByName(title);
}</p>
<p>@Override
public void delete(Long id) {
boardMapper.delete(id);
}</p>
<p>@Override
public List<Board> findAll() {
return boardMapper.findAll();
}</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.service.impl;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.domain.Post;
import com.nhnacademy.springboard.spirngmvcboard.mapper.PostMapper;
import com.nhnacademy.springboard.spirngmvcboard.service.PostService;
import java.util.List;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;</p>
<p>@RequiredArgsConstructor
@Transactional
@Service
public class PostServiceImpl implements PostService {
private final PostMapper postMapper;</p>
<p>@Override
public void save(Post post) {
postMapper.save(post);
}</p>
<p>@Override
public Post findById(Long id) {
return postMapper.findById(id);
}</p>
<p>@Override
public List<Post> findByAuthorId(Long userId) {
return postMapper.findByAuthorId(userId);
}</p>
<p>@Override
public void update(Post post) {
postMapper.update(post);
}</p>
<p>@Override
public void delete(Long id) {
postMapper.delete(id);
}</p>
<p>@Override
public List<Post> findAll() {
return postMapper.findAll();
}</p>
<p>@Override
public List<Post> findByBoard(Board board) {
return postMapper.findByBoardId(board.getId());
}</p>
<p>@Override
public List<Post> findByBoardId(Long boardId) {
return postMapper.findByBoardId(boardId);
}</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.service.impl;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.mapper.UserMapper;
import com.nhnacademy.springboard.spirngmvcboard.repository.UserRepository;
import com.nhnacademy.springboard.spirngmvcboard.service.UserService;
import java.util.List;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;</p>
<p>@Service
@RequiredArgsConstructor
public class UserServiceImpl implements UserService {
private final UserMapper userMapper;
@Override
public void save(User user) {
userMapper.save(user);
}</p>
<p>@Override
public User findById(Long id) {
return userMapper.findById(id);
}</p>
<p>@Override
public User findByUsername(String username) {
return userMapper.findByUsername(username);
}</p>
<p>@Override
public User findByUseremail(String email) {
return userMapper.findByUseremail(email);
}</p>
<p>@Override
public void update(User user) {
userMapper.update(user);
}</p>
<p>@Override
public void delete(Long id) {
userMapper.delete(id);
}</p>
<p>@Override
public List<User> findAll() {
return userMapper.findAll();
}</p>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import java.util.List;</p>
<p>public interface BoardService {
void save(Board board);
Board findByName(String title);</p>
<pre><code>Board findById(Long id);
void update(Board board);
void delete(Long id);
List&lt;Board&gt; findAll();
</code></pre>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import lombok.Getter;
import lombok.Setter;</p>
<p>@Getter
@Setter
public class FindPasswordRequest {
private String email;
private String passwword;
}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import javax.validation.constraints.NotBlank;
import lombok.Getter;
import lombok.Setter;</p>
<p>@Getter
@Setter
public class LoginRequest {
@NotBlank(message=&quot;이메일를 입력하세요&quot;)
private String email;
@NotBlank(message=&quot;비밀번호를 입력하세요&quot;)
private String pwd;</p>
<p>@Getter
@Setter
public static class FindIdRequest {
private String email;</p>
<pre><code>// 생성자, getter, setter
</code></pre>
<p>}
}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import com.nhnacademy.springboard.spirngmvcboard.mapper.UserMapper;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
@Slf4j
@Service
@RequiredArgsConstructor
public class LoginService {
private final UserMapper userMapper;</p>
<p>public boolean isValidate(LoginRequest loginRequest) {
User user = userMapper.findByUseremail(loginRequest.getEmail());
boolean result = user != null &amp;&amp; user.getPassword().equals(loginRequest.getPwd());
log.info(&quot;isValidate : {}&quot;, result);
return result;
}
}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Board;
import com.nhnacademy.springboard.spirngmvcboard.domain.Post;
import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import java.util.List;</p>
<p>public interface PostService {
void save(Post post);</p>
<p>Post findById(Long id);
void update(Post post);
void delete(Long id);
List<Post> findByAuthorId(Long userId);
List<Post> findAll();
List<Post> findByBoard(Board board);
List<Post> findByBoardId(Long boardId);
}
package com.nhnacademy.springboard.spirngmvcboard.service;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.User;
import java.util.List;</p>
<p>public interface UserService {
void save(User user);
List<User> findAll();
User findById(Long id);
User findByUsername(String username);
User findByUseremail(String email);
void update(User user);
void delete(Long id);
}
package com.nhnacademy.springboard.spirngmvcboard.thymeleaf;</p>
<p>import java.util.Collections;
import java.util.Set;
import org.thymeleaf.context.IExpressionContext;
import org.thymeleaf.dialect.AbstractDialect;
import org.thymeleaf.dialect.IExpressionObjectDialect;
import org.thymeleaf.expression.IExpressionObjectFactory;
import org.thymeleaf.spring5.expression.SpringStandardExpressionObjectFactory;</p>
<p>//todo#15 CustomTagDialet 생성 , 커스텀 함수를 사용하기위해서 IDialect 확장한 IExpressionObjectDialect 구현.
public class CustomTagDialet extends AbstractDialect implements IExpressionObjectDialect {</p>
<pre><code>public CustomTagDialet() {
    super(&quot;nhnacademy&quot;);
}

@Override
public IExpressionObjectFactory getExpressionObjectFactory() {
    return new SpringStandardExpressionObjectFactory(){
        @Override
        public Set&lt;String&gt; getAllExpressionObjectNames() {
            return Collections.singleton(&quot;nhnacademy&quot;);
        }

        @Override
        public Object buildObject(IExpressionContext context, String expressionObjectName) {
             super.buildObject(context, expressionObjectName);
             //todo#15 미리 만들어 뒀떤 TagUtils 객체;
             return new TagUtils();
        }

        @Override
        public boolean isCacheable(String expressionObjectName) {
            return true;
        }
    };
}
</code></pre>
<p>}
package com.nhnacademy.springboard.spirngmvcboard.thymeleaf;</p>
<p>import com.nhnacademy.springboard.spirngmvcboard.domain.Gender;</p>
<p>//todo#14 thymeleaf에서 사용할 custom 함수, M or F 받아서 남성 or 여성을 리턴하는 함수
public class TagUtils {
public String gender(Gender gender){
if(gender.name().equals(&quot;M&quot;)){
return &quot;남성&quot;;
} else if (gender.name().equals(&quot;F&quot;)) {
return &quot;여성&quot;;
}else {
return &quot;&quot;;
}
}
}
package com.nhnacademy.springboard.spirngmvcboard.utility;</p>
<p>import java.security.CryptoPrimitive;
import java.util.UUID;</p>
<p>public class DomainUtil {
public static String createUUID(){
String uuid= UUID.randomUUID().toString();
return uuid;
}
}
package com.nhnacademy.springboard.spirngmvcboard;
public interface Base {</p>
<p>}</p>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.nhnacademy.springboard.spirngmvcboard.mapper.BoardMapper">
    <insert id="save" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.Board">
      INSERT INTO board(name, description)
      VALUES (#{name}, #{description})
    </insert>
</mapper><pre><code>&lt;update id=&quot;update&quot; parameterType=&quot;com.nhnacademy.springboard.spirngmvcboard.domain.Board&quot;&gt;
  UPDATE board
  SET name = #{name}, description = #{description}
  WHERE id = #{id}
&lt;/update&gt;

&lt;delete id=&quot;delete&quot; parameterType=&quot;long&quot;&gt;
  DELETE FROM board WHERE id = #{id}
&lt;/delete&gt;

&lt;select id=&quot;findById&quot; parameterType=&quot;long&quot;
  resultType=&quot;com.nhnacademy.springboard.spirngmvcboard.domain.Board&quot;&gt;
  SELECT * FROM board WHERE id = #{id}
&lt;/select&gt;

&lt;select id=&quot;findAll&quot;
  resultType=&quot;com.nhnacademy.springboard.spirngmvcboard.domain.Board&quot;&gt;
  SELECT * FROM board
&lt;/select&gt;
</code></pre>
<p><select id="findByName"
          resultType="com.nhnacademy.springboard.spirngmvcboard.domain.Board">
SELECT * FROM board WHERE name = #{name}</p>
  

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nhnacademy.springboard.spirngmvcboard.mapper.PostMapper">
</mapper>  <insert id="save" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.Post">
    INSERT INTO post (title, content, created_at, updated_at, author_id, board_id)
    VALUES (#{title}, #{content}, NOW(), NOW(), #{author.id}, #{board.id})
  </insert>
  <select id="findById" parametertype="Long" resultmap="postWithAuthorAndBoard">
    SELECT * FROM post WHERE id=#{id}
  </select>
  <update id="update" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.Post">
    UPDATE post SET title=#{title}, content=#{content}, updated_at=NOW(), author_id=#{author.id}, board_id=#{board.id} WHERE id=#{id}
  </update>
  <delete id="delete" parametertype="Long">
    DELETE FROM post WHERE id=#{id}
  </delete>
  <select id="findAll" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.Post">
    SELECT * FROM post
  </select>
  <select id="findByBoard" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.Board" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.Post">
    SELECT * FROM post WHERE board_id=#{id}
  </select>
  <select id="findByBoardId" parametertype="Long" resultmap="postWithAuthorAndBoard">
    SELECT post.*, user.*, board.*
    FROM post
           LEFT JOIN user ON post.author_id=user.id
           LEFT JOIN board ON post.board_id=board.id
    WHERE post.board_id=#{boardId}
  </select>
  <resultmap id="postWithAuthorAndBoard" type="com.nhnacademy.springboard.spirngmvcboard.domain.Post">
    <id property="id" column="id">
    <result property="title" column="title">
    <result property="content" column="content">
    <result property="createdAt" column="created_at">
    <result property="updatedAt" column="updated_at">
    <association property="author" javatype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
      <id property="id" column="author_id">
      <result property="username" column="username">
      <result property="password" column="password">
      <result property="email" column="email">
      <result property="createdAt" column="created_at">
    </result></result></result></result></id></association>
    <association property="board" javatype="com.nhnacademy.springboard.spirngmvcboard.domain.Board">
      <id property="id" column="board_id">
      <result property="name" column="name">
      <result property="description" column="description">
    </result></result></id></association>
  </result></result></result></result></id></resultmap>

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nhnacademy.springboard.spirngmvcboard.mapper.UserMapper">
  <insert id="save" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
    INSERT INTO User
    SET username = #{username},
      password = #{password},
      email = #{email},
      birth_date = #{birthDate},
      created_at = NOW()
  </insert>
</mapper>  <update id="update" parametertype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
    UPDATE User
    SET username = #{username}, password = #{password}, email = #{email}, birth_date = #{birthDate}
    WHERE id = #{id}
  </update>
  <delete id="delete" parametertype="long">
    DELETE FROM User WHERE id = #{id}
  </delete>
  <select id="findAll" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
    SELECT * FROM User
  </select>
  <select id="findById" parametertype="long" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
    SELECT * FROM User WHERE id = #{id}
  </select>
  <select id="findByUsername" parametertype="string" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
    SELECT *FROM User WHERE username = #{username}
  </select>
  <select id="findByUseremail" resulttype="com.nhnacademy.springboard.spirngmvcboard.domain.User">
SELECT* FROM User WHERE email=#{email}
  </select>

/*&#xACF5;&#xD1B5; &#xC2A4;&#xD0C0;&#xC77C;*/
body {
  font-family: Arial, sans-serif;
  background-color: #f8f9fa;
  margin: 0;
}
<p>.container {
background-color: #ffffff;
padding: 30px;
border-radius: 5px;
box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
max-width: 800px;
margin: 50px auto;
}</p>
<p>.link, .auth-links a, .user-info a, .user-table a {
text-decoration: none;
color: #3498db;
font-size: 14px;
}</p>
<p>.link:hover, .auth-links a:hover, .user-info a:hover, .user-table a:hover {
text-decoration: underline;
}</p>
<p>.auth-links {
display: flex;
justify-content: center;
gap: 20px;
}</p>
<p>/<em>로그인 정보 스타일</em>/
.login-info {
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
margin-bottom: 20px;
}</p>
<p>.login-info ul {
list-style: none;
padding: 0;
margin: 0;
display: flex;
gap: 10px;
}</p>
<p>.login-info li {
display: inline;
}</p>
<p>/<em>메인 페이지 스타일</em>/
.main-title {
text-align: center;
margin-bottom: 30px;
}</p>
<p>.welcome-message {
font-weight: bold;
margin-bottom: 10px;
}</p>
<p>.user-id {
font-weight: bold;
}</p>
<p>.link.user-list, .link.logout {
display: inline-block;
margin-right: 10px;
}</p>
<p>/<em>유저 리스트 페이지 스타일</em>/
.user-row:hover {
background-color: #f8f9fa;
}</p>
<p>.link.update, .link.delete {
font-weight: bold;
}</p>
<p>.table {
margin-bottom: 30px;
}
.user-info {
text-align: center;
}</p>
<p>.user-info a {
margin-left: 15px;
}</p>
<p>/<em>로그인 및 회원가입 페이지 스타일</em>/
.form {
width: 300px;
margin: 50px auto;
}</p>
<p>.form input {
display: block;
width: 100%;
padding: 10px;
margin-bottom: 10px;
border-radius: 5px;
border: 1px solid #ccc;
}</p>
<p>.form label {
font-size: 14px;
font-weight: bold;
margin-bottom: 5px;
display: block;
}</p>
<p>.form button {
width: 100%;
display: block;
margin-top: 10px;
}</p>
<p>/<em>유저 리스트 페이지 스타일</em>/
.user-list-title {
text-align: center;
margin-bottom: 30px;
}</p>
<p>.user-table {
width: 100%;
margin-bottom: 30px;
border-collapse: collapse;
}</p>
<p>.user-table th, .user-table td {
padding: 10px;
text-align: left;
border: 1px solid #ccc;
}</p>
<p>.user-table th {
background-color: #3498db;
color: #fff;
}</p>
<p>/<em>추가 및 수정된 스타일 코드</em>/</p>
<h1 id="wrapper">wrapper {</h1>
<p>display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
min-height: 100vh;
}</p>
<p>.home-link {
position: absolute;
top: 20px;
left: 20px;
font-size: 16px;
font-weight: bold;
background-color: #3498db;
color: #fff;
padding: 10px 20px;
border-radius: 5px;
text-decoration: none;
}</p>
<p>.link.home:hover {
background-color: #2980b9;
}</p>
<p>.form {
background-color: #fff;
padding: 30px;
border-radius: 5px;
box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
}</p>
<p>.form .input-group {
margin-bottom: 15px;
}</p>
<p>.form .input-group label {
display: block;
font-size: 14px;
font-weight: bold;
margin-bottom: 5px;
}</p>
<p>.form .input-group input {
display: block;
width: 100%;
padding: 10px;
border-radius: 5px;
border: 1px solid #ccc;
}</p>
<p>.form button {
background-color: #3498db;
color: #fff;
padding: 10px;
border-radius: 5px;
font-size: 16px;
font-weight: bold;
border: none;
cursor: pointer;
transition: background-color 0.3s;
}</p>
<p>.form button:hover {
background-color: #2980b9;
}</p>
<p>.form button:active {
transform: translateY(2px);
}
/<em>게시판 목록 스타일</em>/
.board-list {
display: flex;
flex-direction: column;
gap: 10px;
}</p>
<p>.board-list a {
font-size: 16px;
font-weight: bold;
color: #3498db;
}</p>
<p>.board-list a:hover {
text-decoration: underline;
}</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>게시물 상세보기<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>게시물 상세보기<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>게시물 ID<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.id}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>게시판 ID<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.board.name}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>제목<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.title}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>작성자<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.author.username}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>내용<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.content}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>작성일시<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${post.createdAt}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"link"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/board/{boardId}(boardId=${board.id})}"</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"돌아가기"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

<span class="hljs-comment">&lt;!-- 현재 로그인한 유저가 작성한 글인 경우에만 수정/삭제 버튼을 보여줌 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:if</span>=<span class="hljs-string">"${session.user != null and session.user.id == post.author.id}"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/board/{boardId}/post/{postId}/edit(boardId=${board.id}, postId=${post.id})}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>수정<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/board/{boardId}/deletePost(postId=${post.id}, boardId=${board.id})}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>삭제<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</div></code></pre>
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" th:href="@{/resources/style.css}" type="text/css">
  <title>&#xAC8C;&#xC2DC;&#xBB3C; &#xBAA9;&#xB85D;</title>
</head>
<body>
<div id="wrapper">
  <a href="/" class="home-link">&#xD648;&#xC73C;&#xB85C;</a>
  <div class="container">
    <h1 class="main-title">&#xAC8C;&#xC2DC;&#xBB3C; &#xBAA9;&#xB85D;</h1>
</div></div></body></html><pre><code>&lt;!-- 로그인 유저 정보 --&gt;
&lt;div th:replace=&quot;loginInfo :: userinfo&quot;&gt;&lt;/div&gt;

&lt;table class=&quot;post-table&quot;&gt;
  &lt;thead&gt;
  &lt;tr&gt;
    &lt;th&gt;글번호&lt;/th&gt;
    &lt;th&gt;제목&lt;/th&gt;
    &lt;th&gt;작성자&lt;/th&gt;
    &lt;th&gt;작성일&lt;/th&gt;
  &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
  &lt;tr th:each=&quot;post : ${posts}&quot;&gt;
    &lt;td th:text=&quot;${post.id}&quot;&gt;&lt;/td&gt;
    &lt;td&gt;
      &lt;a class=&quot;post-link&quot; th:if=&quot;${post.board != null}&quot; th:href=&quot;@{/board/{boardId}/post/{postId}(boardId=${post.board.id},postId=${post.id})}&quot; th:text=&quot;${post.title}&quot;&gt;&lt;/a&gt;
    &lt;/td&gt;
    &lt;td th:text=&quot;${post.author.username}&quot;&gt;&lt;/td&gt;
    &lt;td th:text=&quot;${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</code></pre>
  
  <div th:if="${session.user != null}">
    <a th:href="@{/board/{boardId}/write(boardId=${board.id})}" class="btn write-btn">&#xAE00;&#xC4F0;&#xAE30;</a>
  </div>



<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>&#xAE00;&#xC4F0;&#xAE30; &#xD3FC;</title>
  <link rel="stylesheet" th:href="@{/resources/style.css}" type="text/css">
</head>
<body>
<div id="wrapper">
  <a href="/" class="home-link">&#xD648;&#xC73C;&#xB85C;</a>
  <div th:with="boardId=${board.id}">
</div></div></body></html><pre><code>&lt;form th:method=&quot;POST&quot; th:action=&quot;@{/board/{boardId}/write(boardId=${boardId})}&quot; th:object=&quot;${post}&quot; class=&quot;post-form&quot;&gt;
  &lt;div class=&quot;input-group&quot;&gt;
    &lt;label for=&quot;input-title&quot; class=&quot;input-label&quot;&gt;제목 :&lt;/label&gt;
    &lt;input name=&quot;title&quot; type=&quot;text&quot; placeholder=&quot;제목을 입력하세요.&quot; required id=&quot;input-title&quot;&gt;
  &lt;/div&gt;
  &lt;div class=&quot;input-group&quot;&gt;
    &lt;label for=&quot;input-content&quot; class=&quot;input-label&quot;&gt;내용 :&lt;/label&gt;
    &lt;textarea name=&quot;content&quot; rows=&quot;10&quot; placeholder=&quot;내용을 입력하세요.&quot; required id=&quot;input-content&quot;&gt;&lt;/textarea&gt;
  &lt;/div&gt;
  &lt;input name=&quot;authorId&quot; type=&quot;hidden&quot; th:value=&quot;${session.user.id}&quot;&gt;
  &lt;input name=&quot;board.id&quot; type=&quot;hidden&quot; th:value=&quot;${board.id}&quot;&gt;
  &lt;button type=&quot;submit&quot; id=&quot;submit-btn&quot;&gt;글쓰기&lt;/button&gt;
&lt;/form&gt;
</code></pre>
  
  <!-- 에러 메시지 출력 부분 -->
  <div th:if="${errorMessage}" class="alert alert-danger mt-3" role="alert">
    <span th:text="${errorMessage}">Error message goes here</span>
  </div>




</body>
</html>
