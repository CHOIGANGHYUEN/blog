<html><head></head><body><main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2023.02.07 17:21</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">1.Introducing</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%EC%B0%A8">목차</h2>
<ol>
<li>Introducing</li>
<li>Simple Rest Application Development using Spring Boot</li>
<li>Initialize and Run Spring Boot Project</li>
<li>Simple Web Application Development using Spring Boot</li>
<li>Dependency Management and Main Function</li>
<li>Auto Configuration And Externalized Configuration</li>
<li>Developer Tools</li>
<li>Spring Boot Actuator</li>
<li>Test</li>
<li>Custom Spring Boot Starter</li>
</ol>
<h2 id="%EA%B5%90%EC%9C%A1%EC%9D%98-%EB%AA%A9%EC%A0%81">교육의 목적</h2>
<h3 id="%EC%9D%B4-%EA%B5%90%EC%9C%A1%EC%9D%84-%EC%88%98%EB%A3%8C%ED%95%98%EB%A9%B4">이 교육을 수료하면</h3>
<p>・ Spring Boot의 구조를 알게 된다.<br>
・ Spring Boot로 애플리케이션 개발이 가능해 진다.<br>
・ Spring Boot의 배포 모듈인 Starter를 개발할 수 있게 된다.<br>
・ Spring Boot의 Product-Ready 기능을 활용할 수 있게 된다.</p>
<h2 id="%EA%B5%90%EC%9C%A1%EC%9D%98-%EB%8C%80%EC%83%81">교육의 대상</h2>
<h3 id="%EA%B5%90%EC%9C%A1%EC%9D%98-%EB%8C%80%EC%83%81">교육의 대상</h3>
<p>・ Spring Framework 의 DI, IoC를 알고 있는 개발자.<br>
・ Spring Boot로 개발하고 있지만<br>
・ 조금 더 잘 사용하고 싶은 개발자.<br>
・ 동작 원리를 알고 싶은 개발자.</p>
<h3 id="%EA%B5%90%EC%9C%A1-%EB%82%9C%EC%9D%B4%EB%8F%84">교육 난이도</h3>
<p>・ 초급 ~ 중급</p>
<h2 id="Spring-Boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%9C%EC%9E%91-(2012.10.17)">Spring Boot 프로젝트 시작 (2012.10.17)</h2>
<p>・ <a href="https://jira.spring.io/browse/SPR-9888" target="_blank">https://jira.spring.io/browse/SPR-9888</a></p>
<h3 id="%EC%9A%94%EC%B2%AD-%EC%9A%94%EC%95%BD">요청 요약</h3>
<p>・ 서블릿이 필요없는 통합 컴포넌트 모델<br>
・ 개발자가 애플리케이션 설정을 위해 하나의 설정 모델만 학습하면 되는 환경<br>
・ public static void main 으로 실행/종료 단순화<br>
・ 단순한 자바 클래스로딩 구조<br>
・ 단순한 개발툴</p>
<h3 id="%ED%9A%8C%EC%8B%A0-(by-Phil-Webb-2013.08)">회신 (by Phil Webb 2013.08)</h3>
<p>・ 스프링 프레임워크를 부분적으로 수정하는 대신, Spring Boot 라는 프로젝트를 시작<br>
・ 이 요청은 Spring Boot 의 기원이라고 할 수 있다.</p>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287032764634824735/attach-files/3425784181307651604" alt="image.png"></p>
<h2 id="Spring-Boot-Release">Spring Boot Release</h2>
<h3 id="Spring-Boot-Release-Note">Spring Boot Release Note</h3>
<p>・ <a href="https://github.com/spring-projects/spring-boot/wiki" target="_blank">https://github.com/spring-projects/spring-boot/wiki</a></p>
<h3 id="Spring-Boot-0.5.0.M1-%EB%B0%9C%ED%91%9C">Spring Boot 0.5.0.M1 발표</h3>
<p>・ <a href="https://spring.io/blog/2013/08/06/spring-boot-simplifying-spring-for-everyone" target="_blank">https://spring.io/blog/2013/08/06/spring-boot-simplifying-spring-for-everyone</a></p>
<h3 id="Spring-Boot-1.5.X.RELEASE-(2017.01-%E2%80%93-EOL)">Spring Boot 1.5.X.RELEASE (2017.01 – EOL)</h3>
<p>・ java 8 이상 지원<br>
・ Spring Framework 4.3<br>
・ Tomcat 8.5, Hibernate 5.0・ Configuration Properties 에 JSR303 지원</p>
<h3 id="Spring-Boot-2.0.X">Spring Boot 2.0.X</h3>
<ul>
<li>Java Base line : java 8 ( java 7 이하를 지원하지 않음 )</li>
<li>Spring Framework 5.0</li>
<li>Default Datasource : HikariCP</li>
</ul>
<h3 id="Spring-Boot-2.3.X.RELEASE(2020.05)">Spring Boot 2.3.X.RELEASE(2020.05)</h3>
<p>・ java 14 지원<br>
・ graceful shutdown 지원<br>
・ spring-boot-starter-validation 이 spring-boot-starter-web 에서 제외됨</p>
<h3 id="Spring-Boot-2.4(2020.11)">Spring Boot 2.4(2020.11)</h3>
<p>・ java 15 지원<br>
・ 새로운 버전 스킴 적용 ( 2.3.5.RELEASE  --&gt;2.4.0 )<br>
・ Docker Image Building 지원(jar)</p>
<h3 id="Spring-Boot-2.5(2021.05)">Spring Boot 2.5(2021.05)</h3>
<p>・ java 16 지원<br>
・ 환경변수 Prefix<br>
・ Docker Image Building 지원(war)</p>
<h3 id="Spring-Boot-2.6(2021.11)">Spring Boot 2.6(2021.11)</h3>
<p>・ java 16의 record 를 @ConfigurationProperties 로 사용가능<br>
・ 순환참조 빈은 금지가 기본 (spring.main.allow-circular-references)</p>
<h3 id="Spring-Boot-2.7(2022.05)">Spring Boot 2.7(2022.05)</h3>
<p>・ auto configuration 파일 위치 변경<br>
・ spring.factories --&gt;  META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</p>
<h3 id="Spring-Boot-3.0.0-GA(2022.11)">Spring Boot 3.0.0-GA(2022.11)</h3>
<p>・ java 17 지원 ( java 17 이상부터 사용가능)<br>
・ Spring Framework 6</p>
<blockquote>
<p>스프링 부트의 Major 버전이 변경될때, Spring Framework, Java 버전이 변경됩니다.</p>
</blockquote>
<h2 id="Spring-Boot-%EB%AA%A9%ED%91%9C-1">Spring Boot 목표-1</h2>
<h3 id="%EB%A1%9C-%EC%8B%A4%ED%96%89%EC%9D%B4-%EA%B0%80%EB%8A%A5"><code data-backticks="1">Java –jar</code> 로 실행이 가능</h3>
<p>・ $ java -help 사용법:<br>
java [-options] class [args...] (클래스 실행)<br>
java [-options] -jar jarfile [args...]</p>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287032764634824735/attach-files/3425787030670868769" alt="image.png"></p>
<h2 id="Spring-Boot-%EB%AA%A9%ED%91%9C-2">Spring Boot 목표-2</h2>
<ul>
<li>빠르고 광범위한 getting-started 경험</li>
<li>별도의 설정 없이 바로 사용 (out-of-box)</li>
<li>비기능 요구사항 기본제공</li>
<li>코드 생성이나 XML 설정이 필요 없음</li>
</ul>
<h2 id="Spring-Boot%EC%9D%98-%EA%B8%B0%EB%8A%A5">Spring Boot의 기능</h2>
<h3 id="%EB%8B%A8%EB%8F%85%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%83%9D%EC%84%B1">단독으로 실행가능한 애플리케이션 생성</h3>
<ul>
<li>실행형 jar, 실행형 war</li>
</ul>
<h3 id="%EB%82%B4%EC%9E%A5%ED%98%95-%EC%9B%B9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%84%9C%EB%B2%84-%EC%A7%80%EC%9B%90">내장형 웹 애플리케이션 서버 지원</h3>
<ul>
<li>Tomcat, Jetty, Undertow, Netty for WebFlux</li>
</ul>
<h3 id="%EA%B8%B0%EB%B3%B8-%EC%84%A4%EC%A0%95%EB%90%9C-Starter-%EB%AA%A8%EB%93%88">기본 설정된 Starter 모듈</h3>
<p>・ 의존성 (library dependency)<br>
・ 버전 호환성 보장 (dependencyManagement)<br>
・ 자동 설정(Auto Configuration)</p>
<h3 id="%EC%83%81%EC%9A%A9%ED%99%94%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%ED%86%B5%EA%B3%84%2C-%EC%83%81%ED%83%9C%EC%A0%90%EA%B2%80-%EC%99%B8%EB%B6%80%EC%84%A4%EC%A0%95-%EC%A7%80%EC%9B%90">상용화에 필요한 통계, 상태점검 외부설정 지원</h3>
<p>・ Actuator (Health, metrics)<br>
・ 외부 설정</p>
<h2 id="Spring-Framework%EA%B3%BC%EC%9D%98-%EB%B9%84%EA%B5%90(1%2F2)">Spring Framework과의 비교(1/2)</h2>
<h3 id="%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EC%9D%98%EC%A1%B4%EC%84%B1%EC%9D%84-pom.xml-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%A0%95%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4.">라이브러리 의존성을 pom.xml 직접 설정해야 한다.</h3>
<p>・ spring boot 에서는 spring-boot-starter-{module} 만 설정하면 필요한 라이브러리 설정 완료</p>
<h3 id="%EB%B2%84%EC%A0%84-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%A0%95%ED%95%98%EA%B3%A0-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4.">버전 정보를 직접 설정하고 테스트 해야 한다.</h3>
<p>・ spring-boot-starter-parent 에서 spring 모듈의 버전 및 3rd Party 라이브러리 버전도 제공<br>
・ 런타임에만 확인 가능한 성가신 작업!</p>
<h3 id="Web-Application-Server-%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4.">Web Application Server 에 배포해야 한다.</h3>
<p>・ spring boot 에서는 내장형 Web Application Server를 제공하기 때문에 서버를 구매하거나 설정할 필요가 없다.</p>
<p>
</p><p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287032764634824735/attach-files/3425789209098044287" alt="image.png"></p><p></p>
<h2 id="Quiz">Quiz</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426490240083260219" target="">[quiz] Introducing</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 12:57</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">2.Simple Rest Application Development using Spring Boot</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><p>02.SimpleRestApplicationDevelopmentUsingSpringBoot.20211228.pptx</p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%EB%AA%A9%ED%91%9C">목표</h3>
<p>・ 학생 점수 조회 시스템을 개발한다.<br>
・ 테스트 코드로 결과를 확인한다.</p>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287035519139857870/attach-files/3425790246003165587" alt="image.png"></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1">프로젝트 생성</h3>
<ul>
<li><a href="https://start.spring.io/" target="_blank">https://start.spring.io</a></li>
</ul>
<h3 id="Project-Metadata">Project Metadata</h3>
<ul>
<li>groupId: com.nhnacademy.edu.springboot</li>
<li>artifactId: student</li>
<li>version: 1.0.0</li>
<li>Java : 11</li>
</ul>
<h3 id="Dependencies">Dependencies</h3>
<ul>
<li>lombok</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287035519139857870/attach-files/3425791023079728063" alt="image.png"></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%EC%9E%90%EB%8F%99%EC%83%9D%EC%84%B1-%EC%BD%94%EB%93%9C-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0---pom.xml">자동생성 코드 살펴보기 - pom.xml</h3>
<h4 id="spring-boot-starter-parent">spring-boot-starter-parent</h4>
<p>・  spring-boot-starter-parent의 버전 정보가 전체 프로젝트의 버전정보를 관리한다.<br>
・  BOM (Bill of Materials - 자제 명세서)<br>
・  BOM 에 기술된 정보로 3rd Party 라이브러리 호환성을 보장할 수 있다.<br>
・  프로젝트의 dependency 에는 버전 정보를 기술하지 않는다.</p>
<h4 id="spring-boot-starter">spring-boot-starter</h4>
<p>・  spring boot starter 의 이름은 항상 spring-boot-starter 으로 시작한다.<br>
・  스프링의 다른 기능을 사용하고 싶으면 spring-boot-starter-{기술명} 으로 대부분 작성할 수 있다.</p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%EC%9E%90%EB%8F%99%EC%83%9D%EC%84%B1-%EC%BD%94%EB%93%9C-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0-%E2%80%93-StudentApplication.java">자동생성 코드 살펴보기 – StudentApplication.java</h3>
<h4 id="SpringApplication">SpringApplication</h4>
<p>・  spring-boot 실행의 시작점<br>
・  static method 인 run으로 실행한다.<br>
・  SpringApplication의 객체를 생성 후 실행하거나 SpringApplicationBuilder 로 실행 가능</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span> </span>{   
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">args</span>)</span>;   
    }
}
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%EC%9E%90%EB%8F%99%EC%83%9D%EC%84%B1-%EC%BD%94%EB%93%9C-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0-%E2%80%93-%40SpringBootApplication">자동생성 코드 살펴보기 – @SpringBootApplication</h3>
<h3 id="%EB%8B%A4%EC%9D%8C-Annotation-%EC%9D%84-%ED%8F%AC%ED%95%A8%ED%95%9C-Meta-Annotation">다음 Annotation 을 포함한 Meta Annotation</h3>
<ul>
<li>
<p><code data-backticks="1">@EnableAutoConfiguration</code></p>
<ul>
<li>자동설정 기능을 활성화 한다.</li>
<li>클래스 패스에 라이브러리가 존재하면 자동으로 Bean 을 설정한다.</li>
</ul>
</li>
<li>
<p><code data-backticks="1">@ComponentScan</code></p>
<ul>
<li>basePackage 하위의 컴포넌트를 스캔하여 Bean 으로 등록한다.</li>
</ul>
</li>
<li>
<p><code data-backticks="1">@SpringBootConfiguration</code></p>
<ul>
<li>설정된 클래스 파일은 설정(java config)으로 사용할 수 있다.</li>
</ul>
</li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="%ED%95%99%EC%83%9D-%EC%A0%95%EB%B3%B4-%ED%81%B4%EB%9E%98%EC%8A%A4-(%EC%9D%B4%EB%A6%84%2C-%EC%A0%90%EC%88%98)">학생 정보 클래스 (이름, 점수)</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Getter</span>
<span class="hljs-meta">@Setter</span>
<span class="hljs-meta">@EqualsAndHashCode</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">Student</span> </span>{
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> String name;
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> Integer score;
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">Student</span><span class="hljs-params">(String name, Integer score)</span> </span>{
    <span class="hljs-keyword">this</span>.name = name;
    <span class="hljs-keyword">this</span>.score = score;
    }
}
</code></pre>
<h3 id="StudentRepository.java-%EA%B0%9C%EB%B0%9C">StudentRepository.java 개발</h3>
<ul>
<li>NhnStudentService.java 가 참조하여 사용할 인터페이스</li>
<li>모든 학생정보를 반환할 findAll 메서드를 선언</li>
<li>인터페이스이므로 메소드 구현은 작성하지 않는다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">package</span> com.nhn.edu.springboot.student;
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">interface</span><span class="hljs-title">StudentRepository</span> </span>{
<span class="hljs-function">List<student><span class="hljs-title">findAll</span><span class="hljs-params">()</span></student></span>;
}
</code></pre>
<h3 id="DummyStudentRepository.java-%EA%B0%9C%EB%B0%9C">DummyStudentRepository.java 개발</h3>
<p>・ StudentRepository 인터페이스의 구현체<br>
・ 이번 실습에서는 임의의 Student 객체를 2개 반환</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Component</span> 
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">DummyStudentRepository</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentRepository</span> </span>{ 
<p><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Student&gt;<span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> List.of(<span class="hljs-keyword">new</span> Student(<span class="hljs-string">"zbum"</span>,<span class="hljs-number">100</span>),<span class="hljs-keyword">new</span> Student(<span class="hljs-string">"manty"</span>,<span class="hljs-number">80</span>));
}
}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h3 id="StudentService.java-%EA%B0%9C%EB%B0%9C">StudentService.java 개발</h3>
<p>・ Student 정보를 관리용 Service 인터페이스<br>
・ 모든 학생정보를 조회하는 getStudents 메서드 선언</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">interface</span><span class="hljs-title">StudentService</span> </span>{
   <span class="hljs-function">List<student><span class="hljs-title">getStudents</span><span class="hljs-params">()</span></student></span>;
}
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="Dependency-Injection-%EB%B0%A9%EC%8B%9D-3%EA%B0%80%EC%A7%80">Dependency Injection 방식 3가지</h3>
<p>Spring Boot 에서 생성자 주입은 3가지 방식 제공</p>
<ul>
<li>
<p>생성자 주입</p>
<ul>
<li>생성자를 선언하면 인자에 객체 주입</li>
<li>권장하는 방식</li>
</ul>
</li>
<li>
<p>@Autowired</p>
<ul>
<li>클래스 변수에 @Autowired 애너테이션을 설정하여 객체 주입</li>
</ul>
</li>
<li>
<p>Setter</p>
<ul>
<li>setter 메서드를 선언하여 객체 주입</li>
</ul>
</li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="NhnStudentService.java-%EA%B0%9C%EB%B0%9C">NhnStudentService.java 개발</h3>
<ul>
<li>StudentRepository 인터페이스의 findAll 메서드를 사용</li>
<li>Dependency Injection 으로 StudentRepository 에는 DummyStudentRepository 객체 할당</li>
</ul>
<h3 id="%EC%83%9D%EC%84%B1%EC%9E%90-%EC%A3%BC%EC%9E%85">생성자 주입</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> StudentRepository studentRepository;
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">NhnStudentService</span><span class="hljs-params">(StudentRepository studentRepository)</span> </span>{
    <span class="hljs-keyword">this</span>.studentRepository = studentRepository;
    }
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List<student><span class="hljs-title">getStudents</span><span class="hljs-params">()</span> </student></span>{
    <span class="hljs-keyword">return</span> studentRepository.findAll();
    }
}
</code></pre>
<h3 id="Autowired">Autowired</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> StudentRepository studentRepository;
</code><p><code data-language="java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Student&gt;<span class="hljs-title">getStudents</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> studentRepository.findAll();
}
}
</code></p></pre><p></p>
<h3 id="setter-%EB%A9%94%EC%86%8C%EB%93%9C">setter 메소드</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> StudentRepository studentRepository;
<p><span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">void</span><span class="hljs-title">setStudentRepository</span><span class="hljs-params">(StudentRepository studentRepository)</span> </span>{
<span class="hljs-keyword">this</span>.studentRepository = studentRepository;<br>
}</p>
</code><p><code data-language="java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Student&gt;<span class="hljs-title">getStudents</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> studentRepository.findAll();
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%EA%B0%84%EB%8B%A8%ED%95%9C-Dependency-Injection-%EC%8B%A4%EC%8A%B5">[시연] 간단한 Dependency Injection 실습</h2>
<h3 id="NhnStudentServiceTest.java-%EA%B0%9C%EB%B0%9C">NhnStudentServiceTest.java 개발</h3>
<ul>
<li>NhnStudentRepositoryTest 빈의 통합 테스트</li>
<li>@SpringBootTest 를 선언하여 모든 설정을 로딩한다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-comment">//@RunWith(SpringRunner.class) junit4 에서 필수..</span>
<span class="hljs-meta">@SpringBootTest</span> 
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentServiceTest</span> </span>{ 
<span class="hljs-meta">@Autowired</span> 
  StudentService studentService; 
</code><p><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudents</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// when </span>
List&lt;Student&gt; actual = studentService.getStudents();
<span class="hljs-comment">// then </span>
Assertions.assertThat(actual).hasSize(<span class="hljs-number">2</span>);
}
}
</code></p></pre><p></p>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3287085682352560247" target="">Spring Boot로 Dependency Injection 실습</a></li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-JPA-%EC%8B%A4%EC%8A%B5">[시연] JPA 실습</h2>
<h3 id="%EB%AA%A9%ED%91%9C">목표</h3>
<ul>
<li>[시연]을 수정하여 DBMS 에 데이터를 저장한다.</li>
<li>데이터에 접근하는 코드를 JPA 로 작성한다.</li>
<li>테스트 코드로 결과를 확인한다.</li>
</ul>
<h3 id="UML">UML</h3>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287035519139857870/attach-files/3425802995086239715" alt="image.png"></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-JPA-%EC%8B%A4%EC%8A%B5">[시연] JPA 실습</h2>
<h3 id="Maven-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80">Maven 라이브러리 의존성 추가</h3>
<p>・ pom.xml의  에 다음 라이브러리 의존성 추가<br>
・ in memory 데이터베이스인 h2 database 를 사용</p>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code><p><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.h2database<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>h2<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-JPA-%EC%8B%A4%EC%8A%B5">[시연] JPA 실습</h2>
<h3 id="Student.java-%EC%88%98%EC%A0%95">Student.java 수정</h3>
<p>・ @Entity 추가<br>
・ @Id 추가<br>
・ 기본 생성자 추가</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Getter</span><span class="hljs-meta">@Setter</span><span class="hljs-meta">@EqualsAndHashCode</span>
<span class="hljs-meta">@Entity</span><span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">Student</span> </span>{
<span class="hljs-meta">@Id</span>
<span class="hljs-keyword">private</span> Long id;   <span class="hljs-keyword">private</span> String name;   <span class="hljs-keyword">private</span> Integer score;
<p><span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">Student</span><span class="hljs-params">()</span> </span>{
}   <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">Student</span><span class="hljs-params">(Long id, String name, Integer score)</span> </span>{
<span class="hljs-keyword">this</span>.id = id;       <span class="hljs-keyword">this</span>.name = name;       <span class="hljs-keyword">this</span>.score = score;    }}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h3 id="StudentRepository.java-%EC%88%98%EC%A0%95">StudentRepository.java 수정</h3>
<p>・ StudentRepository.java 는 JpaRepository 를 상속하도록 변경한다.<br>
・ DummyStudentRepository.java를 삭제한다.<br>
・ findAll() 메서드를 삭제한다. (JpaRepository 에 findById, findAll, save 등의 데이터 처리메서드가 이미 존재한다.)</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">package</span> com.nhn.edu.springboot.student;
<p><span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">interface</span><span class="hljs-title">StudentRepository</span><span class="hljs-keyword">extends</span><span class="hljs-title">JpaRepository</span>&lt;<span class="hljs-title">Student</span>,<span class="hljs-title">Long</span>&gt; </span>{
}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h3 id="StudentRepositoryTest.java-%EC%88%98%EC%A0%95">StudentRepositoryTest.java 수정</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>    
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testStudentRepository</span><span class="hljs-params">()</span> </span>{        
<span class="hljs-comment">//given         </span>
    Student zbum =<span class="hljs-keyword">new</span> Student(<span class="hljs-number">1L</span>,<span class="hljs-string">"zbum"</span>,<span class="hljs-number">100</span>);        
    studentRepository.save(zbum);        
<span class="hljs-comment">//when        </span>
    Optional<student> actual = studentRepository.findById(<span class="hljs-number">1L</span>);        
<span class="hljs-comment">//then        </span>
    Assertions.assertThat(actual).isPresent();        
    Assertions.assertThat(actual.get()).isEqualTo(zbum);    
}
</student></code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-JPA-%EC%A0%81%EC%9A%A9">[실습] JPA 적용</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3287090336197059091" target="">Spring Boot로 JPA 적용 실습</a></li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-MySql-%EC%82%AC%EC%9A%A9">[시연] MySql 사용</h2>
<h3 id="%EB%AA%A9%ED%91%9C">목표</h3>
<p>・ MySql 에 데이터를 저장하도록 수정한다.<br>
・ mysql 은 docker 로 실행한다.</p>
<h3 id="UML">UML</h3>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287035519139857870/attach-files/3425806759274195545" alt="image.png"></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-MySql-%EC%82%AC%EC%9A%A9">[시연] MySql 사용</h2>
<h3 id="MySql-%EC%A4%80%EB%B9%84">MySql 준비</h3>
<ul>
<li>다음 명령어로 MySql을 실행합니다.</li>
</ul>
<pre><code>$ docker run --name edu-mysql -e MYSQL_ROOT_PASSWORD=test -d -p3306:3306 mysql:5.7.35
</code></pre>
<ul>
<li>접속 테스트</li>
</ul>
<pre><code>$ mysql -u root -p -P3306 -h 127.0.0.1
</code></pre>
<ul>
<li>데이터베이스 생성</li>
</ul>
<pre><code>mysql&gt; create database student_test;
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-MySql-%EC%82%AC%EC%9A%A9">[시연] MySql 사용</h2>
<h3 id="dependency-%EC%B6%94%EA%B0%80">dependency 추가</h3>
<ul>
<li>h2 삭제</li>
<li>mysql-connector-java 추가</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.31<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code></pre>
<h3 id="application.properties-%EC%88%98%EC%A0%95">application.properties 수정</h3>
<p>・ JPA 테이블 생성 및 SQL 로깅.</p>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">spring.jpa.generate-ddl</span>=<span class="hljs-string">true </span>
<span class="hljs-meta">spring.jpa.show-sql</span>=<span class="hljs-string">true</span>
</code></pre>
<p>・ datasource</p>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
<span class="hljs-meta">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/student_test?serverTimezone=UTC&amp;characterEncoding=UTF-8 </span>
<p><span class="hljs-meta">spring.jpa.hibernate.naming.physical-strategy</span>=<span class="hljs-string">org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</span></p>
</code><p><code data-language="properties"><span class="hljs-meta">spring.datasource.username</span>=<span class="hljs-string">root </span>
<span class="hljs-meta">spring.datasource.password</span>=<span class="hljs-string">test</span>
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-MySql-%EC%82%AC%EC%9A%A9">[실습] MySql 사용</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3425814905964790902" target="">Spring Boot로 MySql 적용 실습</a></li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="%EB%AA%A9%ED%91%9C">목표</h3>
<p>・ 학생정보 조회/등록 RestApi를 개발한다.</p>
<h3 id="%EA%B0%9C%EB%B0%9C-API">개발 API</h3>
<ul>
<li>GET /students</li>
<li>GET /students/{id}</li>
<li>POST /students</li>
<li>DELETE /students/{id}</li>
</ul>
<h3 id="UML">UML</h3>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3287035519139857870/attach-files/3425820184004630628" alt="image.png"></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="API-%EC%84%A4%EA%B3%84">API 설계</h3>
<h3 id="GET-%2Fstudents">GET /students</h3>
<pre><code> * Response
</code></pre><pre class="lang-javascript"><code data-language="javascript"> [
  {
<span class="hljs-string">"id"</span>&nbsp;:&nbsp;<span class="hljs-number">1</span>,
<span class="hljs-string">"name"</span>&nbsp;:&nbsp;<span class="hljs-string">"zbum"</span>,
<span class="hljs-string">"score"</span>&nbsp;:&nbsp;<span class="hljs-number">100</span>
  },
  {
<span class="hljs-string">"id"</span>&nbsp;:&nbsp;<span class="hljs-number">2</span>,
<span class="hljs-string">"name"</span>&nbsp;:&nbsp;<span class="hljs-string">"manty"</span>,
<span class="hljs-string">"score"</span>&nbsp;:&nbsp;<span class="hljs-number">80</span>
  }
]
</code></pre>
<h3 id="GET-%2Fstudents%2F%7Bid%7D">GET /students/{id}</h3>
<pre><code> * Response
</code></pre><pre class="lang-javascript"><code data-language="javascript">  {
<span class="hljs-string">"id"</span>&nbsp;:&nbsp;<span class="hljs-number">1</span>,
<span class="hljs-string">"name"</span>&nbsp;:&nbsp;<span class="hljs-string">"zbum"</span>,
<span class="hljs-string">"score"</span>&nbsp;:&nbsp;<span class="hljs-number">100</span>
  }
</code></pre>
<h3 id="POST-%2Fstudents">POST /students</h3>
<ul>
<li>Request</li>
</ul>
<pre class="lang-javascript"><code data-language="javascript">{
<span class="hljs-string">"id"</span>&nbsp;:&nbsp;<span class="hljs-number">1</span>,
<span class="hljs-string">"name"</span>&nbsp;:&nbsp;<span class="hljs-string">"zbum"</span>,
<span class="hljs-string">"score"</span>&nbsp;:&nbsp;<span class="hljs-number">100</span>
}
</code></pre>
<ul>
<li>Response
<ul>
<li>status code : 201</li>
</ul>
</li>
</ul>
<pre class="lang-javascript"><code data-language="javascript">{
<span class="hljs-string">"id"</span>&nbsp;:&nbsp;<span class="hljs-number">1</span>,
<span class="hljs-string">"name"</span>&nbsp;:&nbsp;<span class="hljs-string">"zbum"</span>,
<span class="hljs-string">"score"</span>&nbsp;:&nbsp;<span class="hljs-number">100</span>
  }
</code><p><code data-language="javascript"></code></p></pre><p></p>
<h3 id="DELETE-%2Fstudents%2F%7Bid%7D">DELETE /students/{id}</h3>
<ul>
<li>Response</li>
</ul>
<pre class="lang-javascript"><code data-language="javascript">{
<span class="hljs-string">"result"</span>&nbsp;:&nbsp;<span class="hljs-string">"OK"</span>
}
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="%EC%9D%98%EC%A1%B4%EC%84%B1-%EB%B3%80%EA%B2%BD">의존성 변경</h3>
<ul>
<li>spring-boot-starter 를  spring-boot-starter-web 으로 변경</li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="StudentService.java-%EC%88%98%EC%A0%95">StudentService.java 수정</h3>
<ul>
<li>StudentService 에 다음과 같이 메서드를 추가한다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-function">List<student><span class="hljs-title">getStudents</span><span class="hljs-params">()</span></student></span>; 
<p><span class="hljs-function">Student<span class="hljs-title">createStudent</span><span class="hljs-params">(Student student)</span></span>;</p>
<p><span class="hljs-function">Student<span class="hljs-title">getStudent</span><span class="hljs-params">(Long id)</span></span>;</p>
<p><span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">deleteStudent</span><span class="hljs-params">(Long id)</span></span>;</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="StudentController.java-%EC%88%98%EC%A0%95">StudentController.java  수정</h3>
<ul>
<li>GET /students API – 학생정보 리스트 조회</li>
<li>StudentService 인터페이스의 getStudents() 메서드를 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentController</span> </span>{
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> StudentService studentService;
<p><span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">StudentController</span><span class="hljs-params">(StudentService studentService)</span> </span>{
<span class="hljs-keyword">this</span>.studentService = studentService;
}</p>
</code><p><code data-language="java"><span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/students"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Student&gt;<span class="hljs-title">getStudents</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> studentService.getStudents();
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="StudentController.java-%EC%88%98%EC%A0%95">StudentController.java  수정</h3>
<ul>
<li>GET /students/{id} API – 학생정보 1건 조회</li>
<li>StudentService 인터페이스의 getStudent 메서드를 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentController</span> </span>{    
    &lt;&lt; 생략 &gt;&gt;    
<span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/students/{id}"</span>) 
<span class="hljs-function"><span class="hljs-keyword">public</span> Student<span class="hljs-title">getStudent</span><span class="hljs-params">(@PathVariable Long id)</span> </span>{ 
    <span class="hljs-keyword">return</span> studentService.getStudent(id); 
    }
}
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="StudentController.java-%EC%88%98%EC%A0%95">StudentController.java  수정</h3>
<ul>
<li>POST /students API – 학생정보 등록</li>
<li>StudentService 인터페이스의 createStudent 메서드를 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentController</span> </span>{
    &lt;&lt; 생략 &gt;&gt;
  <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"/students"</span>)
<span class="hljs-meta">@ResponseStatus</span>(HttpStatus.CREATED) 
<span class="hljs-function"><span class="hljs-keyword">public</span> Student<span class="hljs-title">createStudent</span><span class="hljs-params">(@RequestBody Student student)</span> </span>{ 
    <span class="hljs-keyword">return</span> studentService.createStudent(student);
    }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="StudentController.java-%EC%88%98%EC%A0%95">StudentController.java  수정</h3>
<ul>
<li>DELETE /students/{id} API – 학생정보 삭제</li>
<li>StudentService 인터페이스의 deleteStudent 메서드를 사용</li>
</ul>
<pre class="lang-java"><code data-language="java">@RestController
public class StudentController {
    &lt;&lt;생략&gt;&gt;
    @DeleteMapping("/students/{id}")
    public String deleteStudent(@PathVariable Long id) { 
        studentService.deleteStudent(id);
        return "{"result":"OK"}”;
    }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="NhnStudentService.java-%EA%B0%9C%EB%B0%9C---getStudents">NhnStudentService.java 개발 - getStudents</h3>
<ul>
<li>@Service 비즈니스 로직 구현</li>
<li>student table 의 전체 데이터 조회</li>
<li>JpaRepository 가 제공하는 findAll() 메서드 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<pre><code>&amp;lt;&amp;lt; 생략 &amp;gt;&amp;gt;
</code></pre>
</code><p><code data-language="java"><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@Transactional</span>(readOnly=<span class="hljs-keyword">true</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Student&gt;<span class="hljs-title">getStudents</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> studentRepository.findAll();
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="NhnStudentService.java-%EA%B0%9C%EB%B0%9C---getStudent">NhnStudentService.java 개발 - getStudent</h3>
<ul>
<li>id 에 해당하는 데이터 조회</li>
<li>JpaRepository의 findById() 메서드 사용</li>
<li>존재하지 않는 ID 요청시 에러처리</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<pre><code>&amp;lt;&amp;lt; 생략 &amp;gt;&amp;gt;
</code></pre>
</code><p><code data-language="java"><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@Transactional</span>(readOnly=<span class="hljs-keyword">true</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> Student<span class="hljs-title">getStudent</span><span class="hljs-params">(Long id)</span> </span>{
   <span class="hljs-keyword">return</span> studentRepository.findById(id).orElseThrow();
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="NhnStudentService.java-%EA%B0%9C%EB%B0%9C---createStudent">NhnStudentService.java 개발 - createStudent</h3>
<ul>
<li>Student 정보를 DB 에 저장</li>
<li>JpaRepository의 save() 메서드 사용</li>
<li>이미 존재하는 ID 는 IllegalStateException 처리</li>
<li>commit/rollback 을 해야 하는 경우 @Transactional 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<pre><code>&amp;lt;&amp;lt; 생략 &amp;gt;&amp;gt;
</code></pre>
<p><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Student<span class="hljs-title">createStudent</span><span class="hljs-params">(Student student)</span> </span>{
<span class="hljs-keyword">boolean</span> present = studentRepository.findById(student.getId()).isPresent();
<span class="hljs-keyword">if</span> ( present )<span class="hljs-keyword">throw</span><span class="hljs-keyword">new</span> IllegalStateException(<span class="hljs-string">"already exist "</span> + student.getId());</p>
<pre><code>&lt;span class="hljs-keyword"&gt;return&lt;/span&gt; studentRepository.save(student);
}
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="NhnStudentService.java-%EA%B0%9C%EB%B0%9C---deleteStudent">NhnStudentService.java 개발 - deleteStudent</h3>
<p>・ Student 정보를 DB 에서 삭제<br>
・ JpaRepository의 deleteById() 메서드 사용<br>
・ commit/rollback 을 해야 하는 경우 @Transactional 사용</p>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">NhnStudentService</span><span class="hljs-keyword">implements</span><span class="hljs-title">StudentService</span> </span>{
<pre><code>&amp;lt;&amp;lt; 생략 &amp;gt;&amp;gt;
</code></pre>
</code><p><code data-language="java"><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">void</span><span class="hljs-title">deleteStudent</span><span class="hljs-params">(Long id)</span> </span>{
studentRepository.deleteById(id);
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="API-Test---curl-%EC%82%AC%EC%9A%A9">API Test - curl 사용</h3>
<ul>
<li>Student 정보 등록</li>
</ul>
<pre class="lang-shell"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> curl -XPOST -H<span class="hljs-string">"Content-Type: application/json"</span> </span>
  -d '{"id": 2, "name": "Manty", "score": 100}' \
  http://localhost:8080/students
</code></pre>
<ul>
<li>Student 정보 등록 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"id"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">2</span><span>,</span></div></span></span></span></li><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"Manty"</span><span>,</span></div></span></span></span></li><li><span>"score"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">100</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="API-Test---curl-%EC%82%AC%EC%9A%A9">API Test - curl 사용</h3>
<ul>
<li>・ Student 정보 목록 조회</li>
</ul>
<pre class="lang-shell"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> curl -XGET  http://localhost:8080/students</span>
</code></pre>
<ul>
<li>Student 목록 정보 조회 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">[</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span><span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"id"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">1</span><span>,</span></div></span></span></span></li><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"Manty"</span><span>,</span></div></span></span></span></li><li><span>"score"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">100</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">},</span></div></span></span></span></li><li><span><span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"id"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">2</span><span>,</span></div></span></span></span></li><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"Manty"</span><span>,</span></div></span></span></span></li><li><span>"score"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">100</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">]</span></div></code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="API-Test---curl-%EC%82%AC%EC%9A%A9">API Test - curl 사용</h3>
<ul>
<li>Student 정보 단건 조회</li>
</ul>
<pre class="lang-shell"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> curl -XGET  http://localhost:8080/students/1</span>
</code></pre>
<ul>
<li>Student  정보 조회 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"id"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">1</span><span>,</span></div></span></span></span></li><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"Manty"</span><span>,</span></div></span></span></span></li><li><span>"score"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-number">100</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-RestApi-%EA%B0%9C%EB%B0%9C">[시연] RestApi 개발</h2>
<h3 id="API-Test---curl-%EC%82%AC%EC%9A%A9">API Test - curl 사용</h3>
<ul>
<li>Student 정보 삭제</li>
</ul>
<pre class="lang-shell"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> curl –XDELETE  http://localhost:8080/students/1</span>
</code></pre>
<ul>
<li>Student  정보 삭제 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"result"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"OK"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-Spring-Boot-%EB%A1%9C-RestApi-%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B0%9C%EB%B0%9C">[실습] Spring Boot 로 RestApi 서비스 개발</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426378640572398912" target="">Spring Boot로 RestApi 서비스 개발 실습</a></li>
</ul>
<h2 id="%5BQuiz%5D">[Quiz]</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426493769089714283" target="">[quiz] Simple Rest Application Develop</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 10:34</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Spring Boot로 Dependency Injection 실습</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>계좌관리 시스템을 개발합니다.</li>
<li>계좌의 클래스 이름은 Account 입니다.</li>
<li>모든 계좌를 조회하는 기능을 제공합니다.</li>
<li>DefaultAccountService의 테스트 코드를 작성합니다.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15분</li>
</ul>
<h2 id="%EC%84%A4%EA%B3%84">설계</h2>
<pre class="lang-uml"><code data-language="uml"><img src="/plantuml/img/dP312i8m38RlVOeS5TaJE8IX5y6JUu9Oir7iKaapOQZlRfaRoDn1lBL_yl_9btXnV4N11aveBxM4bi_Ru8E02d9C9M8rZfMaGajGM9jQj2IvkVIz6u0L75pKVAXie2OTtd6nD4zZFSO8EwgmzJhZpyRG8rr3T1ga0vmgFyyPf26vL75S0xVDYMJTI_l4KfCaNeziQPsSttmVgymXLexFXVVzs96lRPhk3xUPN2H_PDdyiSntUkQfqj_RtzcpYveN"></code></pre>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.11 21:05</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Spring Boot로 JPA 적용 실습</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<p>・ 계좌 정보를 데이터베이스에 저장한다.<br>
・ JPA 기술을 사용한다.<br>
・ 데이터는 H2 DB에 저장한다</p>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
<h2 id="%EC%84%A4%EA%B3%84">설계</h2>
<pre class="lang-uml"><code data-language="uml"><img src="/plantuml/img/ZL112i8m4Bpd5NjKf2-m24KlYYTzmPfkIp3TbCrM4VNl1gcWjeAtP6PdPcVZqN6BWWqSq1vh2HsNo-23W0foJ1In6iTAKg4bAAnD8xedERdqlHg06MnTrBnd5b2JzkyucPgxiHvZX1LLs7aTqMSlqnsr8JeDSW7yHlxEwQ7UUQ_Yk0RkcWF9_0cjKvUQ9FNro9RcIJdizxRAMCNACVh2-sVkcthJueSoaUQhSNxBil5Zc65svgdIN-EVOSct36SUEQPv0000"></code></pre>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.11 21:05</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Spring Boot로 MySql 적용 실습</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<p>・ 계좌 정보를 MySql 데이터베이스에 저장한다.</p>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
<h2 id="%EC%84%A4%EA%B3%84">설계</h2>
<pre class="lang-uml"><code data-language="uml"><img src="/plantuml/img/ZL112i8m4Bpd5NjKf2-m24KlYYTzmPfkIp3TbCrM4VNl1gcWjeAtP6PdPcVZqN6BWWqSq1vh2HsNo-23W0foJ1In6iTAKg4bAAnD8xedERdqlHg06MnTrBnd5b2JzkyucPgxiHvZX1LLs7aTqMSlqnsr8JeDSW7yHlxEwQ7UUQ_Yk0RkcWF9_0cjKvUQ9FNro9RcIJdizxRAMCNACVh2-sVkcthJueSoaUQhSNxBil5Zc65svgdIN-EVOSct36SUEQPv0000"></code></pre>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.11 21:05</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Spring Boot로 RestApi 서비스 개발 실습</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>계좌 정보의  조회, 전체 조회, 등록, 삭제 Rest API 를 개발한다.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
<h2 id="%EC%84%A4%EA%B3%84">설계</h2>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426378640572398912/attach-files/3426379281702186357" alt="image.png"></p>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 00:57</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">3. Initialize and Run Spring-Boot project</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Spring-Boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%9D%98-%EC%83%9D%EC%84%B1%EC%A7%80%EC%9B%90">Spring Boot 프로젝트의 생성지원</h2>
<h3 id="Spring-Boot-initializr">Spring Boot initializr</h3>
<ul>
<li><a href="https://start.spring.io/" target="_blank">https://start.spring.io</a></li>
</ul>
<h3 id="Intellij-IDEA-Ultimate">Intellij IDEA Ultimate</h3>
<ul>
<li>community edition 에서는 지원하지 않음</li>
</ul>
<h3 id="Spring-Tools-4-for-Eclipse">Spring Tools 4 for Eclipse</h3>
<ul>
<li>eclipse 프로젝트 기반</li>
<li><a href="https://spring.io/tools" target="_blank">https://spring.io/tools</a></li>
</ul>
<h3 id="Spring-Tools-4-for-Visual-Studio-Code">Spring Tools 4 for Visual Studio Code</h3>
<ul>
<li>Spring Boot 확장팩 설치 후 사용가능</li>
<li>Spring Boot support in Visual Studio Code</li>
</ul>
<h2 id="Spring-Boot-initializr">Spring Boot initializr</h2>
<ul>
<li>
<p>웹기반 Spring Boot 프로젝트 생성 도구</p>
<ul>
<li><a href="https://start.spring.io/" target="_blank">https://start.spring.io</a></li>
</ul>
</li>
<li>
<p>선택 옵션</p>
<ul>
<li>build tool</li>
<li>language,</li>
<li>spring-boot version</li>
<li>java version</li>
<li>라이브러리 의존성(dependency)</li>
</ul>
</li>
<li>
<p>Spring Boot 프로젝트팀 통계 수집</p>
</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426380119398386786/attach-files/3426382032828243542" alt="image.png"></p>
<h2 id="Intellij-IDEA-Ultimate">Intellij IDEA Ultimate</h2>
<ul>
<li>통합개발도구(IDE)
<ul>
<li>
<p>Spring Boot | IntelliJ&nbsp;IDEA (<a href="http://jetbrains.com" target="_blank">jetbrains.com</a></p>
</li>
<li>
<p>배포판에 포함된 Spring and SpringBoot 플러그인 사용</p>
</li>
<li>
<p><code data-backticks="1">Spring Boot initializr</code> 사용</p>
</li>
<li>
<p>actuator endpoint 도구 제공</p>
</li>
<li>
<p>Bean 조회 도구 제공</p>
</li>
</ul>
</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426380119398386786/attach-files/3426382570846192616" alt="image.png"></p>
<h2 id="Spring-Tools-For-Eclipse">Spring Tools For Eclipse</h2>
<ul>
<li>통합개발도구(IDE)
<ul>
<li>Eclipse IDE 기반</li>
<li>spring 프로젝트에서 제공 Spring | Tools</li>
<li>Spring Tool Suite의 새버전</li>
</ul>
</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426380119398386786/attach-files/3426382888708766941" alt="image.png"></p>
<h2 id="Spring-Tools-4-for-Visual-Studio-Code">Spring Tools 4 for Visual Studio Code</h2>
<ul>
<li>통합개발도구(IDE)
<ul>
<li>Visual Studio Code IDE 기반</li>
<li>spring 프로젝트에서 제공 Spring | Tools</li>
<li>확장팩 설치 후 사용</li>
<li>Spring Boot Extension Pack - Visual Studio Marketplace</li>
</ul>
</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426380119398386786/attach-files/3426383309336911490" alt="image.png"></p>
<h2 id="Spring-Boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%9D%98-%EC%8B%A4%ED%96%89">Spring Boot 프로젝트의 실행</h2>
<h3 id="Executable-Jar%2FWar">Executable Jar/War</h3>
<ul>
<li>실행가능한 jar, war 생성</li>
</ul>
<h3 id="Build-Tool">Build Tool</h3>
<ul>
<li>maven , gradle 로 직접 실행</li>
</ul>
<h3 id="Unix%2FLinux-Services">Unix/Linux Services</h3>
<ul>
<li>init.d Service</li>
<li>systemd Service</li>
</ul>
<h3 id="Docker%2FKubernetes">Docker/Kubernetes</h3>
<ul>
<li>Docker Image 생성 지원</li>
</ul>
<h2 id="Executable-Jar-%2F-War">Executable Jar / War</h2>
<ul>
<li>maven 또는 gradle 로 실행가능한 jar 또는 war 를 빌드한다.</li>
<li>spring boot의 maven plugin 이나 gradle plugin 을 사용한다면 자동으로 생성할 수 있다.</li>
</ul>
<pre class="lang-bash"><code data-language="bash">$ mvn package //gradle bootjar
<p>$ ls target
student-0.0.1-SNAPSHOT.jar</p>
</code><p><code data-language="bash">$ java –jar target/student-0.0.1-SNAPSHOT.jar
</code></p></pre><p></p>
<h2 id="Build-Tool-%EC%82%AC%EC%9A%A9">Build Tool 사용</h2>
<ul>
<li>maven 또는 gradle 로 직접 실행한다.</li>
<li>로컬, 개발환경에서 사용할 수 있다.</li>
</ul>
<pre class="lang-bash"><code data-language="bash">$ mvn spring-boot:run
</code></pre><pre class="lang-bash"><code data-language="bash">$ gradle bootRun
</code></pre>
<h2 id="Linux-Services-(CentOS%2C-Ubuntu)">Linux Services (CentOS, Ubuntu)</h2>
<ul>
<li>Linux Service 에서 실행하려면 완전 실행가능한 jar 를 빌드한다.</li>
<li>maven, gradle에서 아래와 같이 spring-boot plugin 설정을 수정한다.</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">executable</span>&gt;</span>true<span class="hljs-tag"><!--span class="hljs-name"-->executable</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->configuration</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->plugin</span>&gt;
</code></pre><pre class="lang-xml"><code data-language="xml">bootJar { 
      launchScript() 
}
</code></pre>
<h3 id="init.d">init.d</h3>
<ul>
<li>init.d Service 설정 및 실행</li>
</ul>
<pre class="lang-bash"><code data-language="bash">$ sudo ln -s /var/app/student.jar /etc/init.d/student
</code><p><code data-language="bash">$ service student start
</code></p></pre><p></p>
<h3 id="systemd">systemd</h3>
<p>・ systemd Service 설정 및 실행<br>
・ /etc/systemd/system/student.service 파일을 생성한다.</p>
<pre><code>[Unit] 
Description=student
After=syslog.target 
<p>[Service]
User=irteam
ExecStart=/var/app/student.jar
SuccessExitStatus=143</p>
</code><p><code>[Install]
WantedBy=multi-user.target
</code></p></pre><pre><code>$ systemctl enable student.service<p></p>
</code><p><code></code></p></pre><p></p>
<h2 id="Docker-%EC%8B%A4%ED%96%89">Docker 실행</h2>
<ul>
<li>Dockerfile 을 직접 만들거나 빌드툴로 Docker 이미지를 생성한다.</li>
</ul>
<pre><code>$ mvn spring-boot:build-image –Dspring-boot.build-image.imageName=student
</code></pre><pre><code>$ gradle bootBuildImage --imageName=student
</code></pre>
<ul>
<li>Docker 로 컨테이너 실행</li>
</ul>
<pre><code>$ docker run –p8080:8080 student:latest
</code></pre>
<h2 id="Kubernetes-%EC%8B%A4%ED%96%89">Kubernetes 실행</h2>
<ul>
<li>tag 설정 및 registry 설정.</li>
</ul>
<pre><code>$ docker tag student:0.0.1-SNAPSHOT registry.op.internal.dooray.io/nhn-edu/student:latest
$ docker push registry.op.internal.dooray.io/nhn-edu/student:latest
</code></pre>
<ul>
<li>kubernetes 배포용 YAML 작성.</li>
</ul>
<pre><code>$ kubectl create deployment student \
  --image=registry.op.internal.dooray.io/nhn-edu/student:latest \
  --dry-run=client -o yaml &gt; student.yaml
</code></pre>
<ul>
<li>Kubernetes deployment 배포</li>
</ul>
<pre><code>$ kubectl apply -f student.yaml 
deployment.apps/student created
</code></pre>
<ul>
<li>8080 포트 노출.</li>
</ul>
<pre><code>$ kubectl expose deployment student --type=NodePort --name=student-service --port 8080
</code><p><code></code></p></pre><p></p>
<h2 id="Quiz">Quiz</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426495613722673324" target="">[quiz] Initialize and Run Spring-Boot project</a></li>
</ul>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426389813342127365" target="">Account 서비스 실행</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.11 21:28</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Account 서비스 실행</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>다양한 방법으로 Account 서비스를 실행합니다.
<ul>
<li>완전실행형 jar 실행</li>
<li>java -jar 실행</li>
<li>Docker 로 실행</li>
</ul>
</li>
</ul>
<h2 id="%EC%A4%80%EB%B9%84%EC%82%AC%ED%95%AD">준비사항</h2>
<h3 id="Docker-Desktop-%EC%84%A4%EC%B9%98">Docker Desktop 설치</h3>
<ul>
<li><a href="https://docs.docker.com/desktop/install/mac-install/" target="_blank">https://docs.docker.com/desktop/install/mac-install/</a></li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 00:58</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">4. Simple Web Application Development using Spring Boot</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Spring-Boot-%EC%9D%98-View">Spring-Boot 의 View</h2>
<h3 id="Spring-boot%EC%9D%98-view-%EC%A7%80%EC%9B%90">Spring-boot의 view 지원</h3>
<ul>
<li>spring boot 에서 Thymeleaf, FreeMarker, Mustache, Groovy Templates ,Velocity&nbsp;를 view template 으로 제공한다.</li>
</ul>
<h3 id="Thymeleaf">Thymeleaf</h3>
<ul>
<li>Spring Boot는 Thymeleaf를 기본 지원하여 간단한 설정으로 사용 가능</li>
<li>html 문법 내에서 view 를 구현할 수 있는 장점</li>
</ul>
<h2 id="Spring-Boot-%EC%9D%98-View-(Thymeleaf)">Spring-Boot 의 View (Thymeleaf)</h2>
<h3 id="Thymeleaf">Thymeleaf</h3>
<ul>
<li>Phil Webb (SpringOne 2017)</li>
<li><a href="https://youtu.be/MQamx7-bCVI?t=377" target="_blank">https://youtu.be/MQamx7-bCVI?t=377</a><br>
<img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426397198091335626/attach-files/3426398423279599839" alt="image.png"></li>
</ul>
<h2 id="Spring-Boot%EC%9D%98-View-(Thymeleaf)">Spring-Boot의 View (Thymeleaf)</h2>
<h3 id="Thymeleaf%EC%9D%98-%EC%82%AC%EC%9A%A9">Thymeleaf의 사용</h3>
<ul>
<li>spring-boot-starter-thymeleaf 의존성 추가</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(Thymeleaf)">Spring-Boot의 View (Thymeleaf)</h2>
<h3 id="Thymeleaf%EC%9D%98-%EC%82%AC%EC%9A%A9">Thymeleaf의 사용</h3>
<ul>
<li>프로젝트 루트의 /src/main/resource 경로에 templates 디렉토리를 생성하고 템플릿 작성</li>
<li>Ex) student.html</li>
</ul>
<pre class="lang-html"><code data-language="html"><span class="hljs-meta">html</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">html</span><span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span><span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>welcome<span class="hljs-tag"><!--span class="hljs-name"-->title</span>&gt; 
<span class="hljs-tag"><!--span class="hljs-name"-->head</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Name<span class="hljs-tag"><!--span class="hljs-name"-->h1</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span><span class="hljs-attr">th:text</span>=<span class="hljs-string">"${student.name}"</span>&gt;</span><span class="hljs-tag"><!--span class="hljs-name"-->h2</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Score<span class="hljs-tag"><!--span class="hljs-name"-->h1</span>&gt; 
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span><span class="hljs-attr">th:text</span>=<span class="hljs-string">"${student.score}"</span>&gt;</span><span class="hljs-tag"><!--span class="hljs-name"-->h2</span>&gt; 
<span class="hljs-tag"><!--span class="hljs-name"-->body</span>&gt; 
<span class="hljs-tag"><!--span class="hljs-name"-->html</span>&gt;
</code><p><code data-language="html"></code></p></pre><p></p>
<h2 id="Spring-Boot%EC%9D%98-View-(Thymeleaf)">Spring-Boot의 View (Thymeleaf)</h2>
<h3 id="Thymeleaf%EC%9D%98-%EC%82%AC%EC%9A%A9">Thymeleaf의 사용</h3>
<ul>
<li>view template 을 사용하려면 @Controller를 사용</li>
<li>/src/main/java 경로의 com.nhnent.edu.springboot 패키지에 StudentWebController 작성</li>
<li>getStudent 가 반환하는 student 는 view template의 경로 중 일부</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentWebController</span> </span>{
<span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/web/students/{id}"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> String<span class="hljs-title">getStudent</span><span class="hljs-params">(@PathVariable Long id,
                              Model model)</span></span>{
        model.addAttribute(<span class="hljs-string">"student"</span>,<span class="hljs-keyword">new</span> Student(<span class="hljs-string">"zbum"</span>,<span class="hljs-number">100</span>));
    <span class="hljs-keyword">return</span><span class="hljs-string">"student"</span>;
    }
}
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(Thymeleaf)">Spring-Boot의 View (Thymeleaf)</h2>
<h3 id="Thymeleaf%EC%9D%98-%EC%82%AC%EC%9A%A9">Thymeleaf의 사용</h3>
<ul>
<li>view template 의 경로변경</li>
<li>만약, application.properties 에 아래와 같이 설정되어 있고 getStudent 메서드가 "student"를 반환한다면 템플릿은 "/src/main/resources/templates/main/student.html" 에 위치해야 합니다.</li>
</ul>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">spring.thymeleaf.enabled</span>=<span class="hljs-string">true</span>
<span class="hljs-meta">spring.thymeleaf.prefix</span>=<span class="hljs-string">classpath:/templates/main/</span>
<span class="hljs-meta">spring.thymeleaf.suffix</span>=<span class="hljs-string">.html</span>
</code></pre>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-thymeleaf-%EC%9C%BC%EB%A1%9C-html-%EB%A0%8C%EB%8D%94%EB%A7%81">[실습] thymeleaf 으로 html 렌더링</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426400788413580051" target="">thymeleaf 으로 html 렌더링</a></li>
</ul>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="JSP%EC%9D%98-%EC%82%AC%EC%9A%A9">JSP의 사용</h3>
<ul>
<li>spring-boot 에서 JSP를 사용할 수 있지만 권장하지 않습니다.</li>
<li>legacy의 코드를 재사용하기 위해 학습 필요</li>
</ul>
<h3 id="Spring-Boot%EC%97%90%EC%84%9C-JSP-%EC%A0%9C%EC%95%BD">Spring-Boot에서 JSP 제약</h3>
<ul>
<li>war 패키징 된 경우에만 사용이 가능 (실행형 war 또는 tomcat에서 동작)</li>
<li>실행형 jar에서는 동작하지 않음</li>
<li>undertow 는 JSP를 지원하지 않음</li>
</ul>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="%ED%8C%A8%ED%82%A4%EC%A7%95-%EB%B3%80%EA%B2%BD">패키징 변경</h3>
<ul>
<li>jar 에는 WEB-INF 를 포함하지 않기 때문에 war로 패키징한다.</li>
<li>JSTL지원 및 JSP 컴파일을 위해서 두개의 라이브러리를 추가한다.</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag"><!--span class="hljs-name"-->packaging</span>&gt;
</code></pre>
<h3 id="%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EC%9D%98%EC%A1%B4%EC%84%B1">라이브러리 의존성</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
...
<span class="hljs-comment"><!-- JSTL for JSP --></span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
 <span class="hljs-comment"><!-- Need this to compile JSP --></span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag"><!--span class="hljs-name"-->scope</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependencies</span>&gt;
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="main-%ED%81%B4%EB%9E%98%EC%8A%A4-%EB%B3%80%EA%B2%BD">main 클래스 변경</h3>
<ul>
<li>war로 패키징 한 경우, main 클래스가 SpringBootServletInitializer을 상속받도록 수정해야 합니다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span><span class="hljs-keyword">extends</span><span class="hljs-title">SpringBootServletInitializer</span> </span>{
 <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
  }
 <span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> SpringApplicationBuilder<span class="hljs-title">configure</span><span class="hljs-params">(SpringApplicationBuilder builder)</span> </span>{
<span class="hljs-keyword">return</span> builder.sources(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
  }
}
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="JSP-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1">JSP 파일 작성</h3>
<ul>
<li>프로젝트에 /src/main/webapp/WEB-INF/jsp 디렉토리를 생성하고 jsp file 작성</li>
</ul>
<pre class="lang-html"><code data-language="html"><span class="hljs-meta">html</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">html</span><span class="hljs-attr">lang</span>=<span class="hljs-string">"ko"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span><span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>welcome<span class="hljs-tag"><!--span class="hljs-name"-->title</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->head</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>JSP Sample<span class="hljs-tag"><!--span class="hljs-name"-->h1</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>${message}<span class="hljs-tag"><!--span class="hljs-name"-->h2</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->body</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->html</span>&gt;
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="Controller-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%83%9D%EC%84%B1">Controller 클래스 생성</h3>
<ul>
<li>/src/main/java 경로의 com.nhn.edu.springboot 패키지에 Controller 클래스를 작성</li>
<li>화면에 표시할 attribute 는 Map 객체를 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">WelcomeController</span> </span>{
<span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/welcome"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> String<span class="hljs-title">welcome</span><span class="hljs-params">(Map model)</span> </span>{
    model.put(<span class="hljs-string">"message"</span>,<span class="hljs-string">"Welcome to the world!"</span>);
<span class="hljs-keyword">return</span><span class="hljs-string">"welcome"</span>;
  }
}
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="JSP%EC%9D%98-%EA%B2%BD%EB%A1%9C-%EB%B3%80%EA%B2%BD">JSP의 경로 변경</h3>
<ul>
<li>만약, application.properties에 아래와 같이 설정되어 있고 welcome 메서드가 "welcome"를 반환한다면 jsp 파일은 "/src/main/webapp/WEB-INF/jsp/welcome.jsp" 에 위치해야 합니다.</li>
</ul>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">spring.mvc.view.prefix</span>=<span class="hljs-string">WEB-INF/jsp/ </span>
<span class="hljs-meta">spring.mvc.view.suffix</span>=<span class="hljs-string">.jsp </span>
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-View-(JSP)">Spring-Boot의 View (JSP)</h2>
<h3 id="JSP-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-Spring-Boot-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%98-%EC%8B%A4%ED%96%89">JSP 를 사용하는 Spring-Boot 애플리케이션의 실행</h3>
<ul>
<li>Executable War를 이용한 실행</li>
</ul>
<pre class="lang-bash"><code data-language="bash">$ mvn clean package 
$ java -jar target/student-1.0.0-SNAPSHOT.war  
</code></pre>
<ul>
<li>spring-boot maven plugin 을 이용한 실행</li>
</ul>
<pre class="lang-bash"><code data-language="bash">$ mvn spring-boot:run  
</code></pre>
<ul>
<li>또는, tomcat 등 Web application Server 에 deploy</li>
</ul>
<h2 id="Quiz">Quiz</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426496442290983322" target="">[quiz] Simple Web Application Development using Spring Boot</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 00:39</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">5. Dependency Management and Main Function</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Dependency-management">Dependency management</h2>
<h3 id="Spring-Boot-Starter">Spring Boot Starter</h3>
<ul>
<li>Spring Framework 관련 기술을 사용하기 위한 의존성 관리 세트</li>
<li>40개 이상의 Spring Boot starter를 Spring Boot에서 제공</li>
<li>3rd Party 에서 제공</li>
</ul>
<table>
<thead>
<tr>
<th>Starter 이름</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring-boot-starter-parent</td>
<td>spring boot 프로젝트에서 상속 받아야 할 pom</td>
</tr>
<tr>
<td>spring-boot-starter</td>
<td>Auto Configuration 을 포함한 핵심 starter, logging, yaml 지원</td>
</tr>
<tr>
<td>spring-boot-starter-web</td>
<td>RESTful, Web 애플리케이션 구축을 위한 starter, 내장 tomcat 포함</td>
</tr>
<tr>
<td>spring-boot-starter-amqp</td>
<td>Spring AMQP, Rabbit MQ 사용을 위한 설정</td>
</tr>
<tr>
<td>spring-boot-starter-mail</td>
<td>Java mail 을 사용하기 위한 설정, spring framework의 메일 발송기능</td>
</tr>
</tbody>
</table>
<h2 id="Dependency-management">Dependency management</h2>
<h3 id="Spring-Boot-Starter">Spring Boot Starter</h3>
<ul>
<li>Pivotal Software사의 공식 starter는 spring-boot-starter-* 패턴으로 명명한다.</li>
<li>spring-boot-starter-* 의 라이브러리 의존성을 추가하는 것 만으로도 기본 설정으로 기능이 동작한다.</li>
<li>공식 starter가 아닌 경우는 spring-boot로 시작하지 않아야 한다. 보통 {function}-spring-boot-starter 과 같이 명명</li>
</ul>
<h2 id="Dependency-management">Dependency management</h2>
<h3 id="spring-boot-starter-parent">spring-boot-starter-parent</h3>
<ul>
<li>spring-boot-starter-parent는 spring-boot-dependencies를 상속</li>
<li>spring-boot 버전별로 지원하는 라이브러리 의존성 목록(Bills of Materials)</li>
<li>spring-boot 버전을 업그레이드하면 라이브러리 의존성도 모두 자동 업그레이드</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="hljs-tag"><!--span class="hljs-name"-->relativePath</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->parent</span>&gt;
</code></pre>
<h2 id="Dependency-management">Dependency management</h2>
<h3 id="spring-boot-dependencies">spring-boot-dependencies</h3>
<ul>
<li>사용하는 라이브러리의 버전을 property 로 관리</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">activemq.version</span>&gt;</span>5.16.5<span class="hljs-tag"><!--span class="hljs-name"-->activemq.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">antlr2.version</span>&gt;</span>2.7.7<span class="hljs-tag"><!--span class="hljs-name"-->antlr2.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">appengine-sdk.version</span>&gt;</span>1.9.98<span class="hljs-tag"><!--span class="hljs-name"-->appengine-sdk.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artemis.version</span>&gt;</span>2.19.1<span class="hljs-tag"><!--span class="hljs-name"-->artemis.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">aspectj.version</span>&gt;</span>1.9.7<span class="hljs-tag"><!--span class="hljs-name"-->aspectj.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">assertj.version</span>&gt;</span>3.22.0<span class="hljs-tag"><!--span class="hljs-name"-->assertj.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">atomikos.version</span>&gt;</span>4.0.6<span class="hljs-tag"><!--span class="hljs-name"-->atomikos.version</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">awaitility.version</span>&gt;</span>4.2.0<span class="hljs-tag"><!--span class="hljs-name"-->awaitility.version</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->properties</span>&gt;
</code></pre>
<h2 id="Dependency-management">Dependency management</h2>
<h3 id="spring-boot-dependencies">spring-boot-dependencies</h3>
<ul>
<li>dependencyManagement 로 사용할 라이브러리의 버전을 미리 지정</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencymanagement</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-web<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
...
<span class="hljs-tag"><!--span class="hljs-name"-->dependencies</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependencymanagement</span>&gt;
</code></pre>
<h2 id="Dependency-management">Dependency management</h2>
<h3 id="spring-boot-starter-web">spring-boot-starter-web</h3>
<ul>
<li>spring-core, spring-web, spring-webmvc, 내장 tomcat 서버 및 관련 라이브러리 설정을 일괄처리</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag"><!--span class="hljs-name"-->scope</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag"><!--span class="hljs-name"-->scope</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.6<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag"><!--span class="hljs-name"-->scope</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code><p><code data-language="xml"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D">[실습]</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426473770570677623" target="">tomcat 대신 jetty 로 실행하기</a></li>
</ul>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="spring-boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%9D%98-main-%EB%A9%94%EC%86%8C%EB%93%9C">spring-boot 프로젝트의 main 메소드</h3>
<ul>
<li>public static void main 메서드에서 SpringApplication.run을 실행시킨다.</li>
<li>args는 command 라인에서 보낸 인자를 전달한다. (--debug, --spring.profiles.active)</li>
</ul>
<h3 id="SpringApplication-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95">SpringApplication 사용 방법</h3>
<ul>
<li>static method</li>
<li>use construction</li>
<li>use builder</li>
</ul>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="Static-%EB%A9%94%EC%84%9C%EB%93%9C">Static 메서드</h3>
<ul>
<li>가장 일반적인 사용방법</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
         SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">args</span>)</span>;
   }
}
</code></pre>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="%EC%83%9D%EC%84%B1%EC%9E%90-%EC%82%AC%EC%9A%A9">생성자 사용</h3>
<ul>
<li>static 메소드 내부에 동일한 구현이 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
      SpringApplication application =<span class="hljs-keyword">new</span> SpringApplication(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;      application.run(args);
   }
}
</code></pre>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="builder-%EC%82%AC%EC%9A%A9">builder 사용</h3>
<ul>
<li>빌더로 여러 개의 web context를 구성할 수 있으며 parent-child 의 계층구조로 설정가능</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span> </span>{
<p><span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
<span class="hljs-keyword">new</span> SpringApplicationBuilder()
.sources(Student<span class="hljs-class">.<span class="hljs-keyword">class</span>).<span class="hljs-title">web</span>(<span class="hljs-title">WebApplicationType</span>.<span class="hljs-title">NONE</span>)
.<span class="hljs-title">child</span>(<span class="hljs-title">FirstChildConfig</span>.<span class="hljs-title">class</span>).<span class="hljs-title">web</span>(<span class="hljs-title">WebApplicationType</span>.<span class="hljs-title">SERVLET</span>)
.<span class="hljs-title">sibling</span>(<span class="hljs-title">SecondChildConfig</span>.<span class="hljs-title">class</span>).<span class="hljs-title">web</span>(<span class="hljs-title">WebApplicationType</span>.<span class="hljs-title">SERVLET</span>)
.<span class="hljs-title">run</span>(<span class="hljs-title">args</span>)</span>;
}</p>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="Custom-Banner">Custom Banner</h3>
<ul>
<li>spring-boot 프로젝트의 banner custom<br>
<img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426406104341460841/attach-files/3426418003989990788" alt="image.png"></li>
</ul>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="Custom-Banner">Custom Banner</h3>
<ul>
<li>org.springframework.boot.Banner 인터페이스를 구현하여 custom banner 개발</li>
<li>banner 제거하기</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyApplication</span> </span>{
 <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
    SpringApplication application =<span class="hljs-keyword">new</span> SpringApplication(MyApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
    application.setBannerMode(Banner.Mode.OFF);
    application.run(args);
  }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="Resource-%ED%8C%8C%EC%9D%BC">Resource 파일</h3>
<ul>
<li>
<p>src/main/resource/banner.txt 파일을 생성하여 기본 banner 대체<br>
<img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426406104341460841/attach-files/3426459895933547406" alt="image.png"></p>
</li>
<li>
<p>banner.gif, banner.jpg, banner.png 를 src/main/resources 에 복사<br>
<img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426406104341460841/attach-files/3426460362933868159" alt="image.png"></p>
</li>
</ul>
<h2 id="Main-Class-Function">Main Class Function</h2>
<h3 id="Banner%EC%97%90-%EC%82%AC%EC%9A%A9%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EB%B3%80%EC%88%98">Banner에 사용할 수 있는 변수</h3>
<ul>
<li>banner.txt 에는 다음의 변수를 사용할 수 있다.</li>
</ul>
<table>
<thead>
<tr>
<th>Starter 이름</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>${application.version}</td>
<td>MANIFEST.MF 에 설정한 애플리케이션의 버전</td>
</tr>
<tr>
<td>${application.formattd-version}</td>
<td>${application.version} 을 (v1.0.0) 형태로 포멧</td>
</tr>
<tr>
<td>${spring-boot.version}</td>
<td>사용하는 spring-boot 의 버전</td>
</tr>
<tr>
<td>${spring-boot.formatted-version}</td>
<td>${spring-boot.version} 을 (v1.0.0) 형태로 포멧</td>
</tr>
<tr>
<td>${<a href="http://Ansi.NAME" target="_blank">Ansi.NAME</a></td>
<td>Ansi escape 코드의 이름을 지정</td>
</tr>
<tr>
<td>${application.title}</td>
<td>MANIFEST.MF 에 설정한 애플리케이션 이름</td>
</tr>
</tbody>
</table>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-banner-%EB%B0%94%EA%BE%B8%EA%B8%B0">[시연] banner 바꾸기</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426474042479727648" target="">Banner 바꾸기</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 00:13</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">tomcat 대신 jetty 로 실행하기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>계좌 정보를 제공하는 API 를 jetty 로 동작하도록 합니다.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>5분</li>
</ul>
<h2 id="%ED%9E%8C%ED%8A%B8">힌트</h2>
<ul>
<li>spring-boot-starter-web 에서 spring-boot-starter-tomcat 을 exclude 한다.</li>
<li>spring-boot-starter-jetty 의 의존성을 추가한다.</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 00:41</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Banner 바꾸기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>프로젝트 실행시에 Banner 를 변경합니다.</li>
</ul>
<h2 id="%ED%9E%8C%ED%8A%B8">힌트</h2>
<ul>
<li>배너에 placeholder 를 표시하려면 java -jar 방식으로 실행해야 합니다.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>5분</li>
</ul>
<h2 id="%EB%B0%B0%EB%84%88">배너</h2>
<pre><code> _   _ _   _ _   _      _                 _                      _
| \ | | | | | \ | |    / \   ___ __ _  __| | ___ _ __ ___  _   _| |
|  | | |_| |  | |   / _ \ / __/ _` |/ _` |/ _ \ '_ ` _ | | | | |
| |\  |  _  | |\  |  / ___ \ (_| (_| | (_| |  __/ | | | | | |_| |_|
|_| _|_| |_|_| _| /_/   ______,_|__,_|___|_| |_| |_|__, (_)
                                                           |___/
<ul>
<li>application name : spring-boot-account</li>
<li>application version : 0.0.1-SNAPSHOT</li>
</ul>
</code><p><code></code></p></pre><p></p>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 02:08</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">6. Auto Configuration &amp; Externalized Configuration</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Auto-Configuration">Auto Configuration</h2>
<h3 id="%40EnableAutoConfiguration">@EnableAutoConfiguration</h3>
<ul>
<li>
<p>Auto Configuration은 애플리케이션에서 필요한 Bean을 유추해서 구성해 주는 기능을 담당</p>
</li>
<li>
<p>@EnableAutoConfiguration 설정은 spring-boot의 AutoConfiguration 을 사용하겠다는 선언</p>
</li>
<li>
<p>@SpringBootApplication 에 포함</p>
</li>
</ul>
<h2 id="%40EnableAutoConfiguration">@EnableAutoConfiguration</h2>
<ul>
<li>java configuration 은 auto configuration 으로 동작할 수 있음</li>
<li>java configuration 이 auto configuration으로 동작하기 위해서 설정파일에 대상 Configuration 이 설정되어야함</li>
</ul>
<h3 id="2.6.x-%EC%9D%B4%EC%A0%84">2.6.x 이전</h3>
<ul>
<li>spring-boot-autoconfigure/META-INF/spring.factories 에 spring-boot 가 제공하는 모든 AutoConfiguration 이 설정되어 있음</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426488940306770061/attach-files/3426500991559789490" alt="image.png"></p>
<h3 id="2.7.x-%EC%9D%B4%ED%9B%84">2.7.x 이후</h3>
<ul>
<li>spring-boot-autoconfigure/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426488940306770061/attach-files/3426500860521498355" alt="image.png"></p>
<h2 id="AutoConfiguration%EC%97%90%EC%84%9C-%EC%A0%9C%EC%99%B8">AutoConfiguration에서 제외</h2>
<ul>
<li>auto configuration. 에서 설정을 제외하고 싶다면 @EnableAutoConfiguration의 exclude를 설정한다.</li>
<li>@SpringBootApplication 을 사용한 경우도 동일한 방법으로 제외 할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>(exclude= RedisAutoConfiguration<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">public</span><span class="hljs-title">class</span><span class="hljs-title">StudentApplication</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">args</span>)</span>;
    }
}
</code></pre>
<h2 id="Auto-Configuration-%EC%98%88">Auto Configuration 예</h2>
<ul>
<li>@ConditionalOnClass, @ConditionalOnMissingBean 등의 애너테이션으로 설정 제어</li>
<li>EmbeddedWebServerFactoryCustomizerAutoConfiguration.java</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@AutoConfiguration</span>
<span class="hljs-meta">@ConditionalOnWebApplication</span>
<span class="hljs-meta">@EnableConfigurationProperties</span>(ServerProperties<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">public</span><span class="hljs-title">class</span><span class="hljs-title">EmbeddedWebServerFactoryCustomizerAutoConfiguration</span> </span>{
<pre><code>&lt;span class="hljs-comment"&gt;/**
 * Nested configuration if Tomcat is being used.
 */&lt;/span&gt;
&lt;span class="hljs-meta"&gt;@Configuration&lt;/span&gt;(proxyBeanMethods =&lt;span class="hljs-keyword"&gt;false&lt;/span&gt;)
&lt;span class="hljs-meta"&gt;@ConditionalOnClass&lt;/span&gt;({ Tomcat&lt;span class="hljs-class"&gt;.&lt;span class="hljs-keyword"&gt;class&lt;/span&gt;,&lt;span class="hljs-title"&gt;UpgradeProtocol&lt;/span&gt;.&lt;span class="hljs-title"&gt;class&lt;/span&gt; })
&lt;span class="hljs-title"&gt;public&lt;/span&gt;&lt;span class="hljs-title"&gt;static&lt;/span&gt;&lt;span class="hljs-title"&gt;class&lt;/span&gt;&lt;span class="hljs-title"&gt;TomcatWebServerFactoryCustomizerConfiguration&lt;/span&gt; &lt;/span&gt;{

    &lt;span class="hljs-meta"&gt;@Bean&lt;/span&gt;
    &lt;span class="hljs-function"&gt;&lt;span class="hljs-keyword"&gt;public&lt;/span&gt; TomcatWebServerFactoryCustomizer&lt;span class="hljs-title"&gt;tomcatWebServerFactoryCustomizer&lt;/span&gt;&lt;span class="hljs-params"&gt;(Environment environment,
            ServerProperties serverProperties)&lt;/span&gt; &lt;/span&gt;{
        &lt;span class="hljs-keyword"&gt;return&lt;/span&gt;&lt;span class="hljs-keyword"&gt;new&lt;/span&gt; TomcatWebServerFactoryCustomizer(environment, serverProperties);
    }

}

&lt;span class="hljs-comment"&gt;/**
 * Nested configuration if Jetty is being used.
 */&lt;/span&gt;
&lt;span class="hljs-meta"&gt;@Configuration&lt;/span&gt;(proxyBeanMethods =&lt;span class="hljs-keyword"&gt;false&lt;/span&gt;)
&lt;span class="hljs-meta"&gt;@ConditionalOnClass&lt;/span&gt;({ Server&lt;span class="hljs-class"&gt;.&lt;span class="hljs-keyword"&gt;class&lt;/span&gt;,&lt;span class="hljs-title"&gt;Loader&lt;/span&gt;.&lt;span class="hljs-title"&gt;class&lt;/span&gt;,&lt;span class="hljs-title"&gt;WebAppContext&lt;/span&gt;.&lt;span class="hljs-title"&gt;class&lt;/span&gt; })
&lt;span class="hljs-title"&gt;public&lt;/span&gt;&lt;span class="hljs-title"&gt;static&lt;/span&gt;&lt;span class="hljs-title"&gt;class&lt;/span&gt;&lt;span class="hljs-title"&gt;JettyWebServerFactoryCustomizerConfiguration&lt;/span&gt; &lt;/span&gt;{

    &lt;span class="hljs-meta"&gt;@Bean&lt;/span&gt;
    &lt;span class="hljs-function"&gt;&lt;span class="hljs-keyword"&gt;public&lt;/span&gt; JettyWebServerFactoryCustomizer&lt;span class="hljs-title"&gt;jettyWebServerFactoryCustomizer&lt;/span&gt;&lt;span class="hljs-params"&gt;(Environment environment,
            ServerProperties serverProperties)&lt;/span&gt; &lt;/span&gt;{
        &lt;span class="hljs-keyword"&gt;return&lt;/span&gt;&lt;span class="hljs-keyword"&gt;new&lt;/span&gt; JettyWebServerFactoryCustomizer(environment, serverProperties);
    }

}
&lt;span class="hljs-comment"&gt;// 생략&lt;/span&gt;
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%40Conditional">@Conditional</h2>
<ul>
<li>Spring Framework 4.0 부터 제공</li>
<li>설정된 모든 Condition 인터페이스의 조건이 TRUE 인 경우 동작</li>
</ul>
<h3 id="Conditional-%EC%95%A0%EB%84%88%ED%85%8C%EC%9D%B4%EC%85%98">Conditional 애너테이션</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Retention</span>(RetentionPolicy.RUNTIME)
<span class="hljs-meta">@Target</span>({ElementType.TYPE, ElementType.METHOD})
<span class="hljs-keyword">public</span><span class="hljs-meta">@interface</span> Conditional {
 <span class="hljs-comment">/**
  * All {<span class="hljs-doctag">@link</span> Condition}s that must {<span class="hljs-doctag">@linkplain</span> Condition#matches match}
  * in order for the component to be registered.
  */</span>
  Class? extends Condition[] value();
}
</code></pre>
<h2 id="Condition.java">Condition.java</h2>
<ul>
<li>matches 메소드의 반환 값이 true 인 경우, 동작</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">interface</span><span class="hljs-title">Condition</span> </span>{
<p><span class="hljs-function"><span class="hljs-keyword">boolean</span><span class="hljs-title">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span></span>;</p>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%40ConditionalOnXXX-(1)">@ConditionalOnXXX (1)</h2>
<ul>
<li>spring-boot 가 제공하는 @Conditional 의 확장</li>
</ul>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>프로젝트가 웹 애플리케이션이면 설정 동작</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>해당 Bean 이 Spring Context 에 존재하면 동작</td>
<td>Auto configuration only</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>해당 Bean 이 Spring Context 에 존재하지 않으면 동작</td>
<td>Auto configuration only</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>해당 클래스가 존재하면 자동설정 등록</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>해당 클래스가 존재하지 않으면 자동설정 등록</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="%40ConditionalOnXXX-(2)">@ConditionalOnXXX (2)</h2>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>@ConditionalOnResource</td>
<td>자원이(file 등) 존재하면 동작</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>프로퍼티가 존재하면 동작</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnJava</td>
<td>JVM 버전에 따라 동작여부 결정</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnWarDeployment</td>
<td>전통적인 war 배포 방식에서만 동작</td>
<td>-</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>SpEL 의 결과에 따라 동작여부 결정</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="%40ConditionalOnBean">@ConditionalOnBean</h2>
<ul>
<li>Bean 이 이미 설정된 경우에 동작</li>
<li>MyService 타입의 Bean 이 BeanFactory 에 이미 등록된 경우에 동작한다.</li>
<li>Configuration 이 AutoConfiguration에 등록된 경우에 사용할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyAutoConfiguration</span> </span>{
<pre><code>&lt;span class="hljs-meta"&gt;@ConditionalOnBean&lt;/span&gt;
&lt;span class="hljs-meta"&gt;@Bean&lt;/span&gt;
&lt;span class="hljs-function"&gt;&lt;span class="hljs-keyword"&gt;public&lt;/span&gt; MyService&lt;span class="hljs-title"&gt;myService&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt; &lt;/span&gt;{
       ...
   }
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%40ConditionalOnMissingBean">@ConditionalOnMissingBean</h2>
<ul>
<li>BeanFactory에 Bean이 설정되지 않은 경우에 동작</li>
<li>MyService 타입의 Bean이 BeanFactory에 등록되지 않은 경우에 동작한다.</li>
<li>Configuration 이 AutoConfiguration에 등록된 경우에 사용할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java">  <span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyAutoConfiguration</span> </span>{
<pre><code>&lt;span class="hljs-meta"&gt;@ConditionalOnMissingBean&lt;/span&gt;
&lt;span class="hljs-meta"&gt;@Bean&lt;/span&gt;
&lt;span class="hljs-function"&gt;&lt;span class="hljs-keyword"&gt;public&lt;/span&gt; MyService&lt;span class="hljs-title"&gt;myService&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt; &lt;/span&gt;{
       ...
   }
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426510474035662931" target="">@Condition, @ConditionalOnXXX 사용하기</a></li>
</ul>
<h2 id="Externalized-Configuration">Externalized Configuration</h2>
<ul>
<li>spring-boot는 같은 소스코드로 여러 환경에서 동작할 수 있도록 외부화 설정을 제공한다.</li>
<li><code data-backticks="1">java properties, YAML, 환경변수, 실행 인자</code>로 설정 가능</li>
<li>전체 프로젝트의 설정은 .properties, .yaml 중 하나만 사용하는 것을 권장</li>
<li>같은 곳에 application.propreties, application.yaml 이 동시에 존재하면 application.propreties 가 우선함</li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%ED%8F%AC%ED%8A%B8-%EB%B3%80%EA%B2%BD">[시연] 포트 변경</h2>
<h3 id="%EB%AA%A9%ED%91%9C">목표</h3>
<ul>
<li>학생정보 시스템의 서비스 포트를 8080에서 8888로 변경한다.</li>
</ul>
<h3 id="%EB%B0%A9%EB%B2%95">방법</h3>
<ul>
<li>application.properties</li>
<li>환경변수</li>
<li>실행 명령어 인자 (Command Line argument)</li>
</ul>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%ED%8F%AC%ED%8A%B8-%EB%B3%80%EA%B2%BD">[시연] 포트 변경</h2>
<h3 id="application.properties">application.properties</h3>
<pre><code>server.port=8888
</code></pre>
<h3 id="%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98">환경변수</h3>
<pre><code>$ SERVER_PORT=8888 java –jar target/student.jar 
</code><p><code></code></p></pre><p></p>
<h3 id="%EC%8B%A4%ED%96%89-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%9D%B8%EC%9E%90-(Command-Line-argument)">실행 명령어 인자 (Command Line argument)</h3>
<pre><code>$ java –jar target/student.jar --server.port=8888
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%ED%8F%AC%ED%8A%B8-%EB%B3%80%EA%B2%BD">[시연] 포트 변경</h2>
<ul>
<li>spring-boot가 제공하는 @ConfigurationProperties 바인딩으로 동작</li>
<li>spring-boot-autocofiguration.jar:org.springframework.boot.ServerProperties 에서 @ConfigurationProperties 바인딩 제공</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3426488940306770061/attach-files/3426515695864235795" alt="image.png"></p>
<h2 id="Externalized-Configuration-example">Externalized Configuration example</h2>
<h3 id="java-property-(application.properties)">java property (application.properties)</h3>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">nhn.student.name</span>=<span class="hljs-string">zbum</span>
</code></pre>
<h3 id="YAML-(application.yaml)">YAML (application.yaml)</h3>
<pre class="lang-yaml"><code data-language="yaml"><span class="hljs-attr">nhn:</span>
<span class="hljs-attr">student:</span>
<span class="hljs-attr">name:</span><span class="hljs-string">zbum</span>
</code><p><code data-language="yaml"></code></p></pre><p></p>
<h2 id="Externalized-Configuration">Externalized Configuration</h2>
<ul>
<li>Spring Boot 는 설정값을 바인딩 하기 위한 2가지 방법을 제공합니다.</li>
</ul>
<h3 id="%40Value-%EB%B0%94%EC%9D%B8%EB%94%A9">@Value 바인딩</h3>
<h3 id="%40ConfigurationProperties-%EB%B0%94%EC%9D%B8%EB%94%A9">@ConfigurationProperties 바인딩</h3>
<h2 id="%40Value-%EB%B0%94%EC%9D%B8%EB%94%A9">@Value 바인딩</h2>
<ul>
<li>속성값(properties)을 @Value 애너테이션으로 바인딩하여 사용</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyBean</span> </span>{ 
<p><span class="hljs-meta">@Value</span>(<span class="hljs-string">"${nhn.student.name}"</span>)
<span class="hljs-keyword">private</span> String name;</p>
</code><p><code data-language="java"><span class="hljs-comment">// ... </span>
}
</code></p></pre><p></p>
<h2 id="%40ConfigurationProperties-%EB%B0%94%EC%9D%B8%EB%94%A9">@ConfigurationProperties 바인딩</h2>
<ul>
<li>속성값(properties)을 @ConfigurationProperties로 바인딩하여 사용</li>
<li>@ConfigurationProperties 로 설정된 클래스는 Dependency Injection으로 참조하여 사용</li>
</ul>
<pre class="lang-java"><code data-language="java">@ConfigurationProperties(”nhn.student")
public class StudentProperties {
private String name;
// getters / setters...
}
</code></pre>
<h2 id="Externalized-Configuration-%EC%9E%90%EB%8F%99%EC%99%84%EC%84%B1">Externalized Configuration 자동완성</h2>
<ul>
<li>configuration metadata를 작성하면 IDE에서 “자동 완성” 기능을 사용할 수 있다.</li>
<li>spring-boot-configuration-processor 를 의존성에 설정하면 configuration metadata 를 자동 생성한다.</li>
</ul>
<h3 id="maven">maven</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag"><!--span class="hljs-name"-->optional</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code></pre>
<h3 id="gradle">gradle</h3>
<pre><code>dependencies {
 annotationProcessor "org.springframework.boot:spring-boot-configuration-processor" 
}
</code></pre>
<h2 id="%40ConfigurationProperties%EC%9D%98-Relaxed-Binding">@ConfigurationProperties의 Relaxed Binding</h2>
<ul>
<li>속성값을 @ConfigurationProperties빈에 바인딩하기 위해 Relaxed Binding 을 사용하기 때문에 이름이 정확히 일치할 필요는 없음</li>
<li>@Value 를 사용한 경우, Relaxed Binding 을 지원하지 않음</li>
</ul>
<h3 id="ConfigurationProperties-%EA%B5%AC%ED%98%84%EC%98%88">ConfigurationProperties 구현예</h3>
<pre class="lang-java"><code data-language="java">@ConfigurationProperties(”nhn-academy.student")
public class StudentProperties {
private String firstName;
// getters / setters...
}
</code></pre>
<h3 id="%EB%B0%94%EC%9D%B8%EB%94%A9-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%86%8D%EC%84%B1">바인딩 가능한 속성</h3>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>nhn-academy.student.first-name</td>
<td>권장</td>
<td></td>
</tr>
<tr>
<td>nhnAcademy.student.firstName</td>
<td>카멜케이스 표현</td>
<td></td>
</tr>
<tr>
<td>nhn_academy.student.first_name</td>
<td>언더스코어 표현</td>
<td></td>
</tr>
<tr>
<td>NHNACADEMY_STUDENT_FIRSTNAME</td>
<td>대문자 형식 (시스템 환경변수에 권장)</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="%40ConfigurationProperties-%ED%99%9C%EC%84%B1%ED%99%94">@ConfigurationProperties 활성화</h2>
<ul>
<li>@ConfurationProperties 를 활성화 하여 빈으로 등록해야 사용가능</li>
</ul>
<h3 id="%40ConfigurationPropertiesScan">@ConfigurationPropertiesScan</h3>
<ul>
<li>@ConfurationProperties 는 @ConfigurationPropertiesScan  사용하여 Bean으로 활성화 해야 함</li>
<li>설정한 클래스의 base package 하위의 모든 @ConfurationProperties 을 스캔</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@ConfigurationPropertiesScan</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentApplication</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">args</span>)</span>;
    }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h3 id="%40EnableConfigurationProperties">@EnableConfigurationProperties</h3>
<ul>
<li>@ConfurationProperties 는 @EnableConfigurationProperties 를 사용하여 Bean으로 활성화 해야 함</li>
<li>value 에 지정한 ConfigurationProperties 클래스를 Bean 으로 활성화</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableConfigurationProperties</span>(value= SystemNameProperties<span class="hljs-class">.<span class="hljs-keyword">class</span>) 
<span class="hljs-title">public</span><span class="hljs-title">class</span><span class="hljs-title">StudentApplication</span> </span>{
   <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">static</span><span class="hljs-keyword">void</span><span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(StudentApplication<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">args</span>)</span>;
    }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="spring-profile">spring profile</h2>
<ul>
<li>프로필 지정 설정파일은 spring.profiles.active 인자로 로딩 여부가 결정된다.</li>
<li>만약, prod 프로파일을 지정했다면, application.properties 와 application-prod.properties 를 모두 로딩한다.</li>
</ul>
<pre><code>$ java –jar target/student.jar --spring.profiles.active=prod
</code></pre>
<h2 id="Externalized-Configuration-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84">Externalized Configuration 우선순위</h2>
<ul>
<li>spring-boot 는 다음 순서로 설정을 읽어 들인다. 중복되는 경우, 덮어쓰게 된다(override)</li>
</ul>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>application.properties</td>
<td>application.properties 내의 설정, 프로파일에 따라 순위 변경</td>
<td></td>
</tr>
<tr>
<td>OS 환경 변수</td>
<td>OS 환경 변수</td>
<td></td>
</tr>
<tr>
<td>SPRING_APPLICATION_JSON</td>
<td>json 형식의 환경 변수</td>
<td></td>
</tr>
<tr>
<td>실행 명령어와 함께 전달된 인자</td>
<td>java –jar student.jar --server.port=9999</td>
<td></td>
</tr>
<tr>
<td>@TestPropertiesSource</td>
<td>테스트 코드에 포함된 애너테이션</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="Application-Properties-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84">Application Properties 우선순위</h2>
<ul>
<li>application.properties 는 다음의 순서로 설정을 읽어 들인다.</li>
<li>실행 인자로 제공하는 spring.profiles.active 설정으로 application-{profile}.properties 를 사용할 것인지 결정한다.</li>
<li>중복되는 경우, 덮어쓰게 된다(override)</li>
</ul>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>application.properties (inside jar)</td>
<td>Jar 파일 내의 application.properties</td>
<td></td>
</tr>
<tr>
<td>application-{profile}.properties (inside jar)</td>
<td>Jar 파일 내의 application-{profile}.properties</td>
<td></td>
</tr>
<tr>
<td>application.properties (outside jar)</td>
<td>Jar 파일 밖의 application-{profile}.properties</td>
<td></td>
</tr>
<tr>
<td>application-{profile}.properties(outside jar)</td>
<td>Jar 파일 밖의 application-{profile}.properties</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="Application-Properties-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84">Application Properties 우선순위</h2>
<ul>
<li>application.properties 위치를 찾아가는 순서에 따라 최종 설정이 결정된다.</li>
</ul>
<table>
<thead>
<tr>
<th>구분</th>
<th>내용</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>Classpath root</td>
<td>classpath:/application.properties</td>
<td></td>
</tr>
<tr>
<td>Classpath 의 /config 패키지</td>
<td>classpath:/config/application.properties</td>
<td></td>
</tr>
<tr>
<td>실행 디렉토리</td>
<td>${current directory}/application.properties</td>
<td></td>
</tr>
<tr>
<td>실행 디렉토리의 config 디렉토리</td>
<td>${current directory}/config/application.properties</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-Account-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%99%B8%EB%B6%80%ED%99%94-%EC%84%A4%EC%A0%95">[실습] Account 시스템 외부화 설정</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426528216548607248" target="">Account 시스템 외부화 설정</a></li>
</ul>
<h2 id="%5BQuiz%5D">[Quiz]</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426530153410528476" target="">[quiz] Auto Configuration &amp; Externalized Configuration</a></li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 01:26</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">@Condition, @ConditionalOnXXX 사용하기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>spring boot 의 auto configuration 의 핵식 애너테이션인 @ConditionalOnXXX 을 사용하여 제공하는 코드의 모든 Unit Test가 통과하도록 코드를 수정한다.</li>
</ul>
<h2 id="%EC%9E%91%EC%97%85-%EB%B0%A9%EB%B2%95">작업 방법</h2>
<ul>
<li>
<p>다음의 url 에서 소스코드를 clone 합니다.</p>
<ul>
<li><a href="https://github.com/edu-springboot/edu-springboot-conditional-workshop.git" target="_blank">https://github.com/edu-springboot/edu-springboot-conditional-workshop.git</a></li>
</ul>
</li>
<li>
<p>ConditionalDemoConfig.java 및 기타 소스코드를 수정합니다.</p>
</li>
<li>
<p>모든 테스트 케이스를 PASS 하면 성공!!</p>
</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 13:28</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Account 시스템 외부화 설정</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>
<p>application의 버전 정보를 제공하는 API를 작성.</p>
</li>
<li>
<p>@ConfigurationProperties 를 사용합니다.</p>
</li>
<li>
<p>com.nhn.account.system.version 속성을 사용. ( prefix="com.nhn.account.system")</p>
</li>
<li>
<p>개발 url : GET /system/version</p>
</li>
<li>
<p>결과 : {"version": "1.0.0"}</p>
</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 14:15</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">7. Developer Tools</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="spring-boot-%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC">spring-boot 개발자 도구</h2>
<h3 id="spring-boot-%EB%8A%94-%EA%B0%9C%EB%B0%9C%EC%9E%90-%ED%8E%B8%EC%9D%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%ED%88%B4%EC%9D%84-%EC%A0%9C%EA%B3%B5%ED%95%9C%EB%8B%A4.">spring-boot 는 개발자 편의를 위한 툴을 제공한다.</h3>
<ul>
<li>자동재시작</li>
<li>라이브 리로드</li>
<li>전역 설정</li>
<li>원격 애플리케이션</li>
</ul>
<h2 id="spring-boot-%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC-%ED%99%9C%EC%84%B1%ED%99%94">spring-boot 개발자 도구 활성화</h2>
<ul>
<li>spring-boot-devtools Module 의존성을 추가하여 개발자도구 활성화</li>
</ul>
<h3 id="maven">maven</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag"><!--span class="hljs-name"-->optional</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependencies</span>&gt;
</code></pre>
<h3 id="gradle">gradle</h3>
<pre class="lang-groovy"><code data-language="groovy">dependencies {
    developmentOnly(<span class="hljs-string">"org.springframework.boot:spring-boot-devtools"</span>)
}
</code></pre>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC-%EB%B9%84%ED%99%9C%EC%84%B1%ED%99%94">개발자 도구 비활성화</h2>
<ul>
<li>java -jar&nbsp;로 실행하면 상용(Production) 환경으로 판단하고 비활성화됨</li>
<li>서블릿 컨테이너에서 동작하면 자동 비활성화 되지 않기 때문에&nbsp;-Dspring.devtools.restart.enabled=false&nbsp;설정 필요</li>
<li>maven plugin의 repackaged 로 생성된 바이너리파일에는 자동으로 devtools가 제거됨</li>
</ul>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC%EC%99%80-%EA%B0%9C%EC%8B%9C(cache)">개발자 도구와 개시(cache)</h2>
<ul>
<li>개발자 도구는 뷰 템플릿, 정적 리소스 캐시(cache) 를 자동으로 비활성화 함</li>
</ul>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EC%9E%90%EB%8F%99-%EC%9E%AC%EC%8B%9C%EC%9E%91">개발자 도구 - 자동 재시작</h2>
<ul>
<li>
<p>기본적으로 애플리케이션의 클래스 패스 내&nbsp;파일이 변경되면 자동으로 재시작</p>
</li>
<li>
<p>정적 자원이나 뷰 템플릿은 재시작하지 않음</p>
</li>
<li>
<p>IDE에서 코드 변경 후 잦은 테스트를 할 경우 유용함</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>IDE</th>
<th>자동 재시작 실행 방법</th>
</tr>
</thead>
<tbody>
<tr>
<td>Eclipse</td>
<td>수정한 파일을 저장하면 바로 실행</td>
</tr>
<tr>
<td>IntelliJ IDEA</td>
<td>Build -&gt; Build Project (Ctrl + F9 , Cmd + F9)</td>
</tr>
<tr>
<td>maven</td>
<td>$ mvn compile</td>
</tr>
<tr>
<td>gradle</td>
<td>$ gradle build</td>
</tr>
</tbody>
</table>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3426999966574964703" target="">개발자 도구 테스트(자동 재시작)</a></li>
</ul>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EB%A6%AC%EB%A1%9C%EB%93%9C">개발자 도구 - 라이브 리로드</h2>
<ul>
<li>
<p>spring-boot-devtools&nbsp;에 라이브 리로드 서버가 포함</p>
</li>
<li>
<p>자동 재시작(Automatic Restart)&nbsp;될 시 브라우저 자동 새로고침!!</p>
</li>
<li>
<p>지원 브라우저 : Chrome, Firefox, Safari</p>
</li>
<li>
<p>브라우저에 확장팩을 설치해야함</p>
<ul>
<li><a href="http://livereload.com/extensions/" target="_blank">http://livereload.com/extensions/</a></li>
</ul>
</li>
<li>
<p><a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank">https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei</a></p>
</li>
</ul>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427001975743300538" target="">개발자 도구 테스트(라이브 리로드)</a></li>
</ul>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EC%A0%84%EC%97%AD%EC%84%A4%EC%A0%95">개발자 도구 - 전역설정</h2>
<ul>
<li>
<p>$HOME/.config/spring-boot 디렉토리에 다음을 파일을 추가하여 개발자 도구 설정</p>
<ul>
<li>spring-boot-devtools.propreties</li>
<li>spring-boot-devtools.yaml</li>
<li>spring-boot-devtools.yml</li>
</ul>
</li>
<li>
<p>개발자 도구를 사용하는 모든 애플리케이션에 설정 적용</p>
</li>
<li>
<p>예) 자동 재시작 트리거 파일 전역설정</p>
</li>
</ul>
<pre><code>spring.devtools.restart.trigger-file=.reloadtrigger
</code></pre>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EC%9B%90%EA%B2%A9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98">개발자 도구 - 원격 애플리케이션</h2>
<ul>
<li>원격에서 동작하는 애플리케이션에서 개발자 도구의 자동 재시작 기능을 사용할 수 있음</li>
<li>신뢰할 수 있는 네트워크(trusted network)나 SSL 통신에서 사용해야함</li>
<li>활성화하려면 빌드가 개발자 도구를 포함하고, spring.devtools.remote.secret 속성을 설정</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">excludeDevtools</span>&gt;</span>false<span class="hljs-tag"><!--span class="hljs-name"-->excludeDevtools</span>&gt;
        <span class="hljs-tag"><!--span class="hljs-name"-->configuration</span>&gt;
    <span class="hljs-tag"><!--span class="hljs-name"-->plugin</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->plugins</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->build</span>&gt;
</code></pre>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EC%9B%90%EA%B2%A9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98">개발자 도구 - 원격 애플리케이션</h2>
<ul>
<li>IDE 에서 다음의 순서로 설정
<ul>
<li><code data-backticks="1">+</code>버튼 : application 선택</li>
<li>실행 main 클래스 : org.springframework.boot.devtools.RemoteSpringApplication</li>
<li>program 인자 : 서비스 주소 예) <a href="http://localhost:8080" target="_blank">http://localhost:8080</a></li>
</ul>
</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3290220000951048337/attach-files/3427005227386809318" alt="Inline-image-2022-12-12 17.47.37.769.png"></p>
<h2 id="%EA%B0%9C%EB%B0%9C%EC%9E%90-%EB%8F%84%EA%B5%AC---%EC%9B%90%EA%B2%A9-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8">개발자 도구 - 원격 애플리케이션 클라이언트</h2>
<ul>
<li>IDE 설정을 실행</li>
<li>IDE 에서 클래스 수정 및 빌드시 원격 서버로 전송 및 자동 재시작 동작</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3290220000951048337/attach-files/3427012919538172657" alt="Inline-image-2022-12-12 18.02.54.825.png"></p>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 17:39</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">개발자 도구 테스트(자동 재시작)</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Account 서비스가 spring-boot  developer tools 의 자동 재시작이 동작하도록 수정하세요.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EC%9E%91">예상시작</h2>
<ul>
<li>10 분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 17:42</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">개발자 도구 테스트(라이브 리로드)</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>제공하는 코드가 spring-boot  developer tools 의 라이브 리로드가 동작하도록 플러그인을 설치하고 테스트 하세요.</li>
</ul>
<h2 id="%EC%A4%80%EB%B9%84%EC%82%AC%ED%95%AD">준비사항</h2>
<ul>
<li>live reload extension download
<ul>
<li><a href="http://livereload.com/extensions/" target="_blank">http://livereload.com/extensions/</a></li>
</ul>
</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>5분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 01:57</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">8. Spring Boot Actuator</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Spring-Boot-Actuator">Spring Boot Actuator</h2>
<ul>
<li>상용화 준비(Production-Ready)기능을 위한 Spring Boot 모듈</li>
<li>실행 중인 애플리케이션을 관리하고 정보를 수집하고 상태를 점검하는 진입점 제공</li>
<li>HTTP 또는 JMX 를 사용할 수 있음.</li>
</ul>
<h2 id="Actuator-%EC%84%A4%EC%B9%98">Actuator 설치</h2>
<h3 id="maven">maven</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt; 
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt; 
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt; 
<span class="hljs-tag"><!--span class="hljs-name"-->dependencies</span>&gt;
</code></pre>
<h3 id="gradle">gradle</h3>
<pre class="lang-xml"><code data-language="xml">dependencies { 
    compile("org.springframework.boot:spring-boot-starter-actuator") 
}
</code></pre>
<h2 id="Spring-Boot-Actuator---Endpoint">Spring Boot Actuator - Endpoint</h2>
<ul>
<li>Actuator 엔드포인트로 spring boot 애플리케이션의 <code data-backticks="1">모니터링</code> 및 <code data-backticks="1">상호작용</code> 가능</li>
<li>스프링 부트는 다양한 빌트인 엔드포인트를 제공</li>
</ul>
<table>
<thead>
<tr>
<th>ID</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>auditevent</td>
<td>응용시스템의 모든 감사 이벤트 목록을 제공, AuditEventRepository 빈 필요</td>
</tr>
<tr>
<td>beans</td>
<td>애플리케이션의 모든 빈의 목록을 제공</td>
</tr>
<tr>
<td>caches</td>
<td>가능한 캐시를 노출</td>
</tr>
<tr>
<td>conditions</td>
<td>설정 및 자동설정 클래스를 평가한 조건의 목록과 조건의 부합 여부에 대한 이유를 제공</td>
</tr>
<tr>
<td>configprops</td>
<td>값이 설정된 모든 @ConfigurationProperties 의 목록을 제공</td>
</tr>
<tr>
<td>env</td>
<td>스프링의 ConfigurableEnvironment 의 속성을 제공</td>
</tr>
<tr>
<td>health</td>
<td>애플리케이션의 health 정보를 제공</td>
</tr>
<tr>
<td>httptrace</td>
<td>http 의 요청,응답 내용을 표시, (기본 설정으로 100개 까지만 제공, HttpTraceRepository 빈 필요)</td>
</tr>
<tr>
<td>info</td>
<td>애플리케이션의 정보 제공</td>
</tr>
<tr>
<td>shutdown</td>
<td>애플리케이션의 셧다운 명령</td>
</tr>
<tr>
<td>startup</td>
<td>startup 단계 데이터를 제공 (SpringApplication 을 BufferingApplicationStartup으로 설정 필요)</td>
</tr>
<tr>
<td>threaddump</td>
<td>쓰레드 덤프를 실행</td>
</tr>
</tbody>
</table>
<h2 id="Spring-Boot-Actuator---Endpoint-%ED%99%9C%EC%84%B1%ED%99%94">Spring Boot Actuator - Endpoint 활성화</h2>
<ul>
<li>기본설정으로 shutdown 을 제외한 모든 end point 는 활성화</li>
<li>management.endpoint.{id}.enabled 속성으로 활성화/비활성화 설정</li>
</ul>
<h3 id="shutdown-endpoint-%ED%99%9C%EC%84%B1%ED%99%94">shutdown endpoint 활성화</h3>
<pre><code>management.endpoint.shutdown.enabled=true
</code></pre><pre class="lang-yaml"><code data-language="yaml"><span class="hljs-attr">management:</span>
<span class="hljs-attr">endpoint:</span>
<span class="hljs-attr">shutdown:</span>
    <span class="hljs-attr">enabled:</span><span class="hljs-literal">true</span>
</code></pre>
<h3 id="shutdown-endpoint-Opt-in-%EC%84%A4%EC%A0%95">shutdown endpoint Opt-in 설정</h3>
<pre><code>management.endpoints.enabled-by-default=false ## 모두 비활성화 
management.endpoint.info.enabled=true         ## info만 활성화
</code></pre><pre class="lang-yaml"><code data-language="yaml"><span class="hljs-attr">management:</span>
<span class="hljs-attr">endpoints:</span>
<span class="hljs-attr">enabled-by-default:</span><span class="hljs-literal">false</span>      <span class="hljs-comment">## 모두 비활성화</span>
<span class="hljs-attr">endpoint:</span>
<span class="hljs-attr">info:</span>
    <span class="hljs-attr">enabled:</span><span class="hljs-literal">true</span>                <span class="hljs-comment">## info만 활성화</span>
</code><p><code data-language="yaml"></code></p></pre><p></p>
<h2 id="Spring-Boot-Actuator---Endpoint-%EB%85%B8%EC%B6%9C%EB%B0%A9%EC%8B%9D(JMX%2C-Web)-%EC%84%A4%EC%A0%95">Spring Boot Actuator - Endpoint 노출방식(JMX, Web) 설정</h2>
<ul>
<li>acutator 는 민감한 정보를 노출하기 때문에 노출방식을 신중하게 설정해야 함</li>
<li>Web은 health Endpoint 만 제공함</li>
</ul>
<table>
<thead>
<tr>
<th>ID</th>
<th>JMX</th>
<th>Web</th>
</tr>
</thead>
<tbody>
<tr>
<td>auditevents</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>beans</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>caches</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>conditions</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>configprops</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>env</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>flyway</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>health</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>heapdump</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>httptrace</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>info</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>integrationgraph</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>jolokia</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>logfile</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>loggers</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>liquibase</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>metrics</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>mappings</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>prometheus</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>quartz</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>scheduledtasks</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>sessions</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>shutdown</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>startup</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>threaddump</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<h2 id="Spring-Boot-Actuator---Endpoint-%EB%85%B8%EC%B6%9C%EB%B0%A9%EC%8B%9D(JMX%2C-Web)-%EC%84%A4%EC%A0%95">Spring Boot Actuator - Endpoint 노출방식(JMX, Web) 설정</h2>
<ul>
<li>JMX는 모든 Endpoint 를 노출하고, Web은 health 만 노출하는 것이 기본 설정</li>
<li>include, exclude 프로퍼티로 노출방식을 활성화 할 수 있음</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>기본설정</th>
</tr>
</thead>
<tbody>
<tr>
<td>management.endpoints.jmx.exposure.exclude</td>
<td></td>
</tr>
<tr>
<td>management.endpoints.jmx.exposure.include</td>
<td>*</td>
</tr>
<tr>
<td>management.endpoints.web.exposure.exclude</td>
<td></td>
</tr>
<tr>
<td>management.endpoints.web.exposure.include</td>
<td>health</td>
</tr>
</tbody>
</table>
<h2 id="Spring-Boot-Actuator---Endpoint-%EB%85%B8%EC%B6%9C%EB%B0%A9%EC%8B%9D(JMX%2C-Web)-%EC%84%A4%EC%A0%95">Spring Boot Actuator - Endpoint 노출방식(JMX, Web) 설정</h2>
<ul>
<li>exclude 설정은 include 설정보다 우선한다.</li>
<li>예) health, info 만 JMX에서 노출</li>
</ul>
<pre><code>management.endpoints.jmx.exposure.include=health,info
</code></pre>
<ul>
<li>예) env, bean 를 제외한 모든 Endpoint를 web에서 노출</li>
</ul>
<pre><code>management.endpoints.web.exposure.include=*
management.endpoints.web.exposure.exclude=env,bean
</code></pre>
<h2 id="Spring-Boot-Actuator-%EB%B3%B4%EC%95%88">Spring Boot Actuator 보안</h2>
<h3 id="Spring-Security-%EC%84%A4%EC%A0%95">Spring Security 설정</h3>
<ul>
<li>spring-security가 클래스패스에 존재하면 health를 제외한 모든 Endpoint는 기본 자동설정기능에 의해 보호된다.</li>
<li>WebSecurityConfigurerAdapter 또는 SecurityFilterChain 빈을 설정하여 기본 자동설정을 제거하고 보안설정을 정의할 수 있다.</li>
</ul>
<pre><code>@Configuration(proxyBeanMethods = false)
public class MySecurityConfiguration {
<pre><code>@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http.securityMatcher(EndpointRequest.toAnyEndpoint());
    http.authorizeHttpRequests((requests) -&amp;gt; requests.anyRequest().permitAll());
    return http.build();
}
</code></pre>
</code><p><code>}
</code></p></pre><p></p>
<h2 id="EndPoint-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98">EndPoint 사용자 정의</h2>
<ul>
<li>다음의 애너테이션을 사용하여 사용자정의 EndPoint 를 노출할 수 있다.</li>
</ul>
<h3 id="%40Endpoint%3A-Endpoint%EB%A1%9C-%EB%85%B8%EC%B6%9C%ED%95%A0-%EB%B9%88%EC%97%90-%EC%84%A4%EC%A0%95">@Endpoint: Endpoint로 노출할 빈에 설정</h3>
<ul>
<li>@WebEndpoint: HTTP Endpoint로만 노출할 때</li>
<li>@JmxEndpoint: JMX Endpoint로만 노출할 때</li>
</ul>
<h3 id="%40ReadOperation%2C-%40WriteOperation%2C-%40DeleteOperation">@ReadOperation, @WriteOperation, @DeleteOperation</h3>
<ul>
<li>HTTP 의 GET, POST, DELETE 메소드</li>
</ul>
<h3 id="%40EndpointWebExtension%2C-%40EndpointJmxExtension">@EndpointWebExtension, @EndpointJmxExtension</h3>
<ul>
<li>이미 존재하는 Endpoint에 기술 전용 오퍼레이션을 추가할 때 사용</li>
</ul>
<h2 id="EndPoint-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%EC%98%88">EndPoint 사용자 정의 예</h2>
<ul>
<li>Counter를 관리하는 Endpoint 예</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Endpoint</span>(id =<span class="hljs-string">"counter"</span>)
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">CounterEndpoint</span> </span>{
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> AtomicLong counter =<span class="hljs-keyword">new</span> AtomicLong();
<p><span class="hljs-comment">// curl -XGET http://localhost:8080/actuator/counter </span>
<span class="hljs-meta">@ReadOperation</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Long<span class="hljs-title">read</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">return</span> counter.get();
}</p>
<p><span class="hljs-comment">// curl –X POST -H"Content-Type: application/json" -d'{"delta":100}'  http://localhost:8080/actuator/counter </span>
<span class="hljs-meta">@WriteOperation</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Long<span class="hljs-title">increment</span><span class="hljs-params">(@Nullable Long delta)</span> </span>{
<span class="hljs-keyword">if</span> (delta ==<span class="hljs-keyword">null</span>) {
<span class="hljs-keyword">return</span> counter.incrementAndGet();
}
<span class="hljs-keyword">return</span> counter.addAndGet(delta );
}</p>
</code><p><code data-language="java"><span class="hljs-comment">// curl –X DELETE http://localhost:8080/actuator/counter </span>
<span class="hljs-meta">@DeleteOperation</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Long<span class="hljs-title">reset</span><span class="hljs-params">()</span> </span>{
counter.set(<span class="hljs-number">0</span>);
<span class="hljs-keyword">return</span> counter.get();
}
}
</code></p></pre><p></p>
<h2 id="EndPoint-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98">EndPoint 사용자 정의</h2>
<ul>
<li>이미 존재하는 Endpoint에 특정 기술에서 동작하는 Endpoint를 추가하고 싶으면 @EndpointWebExtension, @EndpointJmxExtension을 사용한다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@EndpointWebExtension</span>(endpoint = CounterEndpoint<span class="hljs-class">.<span class="hljs-keyword">class</span>)
@<span class="hljs-title">Component</span>
<span class="hljs-title">public</span><span class="hljs-title">class</span><span class="hljs-title">CounterWebEndPoint</span> </span>{
<span class="hljs-keyword">private</span><span class="hljs-keyword">final</span> CounterEndpoint target;
 <span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-title">CounterWebEndPoint</span><span class="hljs-params">(CounterEndpoint target)</span> </span>{
<span class="hljs-keyword">this</span>.target = target;
  }
 <span class="hljs-meta">@WriteOperation</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> WebEndpointResponse<long><span class="hljs-title">increment</span><span class="hljs-params">(@Nullable Long delta)</span> </long></span>{
<span class="hljs-keyword">return</span><span class="hljs-keyword">new</span> WebEndpointResponse&lt;&gt;(target.increment(delta));
  }
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427148596456384530" target="">Acutator EndPoint 추가 실습</a></li>
</ul>
<h2 id="Health-Endpoint">Health Endpoint</h2>
<ul>
<li>
<p>애플리케이션의 <code data-backticks="1">정상동작 정보</code>를 제공한다.</p>
</li>
<li>
<p>ApplicationContext 내의 HealthContributor 타입의 빈을 모두 활용해서 정보를 제공한다.</p>
</li>
<li>
<p>HealthContributor 는 HealthIndicator 나 CompositeHealthContributor의 형태로 사용</p>
<ul>
<li>HealthIndicator : 실제 Health 정보 제공</li>
<li>CompositeHealthIndicator : HealthContributor 들의 조합정보를 제공</li>
</ul>
</li>
<li>
<p><code data-backticks="1">management.endpoint.health.show-details=always</code> 를 설정하면 각각의 HealthContributor 상세 정보를 볼 수 있다.</p>
</li>
</ul>
<pre><code>$ http://localhost:8080/actuator/health
</code></pre>
<h2 id="Spring-Boot%EC%9D%98-%EA%B8%B0%EB%B3%B8-HealthIndicators">Spring Boot의 기본 HealthIndicators</h2>
<ul>
<li>Auto Configuration에 의해서 동작여부 결정</li>
</ul>
<table>
<thead>
<tr>
<th>이름</th>
<th>기본설정</th>
</tr>
</thead>
<tbody>
<tr>
<td>CassandraDriverHealthIndicator</td>
<td>카산드라 데이터베이스 상태 체크</td>
</tr>
<tr>
<td>CouchbaseHealthIndicator</td>
<td>카우치베이스 클러스터 상태 체크</td>
</tr>
<tr>
<td>DiskSpaceHealthIndicator</td>
<td>디스크 공간 체크</td>
</tr>
<tr>
<td>DataSourceHealthIndicator</td>
<td>DataSource에서 커넥션을 얻을 수 있는 지 체크</td>
</tr>
<tr>
<td>RedisHealthIndicator</td>
<td>레디스 서버의 상태 체크</td>
</tr>
</tbody>
</table>
<h2 id="Kubernetes-%EC%9A%A9-HealthIndicators">Kubernetes 용 HealthIndicators</h2>
<table>
<thead>
<tr>
<th>Key</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>livenessstate</td>
<td>LivenessStateHealthIndicator</td>
<td>"Liveness" 상태</td>
</tr>
<tr>
<td>readinessstate</td>
<td>ReadinessStateHealthIndicator</td>
<td>"Readiness" 상태</td>
</tr>
</tbody>
</table>
<h3 id="LivenessProbe">LivenessProbe</h3>
<ul>
<li>운영중에 Pod 의 LivenessProbe 을 점검하여 실패하면 Pod 삭제 후 다시 생성<br>
<img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3427019797123891927/attach-files/3427155888104992345" alt="Inline-image-2022-12-12 22.46.57.982.png"></li>
</ul>
<h3 id="ReadinessProbe">ReadinessProbe</h3>
<ul>
<li>운영 중에 Pod 의 ReadinessProbe 을 점검하여 서비스에서 제외한다.</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3427019797123891927/attach-files/3427157209082533797" alt="Inline-image-2022-12-12 22.49.35.487.png"></p>
<h2 id="%EC%BB%A4%EC%8A%A4%ED%85%80-HealthIndicator-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0">커스텀 HealthIndicator 작성하기</h2>
<ul>
<li>커스텀 health 정보를 제공하려면 HealthIndicator 인터페이스를 구현한다.</li>
<li>health() 메소드에서 Health 응답을 반환한다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyHealthIndicator</span><span class="hljs-keyword">implements</span><span class="hljs-title">HealthIndicator</span> </span>{
<p><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Health<span class="hljs-title">health</span><span class="hljs-params">()</span> </span>{
<span class="hljs-keyword">int</span> errorCode = check();
<span class="hljs-keyword">if</span> (errorCode !=<span class="hljs-number">0</span>) {
<span class="hljs-keyword">return</span> Health.down().withDetail(<span class="hljs-string">"Error Code"</span>, errorCode).build();
}
<span class="hljs-keyword">return</span> Health.up().build();
}</p>
<p><span class="hljs-function"><span class="hljs-keyword">private</span><span class="hljs-keyword">int</span><span class="hljs-title">check</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// perform some specific health check</span>
<span class="hljs-keyword">return</span> ...
}</p>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427163179742783124" target="">Actuator Custom HealthIndicator 작성하기</a></li>
</ul>
<h2 id="info-EndPoint">info EndPoint</h2>
<ul>
<li>애플리케이션의 정보를 제공한다.</li>
<li>ApplicationContext 내의 InfoContributor 타입의 빈을 모두 활용해서 정보를 제공한다.</li>
</ul>
<pre><code>http://localhost:8080/actuator/info
</code></pre>
<h2 id="info-EndPoint---EnvironmentInfoContributor">info EndPoint - EnvironmentInfoContributor</h2>
<ul>
<li>
<p>info.* 형식의 모든 환경변수 정보 제공 ( spring boot 2.6 이후 부터 기본 비활성화)</p>
</li>
<li>
<p>application.properties 설정 추가</p>
</li>
</ul>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">management.info.env.enabled</span>=<span class="hljs-string">true</span>
<span class="hljs-meta">info.edu.springboot.version</span>=<span class="hljs-string">10.1.1</span>
<span class="hljs-meta">info.edu.springboot.instructor</span>=<span class="hljs-string">manty</span>
</code></pre>
<ul>
<li>info endpoint 호출 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"edu"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"springboot"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"version"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"10.1.1"</span><span>,</span></div></span></span></span></li><li><span>"instructor"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"manty"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">},</span></div></span></span></span></li><li><span>"app"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"java"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"source"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"11"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="info-EndPoint---GitInfoContributor">info EndPoint - GitInfoContributor</h2>
<ul>
<li>클래스 패스상의 git.properties 정보 제공, 실행 중인 서비스의 git 정보 확인용</li>
<li>maven, gradle 설정 필요</li>
</ul>
<h3 id="maven-%EC%84%A4%EC%A0%95">maven 설정</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
    ...
<span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>pl.project13.maven<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>git-commit-id-plugin<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->plugin</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->plugins</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->build</span>&gt;
</code></pre>
<h3 id="gradle-%EC%84%A4%EC%A0%95">gradle 설정</h3>
<pre class="lang-groovy"><code data-language="groovy">plugins { 
      id<span class="hljs-string">"com.gorylenko.gradle-git-properties"</span> version<span class="hljs-string">"1.5.1"</span> 
}
</code></pre>
<ul>
<li>info endpoint 호출 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"git"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"branch"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"master"</span><span>,</span></div></span></span></span></li><li><span>"commit"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"id"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"077a397"</span><span>,</span></div></span></span></span></li><li><span>"time"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"2022-02-01T05:12:05Z"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="info-EndPoint---BuildInfoContributor">info EndPoint - BuildInfoContributor</h2>
<ul>
<li>클래스 패스의 META-INF/build-info.properties 파일 정보 제공</li>
<li>maven, gradle 설정 필요</li>
</ul>
<h3 id="maven-%EC%84%A4%EC%A0%95">maven 설정</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupid</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupid</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactid</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag"><!--span class="hljs-name"-->artifactid</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>build-info<span class="hljs-tag"><!--span class="hljs-name"-->goal</span>&gt;
    <span class="hljs-tag"><!--span class="hljs-name"-->goals</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->execution</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->executions</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->plugin</span>&gt;
</code><p><code data-language="xml"></code></p></pre><p></p>
<h3 id="gradle-%EC%84%A4%EC%A0%95">gradle 설정</h3>
<pre class="lang-groovy"><code data-language="groovy">springBoot {
     buildInfo() 
}
</code></pre>
<ul>
<li>info endpoint 호출 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"build"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"artifact"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"student"</span><span>,</span></div></span></span></span></li><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"student"</span><span>,</span></div></span></span></span></li><li><span>"time"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"2022-02-01T07:07:41.030Z"</span><span>,</span></div></span></span></span></li><li><span>"version"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"0.0.1-SNAPSHOT"</span><span>,</span></div></span></span></span></li><li><span>"group"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"com.nhn.edu.springboot"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="info-EndPoint---InfoContributor-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98">info EndPoint - InfoContributor 사용자 정의</h2>
<ul>
<li>InfoContributor 인터페이스의 구현체를 개발하여 빈으로 등록합니다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">ExampleInfoContributor</span><span class="hljs-keyword">implements</span><span class="hljs-title">InfoContributor</span> </span>{
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">void</span><span class="hljs-title">contribute</span><span class="hljs-params">(Info.Builder builder)</span> </span>{
        builder.withDetail(<span class="hljs-string">"example"</span>, Map.of(<span class="hljs-string">"key"</span>,<span class="hljs-string">"value"</span>));
    }
}
</code></pre>
<ul>
<li>사용자 정의 InfoContributor 호출 결과</li>
</ul>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"example"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"key"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"value"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427235589889114262" target="">Actuator Custom InfoContributor 작성하기</a></li>
</ul>
<h2 id="Endpoint-%EA%B2%BD%EB%A1%9C%EB%B3%80%EA%B2%BD">Endpoint 경로변경</h2>
<ul>
<li>Spring Boot Actuator 의 기본 경로는 /actuator 이다.</li>
<li>management.endpoints.web.base-path 속성을 변경하여 경로를 변경할 수 있다.</li>
</ul>
<h3 id="actuator-endpoint-%EA%B2%BD%EB%A1%9C%EB%B3%80%EA%B2%BD">actuator endpoint 경로변경</h3>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">management.endpoints.web.base-path</span>=<span class="hljs-string">/actuator2            # 2.x </span>
<span class="hljs-meta">management.context-path</span>=<span class="hljs-string">/actuator2                       # 1.x : Set /actuator</span>
</code></pre>
<h3 id="Endpoint-Port-%EB%B3%80%EA%B2%BD">Endpoint Port 변경</h3>
<ul>
<li>Spring Boot Actuator 의 기본 포트는 서비스 포트와 동일하다.</li>
<li>management.server.port 속성을 변경하여 포트를 변경할 수 있다.</li>
</ul>
<pre class="lang-properties"><code data-language="properties"><span class="hljs-meta">management.server.port</span>=<span class="hljs-string">8888</span>
</code></pre>
<h2 id="prometheus-Endpoint">prometheus Endpoint</h2>
<h3 id="prometheus">prometheus</h3>
<ul>
<li>prometheus(<a href="https://prometheus.io/" target="_blank">https://prometheus.io</a>&nbsp;라는 시계열 데이터베이스에 데이터를 제공</li>
<li>micrometer-registry-prometheus 라이브러리 의존성을 추가해야 함</li>
<li><a href="http://localhost:8080/actuator/prometheus" target="_blank">http://localhost:8080/actuator/prometheus</a>경로로 호출</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code></pre>
<h3 id="prometheus-%EC%84%A4%EC%B9%98">prometheus 설치</h3>
<ul>
<li>Docker 로 설치</li>
</ul>
<h3 id="start.sh"><a href="http://start.sh/" target="_blank">start.sh</a></h3>
<pre class="lang-bash"><code data-language="bash"><span class="hljs-meta">#!/bin/bash
</span>
docker run \
    --platform=linux/arm64 \
    -d \
    --name prometheus \
    -p 9090:9090 \
    -v $(<span class="hljs-built_in">pwd</span>)/config:/etc/prometheus \
    -v $(<span class="hljs-built_in">pwd</span>)/data:/prometheus:rw \
    prom/prometheus:v2.33.4
</code></pre>
<h3 id="stop.sh"><a href="http://stop.sh/" target="_blank">stop.sh</a></h3>
<pre class="lang-bash"><code data-language="bash"><span class="hljs-meta">#!/bin/bash
</span>
docker stop prometheus
docker rm prometheus
</code></pre>
<h3 id="config-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1">config 파일 생성</h3>
<ul>
<li>config/prometheus.yml 파일을 다음과 같이 생성합니다.</li>
</ul>
<pre class="lang-yaml"><code data-language="yaml"><span class="hljs-comment"># my global config</span>
<span class="hljs-attr">global:</span>
<span class="hljs-attr">scrape_interval:</span>    <span class="hljs-string">15s</span><span class="hljs-comment"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span>
<span class="hljs-attr">evaluation_interval:</span><span class="hljs-string">15s</span><span class="hljs-comment"># Evaluate rules every 15 seconds. The default is every 1 minute.</span>
<span class="hljs-comment"># scrape_timeout is set to the global default (10s).</span>
<p><span class="hljs-comment"># Alertmanager configuration</span>
<span class="hljs-attr">alerting:</span>
<span class="hljs-attr">alertmanagers:</span>
<span class="hljs-bullet">-</span><span class="hljs-attr">static_configs:</span>
<span class="hljs-bullet">-</span><span class="hljs-attr">targets:</span>
<span class="hljs-comment"># - alertmanager:9093</span></p>
<p><span class="hljs-comment"># Load rules once and periodically evaluate them according to the global 'evaluation_interval'.</span>
<span class="hljs-attr">rule_files:</span>
<span class="hljs-comment"># - "first_rules.yml"</span>
<span class="hljs-comment"># - "second_rules.yml"</span></p>
<p><span class="hljs-comment"># A scrape configuration containing exactly one endpoint to scrape:</span>
<span class="hljs-comment"># Here it's Prometheus itself.</span>
<span class="hljs-attr">scrape_configs:</span>
<span class="hljs-comment"># The job name is added as a label <code>job=&amp;lt;job_name&amp;gt;</code> to any timeseries scraped from this config.</span>
<span class="hljs-bullet">-</span><span class="hljs-attr">job_name:</span><span class="hljs-string">'prometheus'</span></p>
<p><span class="hljs-comment"># metrics_path defaults to '/metrics'</span>
<span class="hljs-comment"># scheme defaults to 'http'.</span></p>
<p><span class="hljs-attr">static_configs:</span>
<span class="hljs-bullet">-</span><span class="hljs-attr">targets:</span><span class="hljs-string">['localhost:9090']</span></p>
</code><p><code data-language="yaml"><span class="hljs-bullet">-</span><span class="hljs-attr">job_name:</span><span class="hljs-string">'student'</span>
<span class="hljs-attr">metrics_path:</span><span class="hljs-string">actuator/prometheus</span>
<span class="hljs-attr">static_configs:</span>
<span class="hljs-bullet">-</span><span class="hljs-attr">targets:</span><span class="hljs-string">['${pc</span><span class="hljs-string">ipaddress}:8080']</span>
</code></p></pre><p></p>
<h3 id="data-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%83%9D%EC%84%B1">data 디렉토리 생성</h3>
<pre><code>$ mkdir data
</code></pre>
<h3 id="%EC%A1%B0%ED%9A%8C">조회</h3>
<ul>
<li>hikaricp_connections_active</li>
</ul>
<h2 id="Grafana">Grafana</h2>
<ul>
<li>Grafana 로 prometeus 정보를 시각화</li>
<li>성능 추이를 추적하여 인프라 scale up 또는 scale out 지표로 사용</li>
</ul>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3427019797123891927/attach-files/3427240510479776458" alt="Inline-image-2022-12-13 01.35.06.108.png"></p>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.12 22:33</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Acutator EndPoint 추가 실습</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>
<p>Account 시스템에 다음의 Actuator Endpoint 가 동작하도록 @Endpoint 생성 코드를 추가하세요.</p>
</li>
<li>
<p>curl -XGET <a href="http://localhost:8080/actuator/counter" target="_blank">http://localhost:8080/actuator/counter</a></p>
</li>
<li>
<p>curl –X POST -H"Content-Type: application/json" -d'{"delta":100}'  <a href="http://localhost:8080/actuator/counter" target="_blank">http://localhost:8080/actuator/counter</a></p>
</li>
<li>
<p>curl –X DELETE <a href="http://localhost:8080/actuator/counter" target="_blank">http://localhost:8080/actuator/counter</a></p>
</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 01:12</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Actuator Custom HealthIndicator 작성하기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>사용자 정의 HealtheIndicator 를 개발합니다.</li>
</ul>
<h2 id="%EA%B8%B0%EB%8A%A5">기능</h2>
<ul>
<li>다음 api 를 호출하면 actuator health 가 fail 이 되도록 HealtheIndicator 를 개발합니다.</li>
</ul>
<pre><code>$ curl -XPost http://localhost:8080/management/fail
</code></pre>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 01:27</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">Actuator Custom InfoContributor 작성하기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Account 시스템에 다음의 Actuator Endpoint 에 AuthorInfoContributor 를 구성하여 info endpoint에 정보를 추가하세요.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
<h2 id="AuthorInfoContributor-%ED%98%B8%EC%B6%9C-%EA%B2%B0%EA%B3%BC">AuthorInfoContributor 호출 결과</h2>
<pre class="lang-json"><code data-language="json"><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper"><ul class="pj-node-body"><li><span>"author"&nbsp;:&nbsp;<span><span><div class="pj-node-container"><span class="pj-node-top pj-node-bracket">{</span><div class="pj-node-content-wrapper" style="display: block;"><ul class="pj-node-body"><li><span>"name"&nbsp;:&nbsp;<span><span><div class="pj-leaf-container"><span class="pj-string">"${자신의 이름}"</span><span></span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket" style="display: inline;">}</span></div></span></span></span></li></ul></div><span class="pj-node-down pj-node-bracket">}</span></div></code></pre>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 16:22</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">promethues 설치 및 설정</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Spring boot Actuator 의 Prometheus EndPoint 를 활성화 합니다.</li>
<li>prometheus 를 활용하여 데이터를 조회합니다.
<ul>
<li>prometheus 에서 process_cpu_usage 를 조회합니다.</li>
</ul>
</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15 분</li>
</ul>
</div></div></div></main>
<div class="tui-editor-contents"><h2 id="Spring-Boot-Testing-%EC%84%A4%EC%B9%98">Spring Boot Testing 설치</h2>
<ul>
<li>spring boot는 테스트를 위한 다양한 애너테이션과 유틸리티를 제공한다.</li>
<li>테스트 지원은 spring-boot-test, spring-boot-test-autoconfigure 모듈로 제공된다.</li>
<li>개발자는 spring-boot-starter-test 의존성을 추가하여 설치할 수 있다.</li>
</ul>
<h3 id="maven">maven</h3>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag"><!--span class="hljs-name"-->scope</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code><p><code data-language="xml"></code></p></pre><p></p>
<h3 id="gradle">gradle</h3>
<pre class="lang-groovy"><code data-language="groovy">dependencies {
   testCompile(<span class="hljs-string">"org.springframework.boot:spring-boot-starter-test"</span>) 
}
</code></pre>
<h2 id="spring-boot-starter-test%EB%A1%9C-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC">spring-boot-starter-test로 제공하는 라이브러리</h2>
<table>
<thead>
<tr>
<th>구분</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>JUnit5</td>
<td>Java 애플리케이션 단위 테스트의 산업계 표준(de-facto standard)</td>
</tr>
<tr>
<td>Spring Test &amp; Spring Boot Test</td>
<td>Spring Boot 애플리케이션 테스트 지원용 유틸리티와 통합테스트 지원도구</td>
</tr>
<tr>
<td>AssertJ</td>
<td>Assertion 라이브러리</td>
</tr>
<tr>
<td>Hamcrest</td>
<td>Matcher 객체용 라이브러리</td>
</tr>
<tr>
<td>Mockito</td>
<td>Mocking framework</td>
</tr>
<tr>
<td>JSONassert</td>
<td>JSON Assertion 용</td>
</tr>
</tbody>
</table>
<h2 id="Spring-Boot-Testing-%EC%95%A0%EB%84%88%ED%85%8C%EC%9D%B4%EC%85%98">Spring Boot Testing 애너테이션</h2>
<h3 id="%40SpringBootTest">@SpringBootTest</h3>
<ul>
<li>@SpringBootTest를 사용하면 spring boot의 기능을 사용하면서 통합 테스트 할 때 필요합니다.</li>
<li>실제 애플리케이션 기동 시와 거의 유사 하게 전체 빈 설정이 로딩됩니다.</li>
</ul>
<h3 id="%EC%A3%BC%EC%9D%98">주의</h3>
<ul>
<li>JUnit 4:&nbsp;@RunWith(SpringRunner.class)&nbsp;추가</li>
<li>JUnit 5 :&nbsp;@ExtendWith(SpringExtension.class)&nbsp;는 이미 포함되어 있음</li>
</ul>
<h2 id="Spring-Boot-Testing-%EC%95%A0%EB%84%88%ED%85%8C%EC%9D%B4%EC%85%98">Spring Boot Testing 애너테이션</h2>
<h3 id="%40SpringBootTest">@SpringBootTest</h3>
<ul>
<li>webEnvironment를 설정해서 서버를 실행할 수 있다.</li>
</ul>
<h3 id="SpringBootTest.webEnvironment">SpringBootTest.webEnvironment</h3>
<table>
<thead>
<tr>
<th>구분</th>
<th>설명</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>MOCK</td>
<td>MockMvc로 테스트 가능</td>
<td>기본</td>
</tr>
<tr>
<td>RANDOM_PORT</td>
<td>Embedded WAS 실행, 임의의 포트로 실행, (rollback 동작하지 않음)</td>
<td>@LocalServerPort로 주입</td>
</tr>
<tr>
<td>DEFINED_PORT</td>
<td>Embedded WAS 실행, 설정한 포트로 실행, (rollback 동작하지 않음)</td>
<td>server.port 속성으로 결정</td>
</tr>
<tr>
<td>NONE</td>
<td>WEB 이 아닌 일반 서비스 테스트용</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="MOCK-environment">MOCK environment</h2>
<ul>
<li>MOCK 환경에서는 서버를 실행하지 않기 때문에 MockMvc나 WebTestClient 로 테스트 해야 한다.</li>
</ul>
<pre class="lang-java"><code data-language="java">@SpringBootTest
@AutoConfigureMockMvc
class MyMockMvcTests {
@Autowiredprivate MockMvc mockMvc;
<pre><code>@Test
void testWithMockMvc(@Autowired MockMvc mvc) throws Exception {
    mvc.perform(get("/")).andExpect(status().isOk()).andExpect(content().string("Hello World"));
}

// If Spring WebFlux is on the classpath, you can drive MVC tests with a WebTestClient
@Test
void testWithWebTestClient(@Autowired WebTestClient webClient) {
    webClient
            .get().uri("/")
            .exchange()
            .expectStatus().isOk()
            .expectBody(String.class).isEqualTo("Hello World");
}
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8">[시연] Student 시스템 통합테스트</h2>
<ul>
<li>다음과 같이 테스트 클래스를 생성합니다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> com.nhnacademy.edu.springboot.student.Student;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.MethodOrderer;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Order;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.TestMethodOrder;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;
<span class="hljs-keyword">import</span> org.springframework.http.MediaType;
<span class="hljs-keyword">import</span> org.springframework.test.web.servlet.MockMvc;
<p><span class="hljs-keyword">import</span><span class="hljs-keyword">static</span> org.hamcrest.Matchers.equalTo;
<span class="hljs-keyword">import</span><span class="hljs-keyword">static</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders.<em>;
<span class="hljs-keyword">import</span><span class="hljs-keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.</em>;</p>
</code><p><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-meta">@TestMethodOrder</span>(MethodOrderer.OrderAnnotation<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">StudentControllerTest</span> </span>{
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(GET-%2Fstudents)">[시연] Student 시스템 통합테스트 (GET /students)</h2>
<ul>
<li>MockMvc 를 주입받아 /students 를 호출합니다.</li>
<li>jsonPath 를 이용하여 json 경로상의 값을 비교합니다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-meta">@TestMethodOrder</span>(MethodOrderer.OrderAnnotation<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">StudentControllerTest</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> MockMvc mockMvc;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">1</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudents</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
mockMvc.perform(get(<span class="hljs-string">"/students"</span>))
.andExpect(status().isOk())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath(<span class="hljs-string">"$[0].name"</span>, equalTo(<span class="hljs-string">"manty"</span>)));
}
}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(GET-%2Fstudents%2F%7Bid%7D)">[시연] Student 시스템 통합테스트 (GET /students/{id})</h2>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">2</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
</code><p><code data-language="java">mockMvc.perform(get(<span class="hljs-string">"/students/{id}"</span>,<span class="hljs-number">1L</span>))
.andExpect(status().isOk())
.andExpect(content().contentType(MediaType.APPLICATION_JSON))
.andExpect(jsonPath(<span class="hljs-string">"$.name"</span>, equalTo(<span class="hljs-string">"manty"</span>)));
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(POST-%2Fstudents)">[시연] Student 시스템 통합테스트 (POST /students)</h2>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">3</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testCreateStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
    ObjectMapper objectMapper =<span class="hljs-keyword">new</span> ObjectMapper();
    Student zbum =<span class="hljs-keyword">new</span> Student(<span class="hljs-number">3L</span>,<span class="hljs-string">"zbum1"</span>,<span class="hljs-number">100</span>);
    mockMvc.perform(post(<span class="hljs-string">"/students"</span>)
            .content(objectMapper.writeValueAsString(zbum))
                    .contentType(MediaType.APPLICATION_JSON))
            .andExpect(status().isCreated())
            .andExpect(content().contentType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath(<span class="hljs-string">"$.name"</span>, equalTo(<span class="hljs-string">"zbum1"</span>)));
}
</code></pre>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(DELETE-%2Fstudents)">[시연] Student 시스템 통합테스트 (DELETE /students)</h2>
<pre class="lang-java"><code data-language="java">   <span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">4</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">deleteStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
    <span class="hljs-keyword">this</span>.mockMvc.perform(delete(<span class="hljs-string">"/students/{id}"</span>,<span class="hljs-number">3L</span>))
                .andExpect(status().isOk())
                .andExpect(content().contentType(MediaType.APPLICATION_JSON))
                .andExpect(jsonPath(<span class="hljs-string">"$.result"</span>, equalTo(<span class="hljs-string">"OK"</span>)));
    }
}
</code></pre>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427264083930539839" target="">SpringBootTest 사용하기 - 통합테스트</a></li>
</ul>
<h2 id="RANDOM_PORT%2C-DEFINED_PORT-environment">RANDOM_PORT, DEFINED_PORT environment</h2>
<ul>
<li>WebFlux에서 서버를 실행하는 환경에서는 테스트하려면 WebTestClient를 사용 해야 한다.</li>
</ul>
<pre class="lang-java"><code data-language="java">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)
class MyRandomPortWebTestClientTests {
<pre><code>@Test
void exampleTest(@Autowired WebTestClient webClient) {
    webClient
        .get().uri("/")
        .exchange()
        .expectStatus().isOk()
        .expectBody(String.class).isEqualTo("Hello World");
}
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="RANDOM_PORT%2C-DEFINED_PORT-environment">RANDOM_PORT, DEFINED_PORT environment</h2>
<ul>
<li>WebFlux를 사용할 수 없는 환경에서는 TestRestTemplate을 사용할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>(webEnvironment = WebEnvironment.RANDOM_PORT)
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyRandomPortTestRestTemplateTests</span> </span>{
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">exampleTest</span><span class="hljs-params">(@Autowired TestRestTemplate restTemplate)</span> </span>{
String body = restTemplate.getForObject(<span class="hljs-string">"/"</span>, String<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
assertThat(body).isEqualTo(<span class="hljs-string">"Hello World"</span>);
}</p>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%40SpringBootTest(RANDOM_PORT)">[시연] @SpringBootTest(RANDOM_PORT)</h2>
<ul>
<li>Student 시스템 통합테스트</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-keyword">import</span> com.nhnacademy.edu.springboot.student.Student;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.MethodOrderer;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Order;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.TestMethodOrder;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;
<span class="hljs-keyword">import</span> org.springframework.boot.test.web.client.TestRestTemplate;
<span class="hljs-keyword">import</span> org.springframework.core.ParameterizedTypeReference;
<span class="hljs-keyword">import</span> org.springframework.http.*;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span><span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.assertThat;
<span class="hljs-meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
<span class="hljs-meta">@TestMethodOrder</span>(MethodOrderer.OrderAnnotation<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">StudentControllerTest</span> </span>{
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%40SpringBootTest(RANDOM_PORT)">[시연] @SpringBootTest(RANDOM_PORT)</h2>
<h3 id="Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(GET-%2Fstudents)">Student 시스템 통합테스트 (GET /students)</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> TestRestTemplate testRestTemplate;
<p><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">1</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudents</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
HttpHeaders headers =<span class="hljs-keyword">new</span> HttpHeaders();
headers.setAccept(List.of(MediaType.APPLICATION_JSON));
HttpEntity&lt;Student&gt; entity =<span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(headers);
ResponseEntity&lt;List&lt;Student&gt;&gt; exchange = testRestTemplate.exchange(
<span class="hljs-string">"/students"</span>,
HttpMethod.GET,
entity,
<span class="hljs-keyword">new</span> ParameterizedTypeReference&lt;List&lt;Student&gt;&gt;() {
});</p>
<pre><code>assertThat(exchange.getBody())
        .contains(&lt;span class="hljs-keyword"&gt;new&lt;/span&gt; Student(&lt;span class="hljs-number"&gt;1L&lt;/span&gt;,&lt;span class="hljs-string"&gt;"manty"&lt;/span&gt;,&lt;span class="hljs-number"&gt;100&lt;/span&gt;));
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h3 id="Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(GET-%2Fstudents%2F%7Bid%7D)">Student 시스템 통합테스트 (GET /students/{id})</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">2</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
    ResponseEntity<student> result = testRestTemplate.getForEntity(
        <span class="hljs-string">"/students/{id}"</span>,
            Student<span class="hljs-class">.<span class="hljs-keyword">class</span>,
            1<span class="hljs-title">L</span>)</span>;
<pre><code>assertThat(result.getBody())
        .isEqualTo(&lt;span class="hljs-keyword"&gt;new&lt;/span&gt; Student(&lt;span class="hljs-number"&gt;1L&lt;/span&gt;,&lt;span class="hljs-string"&gt;"manty"&lt;/span&gt;,&lt;span class="hljs-number"&gt;100&lt;/span&gt;));
</code></pre>
</student></code><p><code data-language="java">}
</code></p></pre><p></p>
<h3 id="Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(POST-%2Fstudents)">Student 시스템 통합테스트 (POST /students)</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">3</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testCreateStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
    Student zbum =<span class="hljs-keyword">new</span> Student(<span class="hljs-number">3L</span>,<span class="hljs-string">"zbum1"</span>,<span class="hljs-number">100</span>);
    ResponseEntity<student> result = testRestTemplate.postForEntity(
        <span class="hljs-string">"/students"</span>,
            zbum,
            Student<span class="hljs-class">.<span class="hljs-keyword">class</span>)</span>;
<pre><code>assertThat(result.getBody())
        .isEqualTo(zbum);
</code></pre>
<p>}</p>
</student></code><p><code data-language="java"></code></p></pre><p></p>
<h3 id="Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-(DELETE-%2Fstudents)">Student 시스템 통합테스트 (DELETE /students)</h3>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">4</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testDeleteStudent</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
    testRestTemplate.delete(
        <span class="hljs-string">"/students/{id}"</span>,
        <span class="hljs-number">3L</span>);
}
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%EC%8B%A4%EC%8A%B5">실습</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427460567620323702" target="">SpringBootTest 사용하기 - 통합테스트 RANDOM_PORT</a></li>
</ul>
<h2 id="%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8---Mocking-Beans">단위 테스트 - Mocking Beans</h2>
<ul>
<li>테스트환경에서 사용할 수 없는 리모트 서비스등을 시뮬레이션 하도록 특정 컴포넌트를 Mocking</li>
<li>@MockBean으로 빈을 생성하거나 빈을 대체할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyTests</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> Reverser reverser;</p>
<p><span class="hljs-meta">@MockBean</span> <span class="hljs-comment">//RemoteService 를 대체하는 예제</span>
<span class="hljs-keyword">private</span> RemoteService remoteService;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">exampleTest</span><span class="hljs-params">()</span> </span>{
given(<span class="hljs-keyword">this</span>.remoteService.getValue()).willReturn(<span class="hljs-string">"spring"</span>);
String reverse =<span class="hljs-keyword">this</span>.reverser.getReverseValue();<span class="hljs-comment">// Calls injected RemoteService</span>
assertThat(reverse).isEqualTo(<span class="hljs-string">"gnirps"</span>);
}</p>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C---%40MockBean">[시연] Student 시스템 - @MockBean</h2>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentControllerTest</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> MockMvc mockMvc;</p>
<p><span class="hljs-meta">@MockBean</span>
<span class="hljs-keyword">private</span> StudentRepository studentRepository;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudents</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception</span>{
given(studentRepository.findAll()).willReturn(List.of(<span class="hljs-keyword">new</span> Student(<span class="hljs-number">100L</span>,<span class="hljs-string">"AA"</span>,<span class="hljs-number">90</span>)));</p>
<pre><code>    mockMvc.perform(get(&lt;span class="hljs-string"&gt;"/students"&lt;/span&gt;))
            .andExpect(status().isOk())
            .andExpect(content().contentType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath(&lt;span class="hljs-string"&gt;"$[0].name"&lt;/span&gt;, equalTo(&lt;span class="hljs-string"&gt;"AA"&lt;/span&gt;)));
}
</code></pre>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-controller-test-with-%40MockBean">[실습] controller test with @MockBean</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427546889170754898" target="">SpringBootTest 사용하기 - Controller 테스트 with @MockBean</a></li>
</ul>
<h2 id="Spying-Beans">Spying Beans</h2>
<ul>
<li>테스트환경에서 이미 존재하는 빈을 래핑하여 특정 메소드가 다른 동작을 하도록 설정할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyTests</span> </span>{
<p><span class="hljs-meta">@SpyBean</span>
<span class="hljs-keyword">private</span> RemoteService remoteService;</p>
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> Reverser reverser;</p>
</code><p><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span><span class="hljs-keyword">void</span><span class="hljs-title">exampleTest</span><span class="hljs-params">()</span> </span>{
given(<span class="hljs-keyword">this</span>.remoteService.someCall()).willReturn(<span class="hljs-string">"mock"</span>);
String reverse = reverser.reverseSomeCall();
assertThat(reverse).isEqualTo(<span class="hljs-string">"kcom"</span>);
then(<span class="hljs-keyword">this</span>.remoteService).should(times(<span class="hljs-number">1</span>)).someCall();
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-Student-%EC%8B%9C%EC%8A%A4%ED%85%9C-%40SpyBean">[시연] Student 시스템 @SpyBean</h2>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-meta">@TestMethodOrder</span>(MethodOrderer.OrderAnnotation<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">StudentControllerTest</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> MockMvc mockMvc;</p>
<p><span class="hljs-meta">@SpyBean</span>
<span class="hljs-keyword">private</span> StudentService studentService;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-meta">@Order</span>(<span class="hljs-number">1</span>)
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetStudents</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
given(studentService.getStudents())
.will(invocation -&gt;{
System.out.println(<span class="hljs-string">"Spy!"</span>);
<span class="hljs-keyword">return</span> List.of(<span class="hljs-keyword">new</span> Student(<span class="hljs-number">100L</span>,<span class="hljs-string">"AA"</span>,<span class="hljs-number">90</span>));
});</p>
<pre><code>    mockMvc.perform(get(&lt;span class="hljs-string"&gt;"/students"&lt;/span&gt;))
            .andExpect(status().isOk())
            .andExpect(content().contentType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath(&lt;span class="hljs-string"&gt;"$[0].name"&lt;/span&gt;, equalTo(&lt;span class="hljs-string"&gt;"AA"&lt;/span&gt;)));
}
</code></pre>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="Auto-configured-JSON-Tests">Auto-configured JSON Tests</h2>
<ul>
<li>자동설정 환경에서 객체의 JSON 직렬화, 역직렬화를 테스트하기 위하여 @JsonTest 을 사용합니다.</li>
<li>AssertJ 기반의 테스트 지원을 제공하기 때문에 객체-JSON 매핑의 결과를 검증할 수 있습니다.</li>
<li>JacksonTester,&nbsp;GsonTester,&nbsp;JsonbTester,&nbsp;BasicJsonTester&nbsp;클래스를 각각의 JSON 라이브러리 헬퍼로 사용할 수 있습니다.</li>
</ul>
<h2 id="Auto-configured-JSON-Tests">Auto-configured JSON Tests</h2>
<ul>
<li>JacksonTester 사용예</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@JsonTest</span>
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyJsonTests</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> JacksonTester&lt;VehicleDetails&gt; json;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">serialize</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
VehicleDetails details =<span class="hljs-keyword">new</span> VehicleDetails(<span class="hljs-string">"Honda"</span>,<span class="hljs-string">"Civic"</span>);
assertThat(<span class="hljs-keyword">this</span>.json.write(details)).isEqualToJson(<span class="hljs-string">"expected.json"</span>);
assertThat(<span class="hljs-keyword">this</span>.json.write(details)).hasJsonPathStringValue(<span class="hljs-string">"@.make"</span>);
assertThat(<span class="hljs-keyword">this</span>.json.write(details)).extractingJsonPathStringValue(<span class="hljs-string">"@.make"</span>)
.isEqualTo(<span class="hljs-string">"Honda"</span>);
}</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">deserialize</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
String content =<span class="hljs-string">"{"make":"Ford","model":"Focus"}"</span>;
assertThat(<span class="hljs-keyword">this</span>.json.parse(content)).isEqualTo(<span class="hljs-keyword">new</span> VehicleDetails(<span class="hljs-string">"Ford"</span>,<span class="hljs-string">"Focus"</span>));
assertThat(<span class="hljs-keyword">this</span>.json.parseObject(content).getMake()).isEqualTo(<span class="hljs-string">"Ford"</span>);
}</p>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="Auto-configured-Spring-MVC-Tests">Auto-configured Spring MVC Tests</h2>
<ul>
<li>Spring MVC의 Controller를 테스트 하기 위해서는 @WebMvcTest 를 사용한다.</li>
<li>@WebMvcTest를 사용하면@Controller, @ControllerAdvice, @JsonComponent, Converter, GenericConverter, Filter, HandlerInterceptor, WebMvcConfigurer, WebMvcRegistrations, HandlerMethodArgumentResolver 등 만 스캔한다.</li>
<li>테스트에서 다른 컴포넌트를 스캔하고 싶다면 테스트코드에 @Import 로 직접 설정해 주어야 한다.</li>
</ul>
<h2 id="Auto-configured-Spring-MVC-Tests">Auto-configured Spring MVC Tests</h2>
<ul>
<li>@WebMvcTest 를 사용하면 MockMvc 객체를 얻을 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@WebMvcTest</span>(UserVehicleController<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">MyControllerTests</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> MockMvc mvc;</p>
<p><span class="hljs-meta">@MockBean</span>
<span class="hljs-keyword">private</span> UserVehicleService userVehicleService;</p>
</code><p><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testExample</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
given(<span class="hljs-keyword">this</span>.userVehicleService.getVehicleDetails(<span class="hljs-string">"sboot"</span>))
.willReturn(<span class="hljs-keyword">new</span> VehicleDetails(<span class="hljs-string">"Honda"</span>,<span class="hljs-string">"Civic"</span>));
<span class="hljs-keyword">this</span>.mvc.perform(get(<span class="hljs-string">"/sboot/vehicle"</span>).accept(MediaType.TEXT_PLAIN))
.andExpect(status().isOk())
.andExpect(content().string(<span class="hljs-string">"Honda Civic"</span>));
}
}
</code></p></pre><p></p>
<h2 id="Auto-configured-Spring-MVC-Tests">Auto-configured Spring MVC Tests</h2>
<ul>
<li>HtmlUnit 과 Selenium 을 사용한다면 HtmlUnit의 WebClient 도 사용할 수 있다..</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@WebMvcTest</span>(UserVehicleController<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">MyHtmlUnitTests</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> WebClient webClient;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testExample</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
HtmlPage page =<span class="hljs-keyword">this</span>.webClient.getPage(<span class="hljs-string">"/test"</span>);
assertThat(page.getBody().getTextContent()).isEqualTo(<span class="hljs-string">"Honda Civic"</span>);
}</p>
</code><p><code data-language="java">}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%40SpyBean">[시연] @SpyBean</h2>
<ul>
<li>Student 시스템 @WebMvcTest</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@WebMvcTest</span>(SystemController<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">SystemControllerTest</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
MockMvc mockMvc;</p>
<p><span class="hljs-meta">@MockBean</span>
SystemProperties systemProperties;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testGetAuthor</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
given(systemProperties.getAuthor())
.willReturn(<span class="hljs-string">"ABCDEFG"</span>);</p>
<pre><code>    mockMvc.perform(get(&lt;span class="hljs-string"&gt;"/system/author"&lt;/span&gt;))
            .andExpect(status().isOk())
            .andExpect(content().contentType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath(&lt;span class="hljs-string"&gt;"$.author"&lt;/span&gt;, equalTo(&lt;span class="hljs-string"&gt;"ABCDEFG"&lt;/span&gt;)));
}
</code></pre>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="Auto-configured-Data-JPA-Tests">Auto-configured Data JPA Tests</h2>
<ul>
<li>
<p>JPA를 테스트 하기 위해서는 @DataJpaTest 를 사용한다.</p>
</li>
<li>
<p>@DataJpaTest 를 사용하면 @Entity, Repository 만 스캔한다.</p>
</li>
<li>
<p>기본적으로 테스트 이후에 수정된 정보는 모두 롤백한다.</p>
</li>
<li>
<p>H2와 같은 인메모리 데이터베이스가 클래스 패스에 존재하면 사용하지만 실제 데이터베이스에서 테스트하려면 @AutoConfigureTestDatabase(replace = Replace.NONE) 을 설정해야 한다.</p>
</li>
</ul>
<h2 id="Auto-configured-Data-JPA-Tests">Auto-configured Data JPA Tests</h2>
<ul>
<li>@DataJpaTest 를 사용하면 TestEntityManager 객체를 얻을 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@DataJpaTest</span>
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">MyRepositoryTests</span> </span>{
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> TestEntityManager entityManager;</p>
<p><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> UserRepository repository;</p>
</code><p><code data-language="java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testExample</span><span class="hljs-params">()</span><span class="hljs-keyword">throws</span> Exception </span>{
<span class="hljs-keyword">this</span>.entityManager.persist(<span class="hljs-keyword">new</span> User(<span class="hljs-string">"sboot"</span>,<span class="hljs-string">"1234"</span>));
User user =<span class="hljs-keyword">this</span>.repository.findByUsername(<span class="hljs-string">"sboot"</span>);
assertThat(user.getUsername()).isEqualTo(<span class="hljs-string">"sboot"</span>);
assertThat(user.getEmployeeNumber()).isEqualTo(<span class="hljs-string">"1234"</span>);
}
}
</code></p></pre><p></p>
<h2 id="%5B%EC%8B%9C%EC%97%B0%5D-%40DataJpaTest">[시연] @DataJpaTest</h2>
<ul>
<li>Student 시스템 @DataJpaTest</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@DataJpaTest</span>
<span class="hljs-meta">@AutoConfigureTestDatabase</span>(replace = AutoConfigureTestDatabase.Replace.NONE)
<span class="hljs-class"><span class="hljs-keyword">class</span><span class="hljs-title">StudentRepositorySliceTest</span> </span>{
<span class="hljs-meta">@Autowired</span>
    TestEntityManager entityManager;
<p><span class="hljs-meta">@Autowired</span>
StudentRepository studentRepository;</p>
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testFindAll</span><span class="hljs-params">()</span> </span>{
Student manty =<span class="hljs-keyword">new</span> Student(<span class="hljs-number">10L</span>,<span class="hljs-string">"Manty"</span>,<span class="hljs-number">100</span>);
entityManager.merge(manty);</p>
<pre><code>    Student student = studentRepository.findById(&lt;span class="hljs-number"&gt;10L&lt;/span&gt;).orElse(&lt;span class="hljs-keyword"&gt;null&lt;/span&gt;);
    assertThat(student).isEqualTo(manty);

}
</code></pre>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="%5B%EC%8B%A4%EC%8A%B5%5D-Account-%EC%8B%9C%EC%8A%A4%ED%85%9C-%40DataJpaTest">[실습] Account 시스템 @DataJpaTest</h2>
<ul>
<li><a href="/share/pages/kmGSxzCBRX6Y4BNAdtUXAA/3427570090726579732" target="">@DataJpaTest 사용하기</a></li>
</ul>
<h2 id="Test-Utilities">Test Utilities</h2>
<ul>
<li>
<p>ConfigDataApplicationContextInitializer</p>
<ul>
<li>application.properties 를 읽어들이는데 사용한다.</li>
<li>@SpringBootTest가 제공하는 모든 기능이 필요 없을때 사용한다.</li>
</ul>
</li>
<li>
<p>ConfigDataApplicationContextInitializer 를 단독으로 사용하면 application.properties 내용을 스프링 Environment 에 로드 하는 것만 수행한다.</p>
</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@ContextConfiguration</span>(classes = Config<span class="hljs-class">.<span class="hljs-keyword">class</span>,<span class="hljs-title">initializers</span> </span>= ConfigDataApplicationContextInitializer<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">MyConfigFileTests</span> </span>{
<p><span class="hljs-comment">// ...</span></p>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
<h2 id="OutputCapture">OutputCapture</h2>
<ul>
<li>System.out, System.err 으로 출력하는 내용을 잡아낼 수 있다..</li>
<li>수정할 수 없는 라이브러리의 결과를 확인할 때 사용할 수 있다.</li>
</ul>
<pre class="lang-java"><code data-language="java"><span class="hljs-meta">@ExtendWith</span>(OutputCaptureExtension<span class="hljs-class">.<span class="hljs-keyword">class</span>)
<span class="hljs-title">class</span><span class="hljs-title">MyOutputCaptureTests</span> </span>{
<p><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">void</span><span class="hljs-title">testName</span><span class="hljs-params">(CapturedOutput output)</span> </span>{
System.out.println(<span class="hljs-string">"Hello World!"</span>);
assertThat(output).contains(<span class="hljs-string">"World"</span>);
}</p>
<p>}</p>
</code><p><code data-language="java"></code></p></pre><p></p>
</div>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 02:22</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">SpringBootTest 사용하기 - 통합테스트</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Account 시스템의 모든 API 를 통합테스트 하는 테스트 코드를 작성합니다.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15 분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 11:44</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">SpringBootTest 사용하기 - 통합테스트 RANDOM_PORT</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Account 시스템의 Controller 메소드를 @SpringBootTest(RANDOM_PORT) 로 통합테스트 작성하세요.</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10 분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 11:44</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">SpringBootTest 사용하기 - Controller 테스트 with @MockBean</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EC%9E%91%EC%97%85%EB%82%B4%EC%9A%A9">작업내용</h2>
<ul>
<li>Account 시스템의 Controller 메소드를 @MockBean 을 사용하여 통합테스트를 작성하세요.(4개 메소드)</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>15분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 12:30</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">@DataJpaTest 사용하기</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>Account 시스템의 Repository 메소드를 @DataJpaTest 을 사용하여 통합테스트를 작성하세요.<br>
(findAll, findById, save, delete)</li>
</ul>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>10분</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2022.12.13 17:41</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">10. Custom Spring Boot Starter</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="Spring-Boot-Starter-%EC%9D%98-%EA%B5%AC%EC%84%B1">Spring Boot Starter 의 구성</h2>
<h3 id="%EC%9E%90%EB%8F%99%EC%84%A4%EC%A0%95-%EB%AA%A8%EB%93%88">자동설정 모듈</h3>
<ul>
<li>기능을 사용하기 위한 자동설정(auto-configure) 코드와 확장을 위한 설정키의 집합</li>
</ul>
<h3 id="Starter-%EB%AA%A8%EB%93%88">Starter 모듈</h3>
<ul>
<li>필요한 라이브러리 집합을 제공하기 위한 starter</li>
</ul>
<h2 id="%EC%9E%90%EB%8F%99%EC%84%A4%EC%A0%95(auto-configure)-%EB%AA%A8%EB%93%88">자동설정(auto-configure) 모듈</h2>
<ul>
<li>자동설정 모듈에는 라이브러리를 바로 사용할 수 있는 자동설정과 설정키 정의,</li>
<li>콜백 인터페이스를 포함한다.</li>
<li>Spring Boot의 annotation processor를 사용하여 메타데이터 파일을 생성할 수 있다.</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-autoconfigure-processor<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag"><!--span class="hljs-name"-->optional</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code></pre>
<h2 id="Starter-%EB%AA%A8%EB%93%88">Starter 모듈</h2>
<ul>
<li>starter 모듈에는 java 코드를 포함하지 않는다.</li>
<li>라이브러리 의존성 만을 제공하도록 구현한다.</li>
</ul>
<h2 id="Starter-%EB%AA%85%EB%AA%85%EB%B2%95">Starter 명명법</h2>
<ul>
<li>적절한 네임스페이스를 제공해야 함</li>
<li>직접 작성하는 Starter에 spring-boot 라는 네임스페이스를 사용하지 말것</li>
<li>${기능이름}-spring-boot-starter 의 형식을 권장함</li>
<li>예) MyBatis-Spring-Boot-Starter</li>
</ul>
<h2 id="%EC%84%A4%EC%A0%95%ED%82%A4%EC%9D%98-%EA%B5%AC%EC%84%B1">설정키의 구성</h2>
<ul>
<li>설정키를 제공하고자 한다면, 유일한 네임스페이스를 사용해야 한다.</li>
<li>Spring Boot 가 사용하는 네임스페이스를 사용하지 말것 ( server, management, spring 등)</li>
<li>가능하면 고유명사를 네임스페이스로 사용할 것</li>
</ul>
</div></div></div></main>
<main data-v-0d15c768="" class="shared-page-body"><div data-v-0d15c768="" class="creator-wrapper"><span data-v-0d15c768="" class="date-info">Update 2023.02.09 16:44</span> <button data-v-c63a033a="" data-v-0d15c768="" class="presentation" content="발표 모드"><span data-v-c63a033a=""></span></button></div> <div data-v-0d15c768="" class="subject-wrapper"><span data-v-0d15c768="" class="subject">dooray-spring-boot-starter 개발</span></div> <!----> <div data-v-0d15c768="" class="view-contents-body"><div data-v-0d15c768=""><div class="tui-editor-contents"><h2 id="%EB%AA%A9%ED%91%9C">목표</h2>
<ul>
<li>dooray 메신저에 메시지 발송용 dooray-spring-boot-starter 개발</li>
<li>메신저 대화방에 다음의 포멧으로 발송</li>
</ul>
<pre><code>name : 이름
message : 하고 싶은말.. (재미있을 수록 좋음)
</code></pre>
<h2 id="%EC%98%88%EC%83%81%EC%8B%9C%EA%B0%84">예상시간</h2>
<ul>
<li>20분</li>
</ul>
<h2 id="%EC%A0%9C%EA%B3%B5%EC%BD%94%EB%93%9C">제공코드</h2>
<ul>
<li><a href="https://github.com/edu-springboot/edu-doorayclient-springboot-workshop.git" target="_blank">https://github.com/edu-springboot/edu-doorayclient-springboot-workshop.git</a></li>
</ul>
<h3 id="dooray-hook-sender">dooray-hook-sender</h3>
<ul>
<li>dooray 메신저에 메시지를 발송하는 일반 java 라이브러리</li>
</ul>
<pre class="lang-xml"><code data-language="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.nhn.dooray.messenger<span class="hljs-tag"><!--span class="hljs-name"-->groupId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dooray-hook-sender<span class="hljs-tag"><!--span class="hljs-name"-->artifactId</span>&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.0-RELEASE<span class="hljs-tag"><!--span class="hljs-name"-->version</span>&gt;
<span class="hljs-tag"><!--span class="hljs-name"-->dependency</span>&gt;
</code><p><code data-language="xml"></code></p></pre><p></p>
<h3 id="dooray-spring-boot-autoconfigure">dooray-spring-boot-autoconfigure</h3>
<ul>
<li>자동설정 모듈</li>
</ul>
<h3 id="dooray-spring-boot-starter">dooray-spring-boot-starter</h3>
<ul>
<li>starter 모듈</li>
</ul>
<h3 id="dooray-spring-boot-starter-application">dooray-spring-boot-starter-application</h3>
<ul>
<li>dooray-spring-boot-starter를 사용하는 애플리케이션</li>
</ul>
<h2 id="%EA%B2%B0%EA%B3%BC%EB%AC%BC">결과물</h2>
<p><img src="/share/tree/kmGSxzCBRX6Y4BNAdtUXAA/pages/3427722881076317582/attach-files/3427723289465175550" alt="image.png"></p>
<h2 id="hook-url">hook url</h2>
<ul>
<li>
<p>2022-12-광주</p>
<ul>
<li><a href="https://hook.dooray.com/services/3204376758577275363/3428358313478707480/onLmqaWGQ768s5ZVBFZ4jw" target="_blank">https://hook.dooray.com/services/3204376758577275363/3428358313478707480/onLmqaWGQ768s5ZVBFZ4jw</a></li>
</ul>
</li>
<li>
<p>2023-02-09 NHN</p>
<ul>
<li><a href="https://hook.dooray.com/services/3036349505739914786/3469734536114851559/VvGYIw3aTEemVjB2_CFxUw" target="_blank">https://hook.dooray.com/services/3036349505739914786/3469734536114851559/VvGYIw3aTEemVjB2_CFxUw</a></li>
</ul>
</li>
</ul>
</div></div></div></main></body></html>